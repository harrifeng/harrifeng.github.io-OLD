<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>rails4way</title>
<!-- 2015-07-26 ÖÜÈÕ 11:00 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="your name" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>

         <link href="http://fonts.googleapis.com/css?family=Droid+Sans+Mono|Galdeano|Open+Sans:600italic,400,600|Roboto+Condensed:400,700" rel="stylesheet" type="text/css">
         <link rel="stylesheet" type="text/css" href="/static/css/main.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="http://harrifeng.github.io/sitemap.html"> UP </a>
 |
 <a accesskey="H" href="http://harrifeng.github.io/index.html"> HOME </a>
</div><div id="preamble" class="status">

         <div id="header">
            <div id="header-top">
                <div id="blog-title">Harrifeng's Path</div>
                <div id="blog-sub-title">çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…,ç»çŸ¥æ­¤äº‹è¦Coding</div>
            </div>
            <div id="nav">
                <ul>
                    <li><a href="/">é¦–é¡µ</a></li>
                    <li><a href="/about.html">About Me</a></li>
                    <li>
                    </li>
                </ul>
            </div>
         </div>
</div>
<div id="content">
<h1 class="title">rails4way</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Rails Enovironments and Configuration</a>
<ul>
<li><a href="#sec-1-1">Bundler</a>
<ul>
<li><a href="#sec-1-1-1">Gemfile</a>
<ul>
<li><a href="#sec-1-1-1-1">Loading Gems Directory From a Git Repository</a></li>
<li><a href="#sec-1-1-1-2">Loading Gems From the Files System</a></li>
</ul>
</li>
<li><a href="#sec-1-1-2">Installing Gems</a></li>
<li><a href="#sec-1-1-3">Gem Locking</a></li>
<li><a href="#sec-1-1-4">Packaging Gems</a></li>
</ul>
</li>
<li><a href="#sec-1-2">Startup and Application Settings</a>
<ul>
<li><a href="#sec-1-2-1">application.rb</a>
<ul>
<li><a href="#sec-1-2-1-1">Load Path Modifications</a></li>
<li><a href="#sec-1-2-1-2">Time Zones</a></li>
<li><a href="#sec-1-2-1-3">Localization</a></li>
<li><a href="#sec-1-2-1-4">Generator Default Settings</a></li>
</ul>
</li>
<li><a href="#sec-1-2-2">Initializers</a>
<ul>
<li><a href="#sec-1-2-2-1">Backtrace Silencers</a></li>
<li><a href="#sec-1-2-2-2">Filter Parameter Logging</a></li>
<li><a href="#sec-1-2-2-3">Inflections</a></li>
<li><a href="#sec-1-2-2-4">Custom MIME Types</a></li>
<li><a href="#sec-1-2-2-5">Secret Token</a></li>
<li><a href="#sec-1-2-2-6">Session Store</a></li>
<li><a href="#sec-1-2-2-7">Wrap Parameters</a></li>
</ul>
</li>
<li><a href="#sec-1-2-3">Additional Configuration</a>
<ul>
<li><a href="#sec-1-2-3-1">Log-Level Override</a></li>
<li><a href="#sec-1-2-3-2">Schema Dumper</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-3">Development Mode</a>
<ul>
<li><a href="#sec-1-3-1">Automatic Class Reloading</a>
<ul>
<li><a href="#sec-1-3-1-1">The Rails Class Loader</a></li>
<li><a href="#sec-1-3-1-2">Rails, Modules, and Auto-Loading Code</a></li>
</ul>
</li>
<li><a href="#sec-1-3-2">Eager Load</a></li>
<li><a href="#sec-1-3-3">Error Reports</a></li>
<li><a href="#sec-1-3-4">Caching</a></li>
<li><a href="#sec-1-3-5">Raise Delivery Errors</a></li>
<li><a href="#sec-1-3-6">Deprecation Notices</a></li>
<li><a href="#sec-1-3-7">Explain for Slow Queries</a></li>
<li><a href="#sec-1-3-8">Assets Debug Mode</a></li>
</ul>
</li>
<li><a href="#sec-1-4">Test Mode</a></li>
<li><a href="#sec-1-5">Production Mode</a>
<ul>
<li><a href="#sec-1-5-1">Assets</a></li>
<li><a href="#sec-1-5-2">Asset Hosts</a></li>
</ul>
</li>
<li><a href="#sec-1-6">Logging</a>
<ul>
<li><a href="#sec-1-6-1">Rails Log Files</a></li>
<li><a href="#sec-1-6-2">Tagged Logging</a></li>
<li><a href="#sec-1-6-3">Log File Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-2">Chapter 02: Routing</a>
<ul>
<li><a href="#sec-2-1">The Two Purposes of Routing</a></li>
<li><a href="#sec-2-2">The routes.rb File</a>
<ul>
<li><a href="#sec-2-2-1">Regular Routes</a></li>
<li><a href="#sec-2-2-2">Constraining Request Methods</a></li>
<li><a href="#sec-2-2-3">URL Patterns</a></li>
<li><a href="#sec-2-2-4">Segment Keys</a></li>
<li><a href="#sec-2-2-5">Spotlight on the :id Field</a></li>
<li><a href="#sec-2-2-6">Optional Segment Keys</a></li>
<li><a href="#sec-2-2-7">Redirect Routes</a></li>
<li><a href="#sec-2-2-8">The Format Segment</a></li>
<li><a href="#sec-2-2-9">Routes as Rack Endpoints</a></li>
<li><a href="#sec-2-2-10">Accept Header</a></li>
<li><a href="#sec-2-2-11">Segment Key Constraints</a></li>
<li><a href="#sec-2-2-12">The Root Route</a></li>
</ul>
</li>
<li><a href="#sec-2-3">Route Globbing</a></li>
<li><a href="#sec-2-4">Named Routes</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Rails Enovironments and Configuration</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>rails applicationæ‹¥æœ‰ä¸‰ä¸ªæ ‡å‡†çš„mode: development, test, production. ä¸åŒmode
ä¼šæœ‰ä¸åŒçš„è®¾ç½®
</li>
<li>é™¤äº†ä¸‰ä¸ªä¸åŒçš„æ ‡å‡†çš„modeå¤–,ä½ è¿˜å¯ä»¥è®¾è®¡è‡ªå·±çš„mode,æ‰€æœ‰çš„modeéƒ½ä¼šåœ¨config/environments
æ–‡ä»¶å¤¹é‡Œé¢å­˜å‚¨
</li>
<li>railsæ˜¯é€šè¿‡ç¯å¢ƒå˜é‡(RAILS_ENV)æ¥è®¾ç½®å½“å‰å¤„äºä»€ä¹ˆmodeçš„.
</li>
</ul>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Bundler</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Bundleræ˜¯ä¸€ä¸ªæ¥å¸®åŠ©ç®¡ç†gem, å’Œgem ç›¸äº’ä¾èµ–å…³ç³»çš„è½¯ä»¶.
</li>
<li>åœ¨Railsé‡Œé¢gemçš„ç‰ˆæœ¬æ§åˆ¶æ˜¯æ¯”è¾ƒå®½æ³›çš„,æ¯”å¦‚å¯ä»¥è¦æ±‚æ˜¯å¤§äº2.3.14çš„æ‰€æœ‰ç‰ˆæœ¬(&gt;= 2.3.14),
è€Œbundlerçš„ä½œç”¨,å°±æ˜¯ç»¼åˆæ‰€æœ‰å…¶ä»–çš„ç‰ˆæœ¬è¦æ±‚,æœ€ç»ˆç¡®å®šä¸€ä¸ª"å‡†ç¡®çš„ç‰ˆæœ¬æ•°å­—"
</li>
</ul>
</div>
<div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1">Gemfile</h4>
<div class="outline-text-4" id="text-1-1-1">
<ul class="org-ul">
<li>Rails applicationçš„æ ¹ç›®å½•ä¸‹é¢æœ‰ä¸€ä¸ªæ–‡ä»¶å«åšGemfile, å®ƒçš„åˆ—å‡ºäº†æ‰€æœ‰gemçš„ç‰ˆæœ¬,
èµ·åˆ°äº†ä¸€ä¸ª"è½½ç‰©æ¸…å•"çš„ä½œç”¨.
</li>
<li>æœ€è¿‘ç®€å•çš„ç”¨æ³•æ˜¯,åªæœ‰gemå’Œè½¯ä»¶ç‰ˆæœ¬
<div class="org-src-container">

<pre class="src src-ruby">gem <span style="color: #2aa198;">'kaminari'</span>
gem <span style="color: #2aa198;">'nokogiri'</span>
</pre>
</div>
</li>
<li>æˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®ä¸åŒçš„ç‰ˆæœ¬æ¥loadä¸åŒçš„gem
<div class="org-src-container">

<pre class="src src-ruby">group <span style="color: #268bd2; font-weight: bold;">:development</span> <span style="color: #859900; font-weight: bold;">do</span>
  gem <span style="color: #2aa198;">'pry-rails'</span>
<span style="color: #859900; font-weight: bold;">end</span>

group <span style="color: #268bd2; font-weight: bold;">:test</span> <span style="color: #859900; font-weight: bold;">do</span>
  gem <span style="color: #2aa198;">'capybara'</span>
  gem <span style="color: #2aa198;">'database_cleaner'</span>
<span style="color: #859900; font-weight: bold;">end</span>

group <span style="color: #268bd2; font-weight: bold;">:development</span>, <span style="color: #268bd2; font-weight: bold;">:test</span> <span style="color: #859900; font-weight: bold;">do</span>
  gem <span style="color: #2aa198;">'rspec-rails'</span>
  gem <span style="color: #2aa198;">'factory_girl_rails'</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
<li>gemæŒ‡å®šçš„è½¯ä»¶,å¦‚æœä¸å†™ç‰ˆæœ¬çš„è¯,é‚£ä¹ˆæ˜¯é»˜è®¤çš„"æœ€æ–°stableç‰ˆæœ¬". å¦‚æœè¦æŒ‡å®šç‰ˆæœ¬
é‚£ä¹ˆè¦å†™å‡ºæ¥
<div class="org-src-container">

<pre class="src src-ruby">gem <span style="color: #2aa198;">'nokogiri'</span> <span style="color: #2aa198;">'1.5.6'</span>
gem <span style="color: #2aa198;">'pry-rails'</span>, <span style="color: #2aa198;">'&gt; 0.2.2'</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Start from 2.0, no less than 2.0.1</span>
gem <span style="color: #2aa198;">'decent_exposure'</span>, <span style="color: #2aa198;">'~&gt; 2.0.1'</span>
gem <span style="color: #2aa198;">'draper'</span>, <span style="color: #2aa198;">'1.0.0beta6'</span>
</pre>
</div>
</li>
<li>æœ‰çš„æ—¶å€™å¦‚æœrequireæŒ‡å®šçš„åå­—å’Œåº“æœ¬èº«çš„åå­—ä¸åŒçš„è¯,è¦require:ä¸€ä¸‹
<div class="org-src-container">

<pre class="src src-ruby">gem <span style="color: #2aa198;">'webmock'</span>, <span style="color: #268bd2; font-weight: bold;">require</span>: <span style="color: #2aa198;">'webmock/rspec'</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-1-1-1" class="outline-5">
<h5 id="sec-1-1-1-1">Loading Gems Directory From a Git Repository</h5>
<div class="outline-text-5" id="text-1-1-1-1">
<ul class="org-ul">
<li>è¿˜å¯ä»¥é€‰æ‹©ä¸€ä¸ªgitçš„gem
<div class="org-src-container">

<pre class="src src-ruby">gem <span style="color: #2aa198;">'carrierwave'</span>, <span style="color: #268bd2; font-weight: bold;">git</span>: <span style="color: #2aa198;">'git@github.com:jnicklas/carrierwave.git'</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-1-2" class="outline-5">
<h5 id="sec-1-1-1-2">Loading Gems From the Files System</h5>
<div class="outline-text-5" id="text-1-1-1-2">
<ul class="org-ul">
<li>ä»æ–‡ä»¶ç³»ç»Ÿload gem
<div class="org-src-container">

<pre class="src src-ruby">gem <span style="color: #2aa198;">'nokogiri'</span>, <span style="color: #268bd2; font-weight: bold;">path</span>: <span style="color: #2aa198;">'~/code/nokogiri'</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2">Installing Gems</h4>
<div class="outline-text-4" id="text-1-1-2">
<ul class="org-ul">
<li>æ¯å½“ä½ æ›´æ”¹äº†Gemfileçš„æ—¶å€™,æˆ–è€…ä½ å¼•å…¥äº†æ–°çš„dependencyçš„æ—¶å€™,bundle install
æ˜¯å®‰è£…dependencyçš„å¿…è¦æ­¥éª¤
</li>
<li>bundle installä¼šå®‰è£…èƒ½å¤Ÿ"å’Œå¹³å…±å¤„"çš„æœ€æ–°ç‰ˆæœ¬çš„dependency
</li>
<li>ä½ å¯ä»¥ä½¿ç”¨&#x2013;without optionæ¥é€‰æ‹©æ€§å®‰è£…
<div class="org-src-container">

<pre class="src src-sh">$ bundle install --without development test
$ bundle install --without test
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3">Gem Locking</h4>
<div class="outline-text-4" id="text-1-1-3">
<ul class="org-ul">
<li>æ¯å½“ä½ install(æˆ–è€…update)çš„æ—¶å€™, Bundleréƒ½ä¼šæŠŠä½ ä»¬çš„ä¾èµ–å…³ç³»è®¡ç®—ä¸€ä¸‹,ç„¶å
ä¿å­˜åœ¨ä¸€ä¸ªå«åšGemfile.lockçš„æ–‡ä»¶é‡Œé¢.æ‰€ä»¥Gemfile.locké‡Œé¢æ˜¯ç²¾ç¡®çš„ç‰ˆæœ¬ä¿¡æ¯
</li>
<li>ä¸è¦å¿˜è®°Gemfile.lock,æŠŠå®ƒåŠ å…¥åˆ°gitä¿å­˜çš„åˆ—è¡¨é‡Œé¢.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4">Packaging Gems</h4>
<div class="outline-text-4" id="text-1-1-4">
<ul class="org-ul">
<li>ä½ å¯ä»¥ä½¿ç”¨packageå‘½ä»¤æ¥æŠŠæ‰€æœ‰çš„gemå­˜æ”¾åœ¨ä½ çš„rails åº”ç”¨çš„vender/cacheæ–‡ä»¶å¤¹
é‡Œé¢.
</li>
<li>è¿™å¾ˆé‡è¦,å› ä¸ºä½ bundle packageäº†ä»¥å,ä¼šåœ¨vender/cache æ–‡ä»¶å¤¹é‡Œé¢æŠŠä½ 
æ‰€æœ‰çš„æ­£åœ¨ä½¿ç”¨çš„geméƒ½å­˜åœ¨è¿™é‡Œ. ä»¥åä½ åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨çš„æ—¶å€™, åŠ ä¸Š &#x2013;local,å°±ä¸
ä¼šä»rubygems.orgä¸‹è½½äº†! ç¨³å®šçš„å®‰å…¨çš„gemå¾ˆé‡è¦!
<div class="org-src-container">

<pre class="src src-sh">$ bundle package
</pre>
</div>
</li>
<li>åœ¨ä½¿ç”¨"érails"æŒ‡å®šçš„å‘½ä»¤çš„æ—¶å€™,ä¸€å®šè¦åœ¨å‘½ä»¤å‰é¢åŠ "bundle exec",æ¯”å¦‚
<div class="org-src-container">

<pre class="src src-sh">$ bundle exec guard
</pre>
</div>
</li>
<li>è¿™ä¹ˆåšçš„"æ·±å±‚æ¬¡"çš„åŸå› , æ˜¯rubyçš„å¤šç‰ˆæœ¬çš„å­˜åœ¨: è¿è¡Œä¸€æ¬¡bundle exec some:task
ç¡®ä¿ä½ çš„some:task, ä¸€å®šæ˜¯åœ¨ç¡®ä¿å½“å‰çš„bundleç¯å¢ƒOKçš„æƒ…å†µä¸‹(å¦‚æœæœ‰Gemfileçš„è¯,
bundle ä¼šè¿è¡Œ), å†å»è¿è¡Œsome:task
<a href="http://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean">http://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean</a>
</li>
<li>bundle çš„å‚æ•°&#x2013;binstubs ä¼šç”ŸæˆRAILS_ROOT ä¸‹é¢çš„/binæ–‡ä»¶,ç„¶åæŠŠæ‰€æœ‰å¯ç”¨çš„äºŒè¿›åˆ¶
ç¨‹åºåŠ ä¸Šä¸€ä¸ªç¯å¢ƒè®¾ç½®,å†™æˆruby scriptæ–¹è¿›å»#TODO#
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">Startup and Application Settings</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>æ¯å½“æˆ‘ä»¬å¯åŠ¨Railsæ¥å¤„ç†requestçš„æ—¶å€™,æœ€å…ˆå¼€å§‹å‘ç”Ÿçš„äº‹æƒ…å°±æ˜¯config/boot.rbè¢«
åŠ è½½, å…¶å®æ€»å…±æœ‰ä¸‰ä¸ªæ–‡ä»¶è¢«åŠ è½½:
<ul class="org-ul">
<li>boot.rbæ¥è®¾ç½®Bundlerå’Œload path
</li>
<li>application.rbæ¥è¯»å–gem (å¯èƒ½ä¼šæ ¹æ®Rail.envçš„ä¸åŒ,è¯»å–ä¸åŒçš„gem)
</li>
<li>environment.rbè¿è¡Œæ‰€æœ‰çš„initializer
</li>
</ul>
</li>
</ul>
</div>
<div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1">application.rb</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>application.rbé¦–å…ˆä¼šæƒ³åˆ°load boot.rb
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #657b83; font-weight: bold;">require</span> <span style="color: #b58900;">File</span>.expand_path(<span style="color: #2aa198;">'../boot'</span>, <span style="color: #657b83; font-weight: bold;">__FILE__</span>)
</pre>
</div>
</li>
<li>ä¸‹ä¸€è¡Œæ˜¯è¯»å–æ‰€æœ‰çš„module
<div class="org-src-container">

<pre class="src src-ruby">raquire <span style="color: #2aa198;">'rails/all'</span>
</pre>
</div>
</li>
<li>ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ€§require(å½“ç„¶è¦æŠŠrails/allæ³¨é‡Šæ‰)
</li>
<li>configurationçš„ä¸»ä½“,å…¶å®æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„module
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #859900; font-weight: bold;">module</span> <span style="color: #b58900;">Hfeng</span>
  <span style="color: #859900; font-weight: bold;">class</span> <span style="color: #b58900;">Application</span> &lt; <span style="color: #b58900;">Rails</span>::<span style="color: #b58900;">Application</span>
    <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Settings in config/environments/* take precedence over those specified here.</span>
    <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Application configuration should go into files in config/initializers</span>
    <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">-- all .rb files in that directory are automatically loaded.</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-2-1-1" class="outline-5">
<h5 id="sec-1-2-1-1">Load Path Modifications</h5>
<div class="outline-text-5" id="text-1-2-1-1">
<ul class="org-ul">
<li>åé¢çš„æ³¨é‡Šæ˜¯è¯´ä½ å¯ä»¥è‡ªå·±æ·»åŠ ä¸€äº›è‡ªåŠ¨åŠ è½½çš„é¡¹ç›®
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Custom directories with classes and modules you want to be autoloadable.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">config.autoload_paths += %W(#{config.root}/extras)</span>
</pre>
</div>
</li>
<li>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åŠ è½½appæ–‡ä»¶å¤¹ä¸‹é¢çš„presentersæ–‡ä»¶å¤¹,é‚£ä¹ˆå°±å¦‚ä¸‹
<div class="org-src-container">

<pre class="src src-ruby">config.autoload_paths += <span style="color: #2aa198;">%W(</span><span style="color: #268bd2;">#{config.root}</span><span style="color: #2aa198;">/app/presenters)</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-1-2" class="outline-5">
<h5 id="sec-1-2-1-2">Time Zones</h5>
<div class="outline-text-5" id="text-1-2-1-2">
<ul class="org-ul">
<li>é»˜è®¤å¸‚åŒºæ˜¯UTC,ä½ å½“ç„¶å¯ä»¥æ›´æ”¹
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">config.time_zone = 'Central Time (US &amp; Canada)'</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-1-3" class="outline-5">
<h5 id="sec-1-2-1-3">Localization</h5>
<div class="outline-text-5" id="text-1-2-1-3">
<ul class="org-ul">
<li>é»˜è®¤çš„localeæ˜¯:en,å½“ç„¶ä½ ä¹Ÿå¯ä»¥è¦†ç›–
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">config.i18n.default_locale = :de</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-1-4" class="outline-5">
<h5 id="sec-1-2-1-4">Generator Default Settings</h5>
<div class="outline-text-5" id="text-1-2-1-4">
<ul class="org-ul">
<li>TODO
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2">Initializers</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>ä»Rails 2å¼€å§‹,å¼•å…¥äº†ä¸€ä¸ªæŠŠåˆå§‹åŒ–æ–‡ä»¶æ”¾å…¥ä¸åŒçš„ruby file,ç„¶åæ”¾ç½®åˆ°config/initializers
é‡Œé¢çš„åšæ³•.ä½ ä¹Ÿå¯ä»¥æŠŠè‡ªå·±çš„è‡ªåŠ¨åˆå§‹åŒ–ä»£ç ,æ”¾å…¥confi/initializersé‡Œé¢
</li>
</ul>
</div>
<div id="outline-container-sec-1-2-2-1" class="outline-5">
<h5 id="sec-1-2-2-1">Backtrace Silencers</h5>
<div class="outline-text-5" id="text-1-2-2-1">
<ul class="org-ul">
<li>exceptionä¼šå’Œå¾ˆå¤šbacktraceä»£ç ä¸€å—æŠ›å‡º, ä½ å¯ä»¥ä½¿ç”¨ä¸€äº›è®¾ç½®è®©ä»–ä»¬å˜çš„çŸ­ä¸€ç‚¹
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #b58900;">Rails</span>.backtrace_cleaner.add_silencer {|line| line =~ <span style="color: #2aa198;">/my_noisy_library/</span>}
</pre>
</div>
</li>
<li>ä½ ç”šè‡³å¯ä»¥è®©ä»–ä»¬å®Œå…¨æ¶ˆå¤±
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #b58900;">Rails</span>.backtrace_cleaner.remove_silencers!
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-2-2" class="outline-5">
<h5 id="sec-1-2-2-2">Filter Parameter Logging</h5>
<div class="outline-text-5" id="text-1-2-2-2">
<ul class="org-ul">
<li>Railsé»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨logé‡Œé¢è®°å½•requestè¯¦ç»†çš„ä¿¡æ¯,ä¸ºäº†å®‰å…¨èµ·è§(é»‘å®¢å¯èƒ½ä¼šä»
requestä¿¡æ¯é‡Œé¢åˆ†æå‡ºå¯†ç ), æˆ‘ä»¬è¦æŠŠæ•æ„Ÿä¿¡æ¯è¿‡æ»¤
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Configure sensitive parameters which will be filtered from the log file</span>
<span style="color: #b58900;">Rails</span>.application.config.filter_parameters += [<span style="color: #268bd2; font-weight: bold;">:password</span>]
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-2-3" class="outline-5">
<h5 id="sec-1-2-2-3">Inflections</h5>
<div class="outline-text-5" id="text-1-2-2-3">
<ul class="org-ul">
<li>railsé‡Œé¢æœ‰Inflectionç”¨æ¥"è‡ªåŠ¨å‘½å": æˆ‘ä»¬åªéœ€è¦è¾“å…¥ä¸€ä¸ª"å•æ•°å½¢å¼"çš„åå­—,
å®ƒè´Ÿè´£å¸®æˆ‘ä»¬è½¬æ¢æˆ"å¤æ•°". è´Ÿè´£å¸®æˆ‘ä»¬æŠŠclass nameè½¬åŒ–æˆtable name.ç­‰
</li>
<li>ç‰›é€¼çš„æ˜¯,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨rails consoleæ¥çœ‹çœ‹è½¬æ¢çš„ç»“æœæ˜¯ä»€ä¹ˆ
<div class="org-src-container">

<pre class="src src-sh">bash-3.2$ rails console
Loading development environment (Rails 3.0.20)
<span style="color: #268bd2;">irb</span>(main):001:0&gt; ActiveSupport::Inflector.pluralize <span style="color: #2aa198;">"project"</span>
=&gt; <span style="color: #2aa198;">"projects"</span>
<span style="color: #268bd2;">irb</span>(main):002:0&gt; ActiveSupport::Inflector.pluralize <span style="color: #2aa198;">"virus"</span>
=&gt; <span style="color: #2aa198;">"viri"</span>
<span style="color: #268bd2;">irb</span>(main):003:0&gt; <span style="color: #2aa198;">"pensum"</span>.pluralize
=&gt; <span style="color: #2aa198;">"pensums"</span>
</pre>
</div>
</li>
<li>å¾ˆæ˜æ˜¾çš„,railsä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„(å…³é”®ä¸æ˜¯è¯å…¸), æ‰€ä»¥è¿™é‡Œpensumçš„å¤æ•°å®ƒå†™é”™äº†,å› 
ä¸ºpensumçš„å¤æ•°å…¶å®æ˜¯pensa.æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ª"çŸ¥è¯†"æ’å…¥è¿›å»
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">en means English</span>
<span style="color: #b58900;">ActiveSupport</span>::<span style="color: #b58900;">Inflector</span>.inflections(<span style="color: #268bd2; font-weight: bold;">:en</span>) <span style="color: #859900; font-weight: bold;">do</span> |inflect|
  inflect.plural /^(ox)<span style="color: #657b83; font-weight: bold;">$/</span>i, <span style="color: #2aa198;">'\1en'</span>
  inflect.singular /^(ox)en/i, <span style="color: #2aa198;">'\1'</span>
  inflect.irregular <span style="color: #2aa198;">'person'</span>, <span style="color: #2aa198;">'people'</span>
  inflect.uncountable <span style="color: #2aa198;">%w( fish sheep)</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-2-4" class="outline-5">
<h5 id="sec-1-2-2-4">Custom MIME Types</h5>
<div class="outline-text-5" id="text-1-2-2-4">
<ul class="org-ul">
<li>railsè‡ªå·±ä¸ºæ¯ä¸ªMIMEå‡†å¤‡äº†ä¸€ä¸ªsymbol(rubyçš„æšä¸¾)
<table border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">application/json</td>
<td class="left">:json</td>
</tr>

<tr>
<td class="left">application/xml</td>
<td class="left">:xml</td>
</tr>
</tbody>
</table>
</li>
<li>ä½ ä¹Ÿå¯ä»¥è‡ªå·±æ·»åŠ è‡ªå·±çš„ç±»å‹åˆ°mime_types.rb
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-2-5" class="outline-5">
<h5 id="sec-1-2-2-5">Secret Token</h5>
<div class="outline-text-5" id="text-1-2-2-5">
<ul class="org-ul">
<li>æœ‰ä¸€ç§é»‘å®¢æ¬ºéª—serverçš„æ–¹å¼,å°±æ˜¯æ›´æ”¹cookieçš„å†…å®¹å¹¶ä¸”ä¸é€šçŸ¥server. serverä¸º
äº†ä¿è¯è‡ªå·±çš„cookieä¸è¢«ä¿®æ”¹,ä¼šæŠŠæ‰€æœ‰å‘ç»™clientçš„cookiedè¿›è¡Œæ•°å­—ç­¾å.secret_token.rb
åŒ…å«äº†secret key base
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #b58900;">Example</span>::<span style="color: #b58900;">Application</span>.config.secret_key_base=<span style="color: #2aa198;">'f32b1a3755e05a3d...'</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-2-6" class="outline-5">
<h5 id="sec-1-2-2-6">Session Store</h5>
<div class="outline-text-5" id="text-1-2-2-6">
<ul class="org-ul">
<li>rails4å¼€å§‹,sessionä¹Ÿæ˜¯è¢«encryptedçš„
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-2-7" class="outline-5">
<h5 id="sec-1-2-2-7">Wrap Parameters</h5>
<div class="outline-text-5" id="text-1-2-2-7">
<ul class="org-ul">
<li>ä»Rails 3.1å¼€å§‹,å¼•å…¥äº†wrap_parameters.rbæ¥é…åˆJavaScript MVC frameworkçš„å·¥ä½œ.
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Enable parameter wrapping for JSON. You can disable thsi by setting</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">:format to an empty array.Now it only support json</span>
<span style="color: #b58900;">ActiveSupport</span>.on_load(<span style="color: #268bd2; font-weight: bold;">:action_controller</span>) <span style="color: #859900; font-weight: bold;">do</span>
  wrap_parameters <span style="color: #268bd2; font-weight: bold;">format</span>: [<span style="color: #268bd2; font-weight: bold;">:json</span>] <span style="color: #859900; font-weight: bold;">if</span> respond_to?(<span style="color: #268bd2; font-weight: bold;">:wrap_parameters</span>)
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
<li>ç„¶åå½“ä½ ä¼ é€’ä¸€ä¸ªparameterç»™controllerçš„æ—¶å€™, ä½ çš„JSONæ•°æ®æ˜¯è¿™æ ·çš„
<div class="org-src-container">

<pre class="src src-ruby">{<span style="color: #2aa198;">"title"</span>: <span style="color: #2aa198;">"The Rails 4 Way"</span>}
</pre>
</div>
</li>
<li>ç„¶åè¿™ä¸ªæ˜¯ä¸€ä¸ªhashä¸é”™, railsè¿˜ä¼šåŒ…è£…ä¸€ä¸‹ä½ çš„hash:
<ul class="org-ul">
<li>åœ¨ä½ çš„hashåé¢åŠ ä¸€ä¸ªæ–°çš„æˆå‘˜
</li>
<li>æ–°çš„æˆå‘˜çš„keyæ˜¯parameterçš„åå­—. å€¼æ˜¯å‰é¢çš„json.äºæ˜¯å°±æ˜¯è¿™æ ·
<div class="org-src-container">

<pre class="src src-ruby">{<span style="color: #2aa198;">"title"</span>: <span style="color: #2aa198;">"The Rails 4 Way"</span>, <span style="color: #2aa198;">"article"</span> =&gt; {<span style="color: #2aa198;">"title"</span>: <span style="color: #2aa198;">"The Rails 4 Way"</span>}}
</pre>
</div>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3">Additional Configuration</h4>
<div class="outline-text-4" id="text-1-2-3">
<ul class="org-ul">
<li>é™¤äº†ä¸Šé¢æ‰€è¿°,ä½ è¿˜å¯ä»¥ä½¿ç”¨é¢å¤–çš„è®¾ç½®
</li>
</ul>
</div>
<div id="outline-container-sec-1-2-3-1" class="outline-5">
<h5 id="sec-1-2-3-1">Log-Level Override</h5>
<div class="outline-text-5" id="text-1-2-3-1">
<ul class="org-ul">
<li>é»˜è®¤çš„log çº§åˆ«æ˜¯debug, ä½ ä¹Ÿå¯ä»¥overrideå®ƒ.
<div class="org-src-container">

<pre class="src src-ruby">config.log_level = <span style="color: #268bd2; font-weight: bold;">:debug</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-3-2" class="outline-5">
<h5 id="sec-1-2-3-2">Schema Dumper</h5>
<div class="outline-text-5" id="text-1-2-3-2">
<ul class="org-ul">
<li>æ¯æ¬¡ä½ åšæµ‹è¯•çš„æ—¶å€™, Railséƒ½ä¼šæŠŠä½ developmentçš„æ•°æ®åº“æ‹·è´åˆ°test database(
ä½¿ç”¨ä¸€ä¸ªè‡ªåŠ¨äº§ç”Ÿçš„schema.rb, éå¸¸åƒActive Recordç”Ÿæˆçš„migration script)å¦‚
æœä½ ä»¬å¤Ÿé«˜çº§çš„è¯,å¯èƒ½ä¼šæƒ³ä½¿ç”¨è‡ªå·±çš„sqlæ¥å®ç°è¿™äº›.è¿™ä¸ªæ—¶å€™,å¯ä»¥å¦‚ä¸‹è®¾ç½®
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Use SQL instead of Active Record's schema dumper when creating the</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">test database. This is necessary if your schema can't be completely</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dumped by the schema dumper, for example, if you have constraints</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">or db-specific column types</span>
config.active_record.schema_format = <span style="color: #268bd2; font-weight: bold;">:sql</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Development Mode</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>Developmentæ˜¯å¼€å‘äººå‘˜ä¸€ç›´è¦ä½¿ç”¨çš„mode.è¿™é‡Œæˆ‘ä»¬æ¥æ·±å…¥çš„è§£é‡Šä¸€ä¸‹è¿™ä¸ªmode,å…¶ä¸»
è¦é…ç½®æ–‡ä»¶éƒ½å†™åœ¨config/environments/development.rb
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">File: config/environments/development.rb</span>
<span style="color: #b58900;">Example</span>::<span style="color: #b58900;">Application</span>.configure <span style="color: #859900; font-weight: bold;">do</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Settings specified here will take precedence over those in</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">config/application.rb</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1">Automatic Class Reloading</h4>
<div class="outline-text-4" id="text-1-3-1">
<ul class="org-ul">
<li>Development modeçš„æœ€å¤§ç‰¹ç‚¹æ˜¯,ä»£ç çš„æ”¹åŠ¨é©¬ä¸Šèƒ½å¤Ÿåæ˜ åˆ°ç½‘ç«™ä¸Šé¢.èƒ½å¤Ÿå¼€å…³è¿™ä¸ª
é‡è¦ç‰¹æ€§çš„å˜é‡æ˜¯config.cache_classes
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the development environement your application's code is reloaded on</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">every request. This slows down response time but is perfect for</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">development since you don't have to restart the web server when you</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">make code changes</span>

config.cache_classes = <span style="color: #268bd2;">false</span>
</pre>
</div>
</li>
<li>å…¶é­”æ³•æ€§åœ¨äº:
<ul class="org-ul">
<li>å¦‚æœä½ ä½¿ç”¨åƒé»˜è®¤çš„æƒ…å†µä¸‹ä¸€æ ·è®¾ç½®config.cache_classsesä¸ºfalse.é‚£ä¹ˆå°±ä½¿ç”¨
loadæ¥å€’å…¥ä»£ç ,å…¶ç‰¹ç‚¹æ˜¯æ¯æ¬¡éƒ½å¯¼å…¥,æ— è®ºå†…å­˜é‡Œé¢æ˜¯å¦å·²ç»æœ‰äº†.è¿™æ ·è™½ç„¶å¯¼å…¥æ…¢,
ä½†æ˜¯èƒ½å¤Ÿå®æ—¶åæ˜ ä»£ç æ”¹åŠ¨.
</li>
<li>å¦‚æœè®¾ç½®ä¸ºtrue,é‚£ä¹ˆå°±ä½¿ç”¨requireæ¥å¯¼å…¥ä»£ç äº†,å°±ä¼šä½¿ç”¨å†…å­˜ä¸­å·²æœ‰ä»£ç ,ä¸ä¼š
é‡å¤å¯¼å…¥.
</li>
</ul>
</li>
</ul>
</div>
<div id="outline-container-sec-1-3-1-1" class="outline-5">
<h5 id="sec-1-3-1-1">The Rails Class Loader</h5>
<div class="outline-text-5" id="text-1-3-1-1">
<ul class="org-ul">
<li>rubyä¸åƒjava,è¦æ±‚fileçš„åå­—å’Œå…¶ä¸­classçš„åå­—ç›¸åŒç”šè‡³ç›¸ä¼¼. ä½†æ˜¯åœ¨Railsé‡Œé¢
fileå’Œå…¶ä¸­classçš„åå­—æ˜¯æœ‰è”ç³»çš„.
</li>
<li>Railsè¿™ä¹ˆåšçš„ç†è®ºåŸºç¡€,æ˜¯rubyçš„callbackæœºåˆ¶
<pre class="example">
å½“Railsé‡åˆ°ä¸€ä¸ªæ²¡æœ‰å®šä¹‰çš„constantçš„æ—¶å€™, å®ƒä¼šåŸºäºfile-namingè§„åˆ™æ¥è°ƒç”¨åœ¨
load pathé‡Œé¢çš„ç›¸åº”çš„Ruby Script
</pre>
</li>
<li>ä»ä¸Šé¢çš„å®šä¹‰æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°railsä¹Ÿæœ‰è‡ªå·±çš„load pathçš„.load pathå¯ä»¥å†initializer.rb
é‡Œé¢å®šä¹‰,ç„¶åä½¿ç”¨$LOAD_PATHæŸ¥çœ‹
<div class="org-src-container">

<pre class="src src-sh">bash-3.2$ rails console
Loading development environment (Rails 3.0.20)
<span style="color: #268bd2;">irb</span>(main):001:0&gt; $<span style="color: #268bd2;">LOAD_PATH</span>
=&gt; [<span style="color: #2aa198;">"/usr/local/var/rbenv/versions/1.9.3-p484/lib/ruby/gems/1.9.1/gems/gdata_19-1.1.5/lib"</span>, ....
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-1-2" class="outline-5">
<h5 id="sec-1-3-1-2">Rails, Modules, and Auto-Loading Code</h5>
<div class="outline-text-5" id="text-1-3-1-2">
<ul class="org-ul">
<li>ä¸€èˆ¬æ¥è¯´,åœ¨Rubyä»£ç é‡Œé¢,ä½ è¦æƒ³ä½¿ç”¨å…¶ä»–fileé‡Œé¢çš„rubyä»£ç ,ä¸€å¥"require"æ˜¯
æœ€èµ·ç çš„è¦æ±‚. Railsæ”¹å˜äº†è¿™ä¸ªæƒ…å†µ,Railså¯ä»¥è‡ªåŠ¨è°ƒç”¨,ä½ ä»ä¸ç”¨require!
</li>
<li>Railsèƒ½åšåˆ°è¿™ä¸ª,å…¶å®ä¹Ÿä¸æ˜¯æ— å¤´æ— è„‘çš„å…¨éƒ¨require, å…¶åŸç†è¿˜åŸºäºnaming convention:
<ul class="org-ul">
<li>å¦‚æœåå­—æ²¡æœ‰nested,é‚£ä¹ˆå°±æŠŠClassåå­—çš„é©¼å³°å˜æˆå°å†™,ç„¶åé©¼å³°ä¹‹é—´åŠ å…¥ä¸‹åˆ’
çº¿
<pre class="example">
EstimationCalculator ==&gt; estimation_calculator
KittTurboBoost ==&gt; kitt_turbo_boost
</pre>
</li>
<li>å¦‚æœæœ‰nested,é™¤äº†ä¸Šé¢çš„è§„å®šå¤–,å†æŠŠå‰é¢çš„"å¤§ç¯å¢ƒ"åŠ ä¸Š
<pre class="example">
MacGyver::SwissArmKnife ==&gt; mac_gyver/swiss_army_knife
</pre>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2">Eager Load</h4>
<div class="outline-text-4" id="text-1-3-2">
<ul class="org-ul">
<li>é»˜è®¤æƒ…å†µä¸‹,railsä¸ä¼šæŠŠæ‰€æœ‰å†…å®¹æ”¾å…¥å†…å­˜(é‚£ä¼šæå¤§æé«˜å¼€å¯ç½‘ç«™çš„é€Ÿåº¦). ä½†æ˜¯åœ¨
development modeä¸‹ä½ å¯ä»¥è®¾ç½®ä¸ºæ”¾å…¥å†…å­˜(åæ­£ä½ ä¹Ÿä¸å¸¸å¼€). æ”¾å…¥å†…å­˜ä¼šæé«˜é€Ÿåº¦
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Do not eager lod code on boot</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">You can set it to true in development mode</span>
config.eager_load = <span style="color: #268bd2;">false</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3">Error Reports</h4>
<div class="outline-text-4" id="text-1-3-3">
<ul class="org-ul">
<li>ä»localå‘å‡ºçš„requestä¼šå¾—åˆ°æ›´å¥½çš„å‡ºé”™ä¿¡æ¯.æ‰€ä»¥ä½ å¯ä»¥è®¾ç½®ä¸‹é¢çš„configä¸ºtrue.
æ¥æŠŠélocalçš„requestç†è§£æˆlocalçš„
<div class="org-src-container">

<pre class="src src-ruby">config.consider_all_requests_local = <span style="color: #268bd2;">true</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-4" class="outline-4">
<h4 id="sec-1-3-4">Caching</h4>
<div class="outline-text-4" id="text-1-3-4">
<ul class="org-ul">
<li>development modeä¸‹ä¸è¦è®¾ç½®cache. å³ä¾¿ä¸ºäº†æµ‹è¯•è®¾ç½®ä¸€æ¬¡,ä¹Ÿè¦é©¬ä¸Šæ”¹å›æ¥!cache
æ˜¯å¥‡æ€ªé”™è¯¯çš„å‘æºåœ°
<div class="org-src-container">

<pre class="src src-ruby">config.action_controller.perform_caching = <span style="color: #268bd2;">true</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-5" class="outline-4">
<h4 id="sec-1-3-5">Raise Delivery Errors</h4>
<div class="outline-text-4" id="text-1-3-5">
<ul class="org-ul">
<li>åœ¨development modeä¸‹é¢é»˜è®¤railsä¸ä¼šè®¾ç½®Aciton Maileræ¥ä¸ºç”¨æˆ·å‘é€é‚®ä»¶.å¯ä»¥
é€šè¿‡å¦‚ä¸‹è®¾ç½®æ¥å±è”½mailçš„é”™è¯¯
<div class="org-src-container">

<pre class="src src-ruby">config.action_mailer.raise_delivery_errors = <span style="color: #268bd2;">false</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-6" class="outline-4">
<h4 id="sec-1-3-6">Deprecation Notices</h4>
<div class="outline-text-4" id="text-1-3-6">
<ul class="org-ul">
<li>Deprecation warningséå¸¸é‡è¦,éœ€è¦åŠ å…¥åˆ°logé‡Œé¢:é€šè¿‡å¦‚ä¸‹è®¾ç½®
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Print deprecation notices to the Rails logger</span>
config.active_support.deprecation = <span style="color: #268bd2; font-weight: bold;">:log</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-7" class="outline-4">
<h4 id="sec-1-3-7">Explain for Slow Queries</h4>
<div class="outline-text-4" id="text-1-3-7">
<ul class="org-ul">
<li>ä»Rails 3.2å¼€å§‹, Active Recordä¼šä¸ºSQLæŸ¥è¯¢è®¾ç½®ä¸€ä¸ª"é˜ˆå€¼". è¶…è¿‡è¿™ä¸ªé˜ˆå€¼çš„æŸ¥è¯¢
éƒ½ä¼šè¢«log. è®¾ç½®"é˜ˆå€¼"çš„ä»£ç ä¸º
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Log the query plan for queries taking more than this</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">(works with SQLite, MySQL, and PostgreSQL)</span>
config.active_record.auto_explain_threshold_in_seconds = 0.5
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-8" class="outline-4">
<h4 id="sec-1-3-8">Assets Debug Mode</h4>
<div class="outline-text-4" id="text-1-3-8">
<ul class="org-ul">
<li>Developmentæ¨¡å¼ä¸‹é¢, ä¼šé˜»æ­¢ä¸€äº›javascriptçš„è®¾ç½®
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Debug mode disables concatenation and preprocessing of assets</span>
config.assets.debug = <span style="color: #268bd2;">true</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">Test Mode</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>å¦‚æœRAILS_ENVè¢«è®¾ç½®ä¸ºtestçš„è¯,é‚£ä¹ˆä¹…è¯´æ˜ä½ è¿›å…¥äº†test mode. å…¶è®¾ç½®ä¸º
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">File: config/environments/test.rb</span>

<span style="color: #b58900;">Example</span>::<span style="color: #b58900;">Application</span>.configure <span style="color: #859900; font-weight: bold;">do</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Settings specified here will take precedence over those in</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">config/application.rb</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">The test environment is used exclusively to run your application's</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">test suite. You never need to work with it otherwise. Rember that</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">your test databse is "scratch space" for the test suite and is wiped</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">and recreated between test runs. Don't rely on the data there!</span>
  config.cache_classes = <span style="color: #268bd2;">true</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Do not eager load code on boot. This avoids loading your whole</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">application just for the purpose of running a single test. If you are</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">using a tool that preloads Rails for running tests, you may have to</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">set it to true</span>
  config.eager_load = <span style="color: #268bd2;">false</span>
</pre>
</div>
</li>
<li>åœ¨production modeä¸‹å‘ç”Ÿé—®é¢˜çš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªcustom çš„ mode(éœ€è¦åœ¨
config/environmentsé‡Œé¢å†™ä¸€ä¸ªrbæ–‡ä»¶).
<ul class="org-ul">
<li>æ‰€æœ‰çš„configå’Œdevelopment modeéƒ½ç±»ä¼¼(æ¯”å¦‚å¯ä»¥ä¸é‡å¯serverè€Œè¯»å–è®¾ç½®).
</li>
<li>å•å•æ•°æ®ä½¿ç”¨production modeçš„è®¾ç½®.æ•°æ®åº“å°±å¯ä»¥è¿æ¥production modeçš„æ•°æ®åº“
è¿™æ ·å°±å¯ä»¥å®šä½çº¿ä¸Šé—®é¢˜.
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">Production Mode</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>production modeæ˜¯ä½ çš„åº”ç”¨çœŸæ­£ä½¿ç”¨çš„mode, å…¶æœ€è¿½æ±‚çš„è‚¯å®šæ˜¯é€Ÿåº¦. ä¸ä¼šä¸ºäº†ä¸€ä¸ª
requestè€Œè¯»å–æ‰€æœ‰çš„application class
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">File: config/environments/production.rb</span>
<span style="color: #b58900;">Example</span>::<span style="color: #b58900;">Application</span>.configure <span style="color: #859900; font-weight: bold;">do</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Settings specified here will take precedence over those in</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">config/application.rb</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Code is not reloaded between requests</span>
  config.cache_classes = <span style="color: #268bd2;">true</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Eager load code on boot. This eager loads most of Rails</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">and your application in memory, allowing both thread web servers</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">and those relying on copy on write to perform better</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Rake tasks automatically ignore this option for performance</span>
  config.eager_load = <span style="color: #268bd2;">true</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Full error reports are disabled and caching is turned on</span>
  config.consider_all_requests_local        = <span style="color: #268bd2;">false</span>
  config.action_controller.perform_caching  = <span style="color: #268bd2;">true</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Enable Rake::Cache to put a simple HTTP cache in front of your</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">application</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Add 'rake-cache' to your Gemfile before enabling this</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">For large-scale production use, consider using a caching reverse proxy</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">like nginx, varnish or squid</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">config.action_dispatch.rack_cache = true</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Disable rails's static assert server</span>
  config.serve_static_assets = <span style="color: #268bd2;">false</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Compress JavaScripts and CSS</span>
  config.assets.js_compressor = <span style="color: #268bd2; font-weight: bold;">:uglifier</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">...</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1">Assets</h4>
<div class="outline-text-4" id="text-1-5-1">
<ul class="org-ul">
<li>css å’Œ javascriptç»Ÿç§°ä¸ºasset
</li>
<li>åœ¨production modeä¸‹é¢, assetséƒ½æ˜¯è¢«æå‰å‹ç¼©å¥½çš„.æ”¾å…¥åˆ°public/assetsé‡Œé¢,
åå­—ä¿æŒä¸å˜è®¾ç½®config.assets.compileä¸ºassetçš„ç¼–è¯‘è®¾ç½®
</li>
<li>å¤„ç†application.jså’Œapplication.cssä»¥å¤–å¦‚æœè¿˜æƒ³åŠ å…¶ä»–assetçš„è¯,é‚£ä¹ˆè¦å¦‚ä¸‹
<div class="org-src-container">

<pre class="src src-ruby">config.assets.precompile += <span style="color: #2aa198;">%w( administration.css)</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2">Asset Hosts</h4>
<div class="outline-text-4" id="text-1-5-2">
<ul class="org-ul">
<li>ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬éƒ½æŠŠassetæ–‡ä»¶æ”¾å…¥publicæ–‡ä»¶å¤¹,ä½ ä¹Ÿå¯ä»¥å¦å¤–æŒ‡å®šåœ°æ–¹
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6">Logging</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>å¤§éƒ¨åˆ†çš„Railsæˆå‘˜(MVCä¸‰å‰‘å®¢model, controller, view)éƒ½æœ‰logger attribute. è¿™
ä¸ªattributeæ˜¯ä¸€ä¸ªref,æŒ‡å‘ä¸€ä¸ªLogger class
</li>
<li>Rails.logger å‡½æ•°ä¼šäº§ç”Ÿä¸€ä¸ªé»˜è®¤çš„logger,è¯·éšä¾¿ä½¿ç”¨å§.
</li>
</ul>
</div>
<div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1">Rails Log Files</h4>
<div class="outline-text-4" id="text-1-6-1">
<ul class="org-ul">
<li>logæ–‡ä»¶å¯èƒ½ä¼šå¢é•¿ç‰¹åˆ«å¿«, rakeä¸“é—¨æœ‰ä¸ªå‘½ä»¤æ¥æ¸…ç†
<div class="org-src-container">

<pre class="src src-sh">rake log:clear                  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Truncates all *.log files in log/ to zero bytes</span>
</pre>
</div>
</li>
<li>development modeä¸‹çš„logéå¸¸æœ‰ä»·å€¼,å…¶ä¼šè¯¦ç»†åˆ—ä¸¾HTTP requestå’Œresponseçš„å†…å®¹
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-6-2" class="outline-4">
<h4 id="sec-1-6-2">Tagged Logging</h4>
<div class="outline-text-4" id="text-1-6-2">
<ul class="org-ul">
<li>æˆ‘ä»¬å¯ä»¥ç»™logåŠ ä¸Šç±»ä¼¼"æ ‡ç­¾"çš„åŠŸèƒ½.
<div class="org-src-container">

<pre class="src src-ruby">config.log_tags = [<span style="color: #268bd2; font-weight: bold;">:subdomain</span>]
</pre>
</div>
</li>
<li>ç„¶ålogå°±æ˜¯è¿™æ ·çš„äº†
<pre class="example">
[admin]StartedGET"/articles"for127.0.0.1at2013-02-0111:49:09-0500
</pre>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-6-3" class="outline-4">
<h4 id="sec-1-6-3">Log File Analysis</h4>
<div class="outline-text-4" id="text-1-6-3">
<ul class="org-ul">
<li>logé‡Œé¢å¼•å…¥äº†æ—¶é—´,æ˜¯ä¸ºäº†åšperformanceçš„è°ƒæŸ¥,ä½†æ˜¯è¿™ä¸ªæ—¶é—´å¹¶ä¸ä¸€å®šå‡†ç¡®
</li>
<li>Active Recordç”Ÿæˆçš„SQLä¹Ÿæœ‰å¯èƒ½ä¸å¯¹,logé‡Œé¢æœ‰
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Chapter 02: Routing</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>Routingåœ¨railsé‡Œé¢çš„ä½œç”¨ï¼Œå°±æ˜¯åˆ¤æ–­æ¥è¢­çš„URLæ˜¯ä»€ä¹ˆæ„æ€ï¼Œç„¶åå†³å®šé‡‡å–ä»€ä¹ˆè¡ŒåŠ¨
</li>
<li>routingçš„ä¸»è¦é…ç½®æ–‡ä»¶åœ¨config/routes.rb
</li>
</ul>
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">The Two Purposes of Routing</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>routingæœ‰ä¸¤ä¸ªä½œç”¨ï¼š
<ul class="org-ul">
<li>æŠŠURL è½¬ç»™ç›¸åº”çš„controller methodã€‚
</li>
<li>ç»´æŠ¤åŠ¨æ€ç”ŸæˆURLçš„å‡½æ•°ï¼Œæ¯”å¦‚link_to, redirect_to
</li>
</ul>
</li>
<li>routingå…¶å®æ˜¯æŠŠurlå’Œactionæ˜ å°„æˆkey/valueå½¢å¼çš„è¡Œä¸º
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">'recipes/:ingredient'</span> =&gt; <span style="color: #2aa198;">"recipes#index"</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">The routes.rb File</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>config/routes.rbæ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºå‡ºæ¥çš„.å…¶é»˜è®¤å†…å®¹ä¸º
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #b58900;">Example</span>::<span style="color: #b58900;">Application</span>.routes.draw <span style="color: #859900; font-weight: bold;">do</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">The priority is based upon order of creation: first created -&gt; highest</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">priority</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">See how all your routes lay out with "rake routes"</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">You can have the root of your site routed with "root"</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">root to: 'welcome#index'</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Example of regular route:</span>
  <span style="color: #93a1a1;">#  </span><span style="color: #93a1a1;">get 'products/:id' =&gt; 'catalog#view'</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Example of named route that can be invoked with</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">purchase_URL(id: procutd.id)</span>
  <span style="color: #93a1a1;">#  </span><span style="color: #93a1a1;">get 'products/:id/purchase' =&gt; 'catalog#purchase', as: :purchase</span>

  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Example resource route(maps HTTP verbs&#22836;controller actions)</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">...</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
<li>æ•´ä¸ªæ–‡ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨:
<ul class="org-ul">
<li>å‡½æ•°åæ˜¯:Example::Application.routes.draw
</li>
<li>å‡½æ•°å‚æ•°æ˜¯ä¸€ä¸ªblock ä»doå¼€å§‹.endç»“æŸ
</li>
</ul>
</li>
<li>railsç³»ç»Ÿåœ¨é‡åˆ°URLçš„æ—¶å€™,å°±æ˜¯æ¥è¿™ä¸ªæ–‡ä»¶ä»å¤´åˆ°å°¾æ‰¾"match", æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„,å‰©
ä¸‹çš„å°±ä¸ä¼šå†ç»§ç»­æ‰¾äº†.
</li>
</ul>
</div>
<div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1">Regular Routes</h4>
<div class="outline-text-4" id="text-2-2-1">
<ul class="org-ul">
<li>æœ€å¸¸è§çš„è®¾ç½®routeå•ä½çš„æ–¹æ³•å¦‚ä¸‹
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">'products/:id'</span>, <span style="color: #268bd2; font-weight: bold;">to</span>: <span style="color: #2aa198;">'products#show'</span>
</pre>
</div>
</li>
<li>ç”±äºç”¨æ³•å¤ªå¸¸è§, :toè¢«çœç•¥æˆäº†=&gt;
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">'products/:id'</span> =&gt; <span style="color: #2aa198;">'products#show'</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2">Constraining Request Methods</h4>
<div class="outline-text-4" id="text-2-2-2">
<ul class="org-ul">
<li>ä¼ ç»Ÿrailså¯ä»¥ä½¿ç”¨match,ç„¶åå†æœ€åé€šè¿‡viaæ¥ç¡®å®šURLä½¿ç”¨å“ªäº›HTTP method
<div class="org-src-container">

<pre class="src src-ruby">match <span style="color: #2aa198;">'products/:id'</span> =&gt; <span style="color: #2aa198;">'products#show'</span>, <span style="color: #268bd2; font-weight: bold;">via</span>: <span style="color: #268bd2; font-weight: bold;">:get</span>
</pre>
</div>
</li>
<li>æ—¶è¿‡å¢ƒè¿,ç°åœ¨æœ€é€‚åˆçš„æ–¹å¼æ˜¯ä¸€ä¸ªURLæœ€å¥½åªæœ‰ä¸€ä¸ªHTTP method
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">'products/:id'</span> =&gt; <span style="color: #2aa198;">'products#show'</span>
post <span style="color: #2aa198;">'products'</span> =&gt; <span style="color: #2aa198;">'products#create'</span>
</pre>
</div>
</li>
<li>å®åœ¨éœ€è¦ä¸€ä¸ªurlæ”¯æŒå¤šä¸ªHTTPåè®®ä¹Ÿå¯ä»¥
<div class="org-src-container">

<pre class="src src-ruby">match <span style="color: #2aa198;">'products/:id'</span> =&gt; <span style="color: #2aa198;">'products#show'</span>, <span style="color: #268bd2; font-weight: bold;">via</span>: [<span style="color: #268bd2; font-weight: bold;">:get</span>, <span style="color: #268bd2; font-weight: bold;">:post</span>]
</pre>
</div>
</li>
<li>è¿˜å¯ä»¥æŠŠæ‰€æœ‰httpåè®®éƒ½æ”¯æŒ(ä¸è¿‡ä¸æ¨è)
<div class="org-src-container">

<pre class="src src-ruby">match <span style="color: #2aa198;">'products'</span> =&gt; <span style="color: #2aa198;">'products#index'</span>, <span style="color: #268bd2; font-weight: bold;">via</span>: <span style="color: #268bd2; font-weight: bold;">:any</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-3" class="outline-4">
<h4 id="sec-2-2-3">URL Patterns</h4>
<div class="outline-text-4" id="text-2-2-3">
<ul class="org-ul">
<li>URLä¼šå¯¼è‡´paramsçš„ä¸åŒ,ä½†æ˜¯æˆ‘ä»¬åœ¨URLé‡Œé¢ä¹Ÿå¯ä»¥åªåˆ¶å®šä¸€éƒ¨åˆ†,æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­
æˆ‘ä»¬åªæŒ‡å®šid, å‡¡æ˜¯åªæœ‰idçš„æƒ…å†µæˆ‘ä»¬"é»˜è®¤"ä½¿ç”¨product controller(è¿™æ ·åšå…¶å®
æ˜¯ä¸æ€ä¹ˆå¥½çš„): <a href="http://localhost:3000/8">http://localhost:3000/8</a>  ä¼šä½¿ç”¨product controllerçš„show
è€Œä¸”params[:id]ä¸º8
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">":id"</span> =&gt; <span style="color: #2aa198;">"products#show"</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-4" class="outline-4">
<h4 id="sec-2-2-4">Segment Keys</h4>
<div class="outline-text-4" id="text-2-2-4">
<ul class="org-ul">
<li>URL patternæ˜¯å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°çš„(å‰é¢ä¾é å†’å·åˆ†å‰²), è¿™ä¸ªå‚æ•°å«åšsegment key
ä¸‹é¢ä¾‹å­ä¸­,idå°±æ˜¯segment key
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">'products/:id'</span> =&gt; <span style="color: #2aa198;">'products#show'</span>
</pre>
</div>
</li>
<li>å¦‚æœç”¨æˆ·è¾“å…¥äº†<a href="http://example.com/products/4">http://example.com/products/4</a> çš„è¯,é‚£ä¹ˆidå°±ä¼šè¢«èµ‹å€¼ä¸º4,ç„¶å
åå°é€»è¾‘ä¼šè·³è½¬åˆ°procutsé‡Œé¢çš„showå‡½æ•°.
</li>
<li>æˆ‘ä»¬éšæ—¶å¯ä»¥åœ¨routeè®¾ç½®çš„æ—¶å€™,å°±ç»™å®ƒä¸€ä¸ªhardcodeçš„å‚æ•°,å¦‚ä¸‹
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">'products/special'</span> =&gt; <span style="color: #2aa198;">'products#show'</span>, <span style="color: #268bd2; font-weight: bold;">special</span>: <span style="color: #2aa198;">'true'</span>
</pre>
</div>
</li>
<li>ä½†æ˜¯è¿™ç§æ–¹æ³•æ˜¯éå¸¸ä¸å€¼å¾—æ¨èçš„,æ¨èåšæ³•åº”è¯¥æ˜¯æ–°å»ºä¸€ä¸ªå‡½æ•°,å¦‚ä¸‹
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">'products/special'</span> =&gt; <span style="color: #2aa198;">'products#special'</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-5" class="outline-4">
<h4 id="sec-2-2-5">Spotlight on the :id Field</h4>
<div class="outline-text-4" id="text-2-2-5">
<ul class="org-ul">
<li>å‰é¢çš„å‚æ•°,ä¹Ÿå°±æ˜¯segment keyå«åšid,ä¸æ˜¯å¹³ç™½æ— æ•…çš„å«çš„(æ˜¯convention),å®ƒå…¶å®
æ˜¯æˆ‘ä»¬æ•°æ®åº“é‡Œé¢çš„ä¸€ä¸ªå‚æ•°.åœ¨Controlleré‡Œé¢ä¼šæ¶‰åŠçš„(å…¶ä¸ºä¸€ä¸ªå˜é‡paramsä¸­çš„
ä¸€ä¸ªenum key)
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #859900; font-weight: bold;">class</span> <span style="color: #b58900;">ProductsController</span> &lt; <span style="color: #b58900;">ApplicationController</span>
  <span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">show</span>
    <span style="color: #268bd2;">@product</span> = <span style="color: #b58900;">Product</span>.find(params[<span style="color: #268bd2; font-weight: bold;">:id</span>])
  <span style="color: #859900; font-weight: bold;">end</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-6" class="outline-4">
<h4 id="sec-2-2-6">Optional Segment Keys</h4>
<div class="outline-text-4" id="text-2-2-6">
<ul class="org-ul">
<li>Rails3å¼•å…¥äº†"é€‰ç”¨(optional)"çš„URL, æ¯”å¦‚ä¸‹ä¾‹ä¸­çš„()é‡Œé¢çš„éƒ¨åˆ†,å°±æ˜¯optionalçš„.
<div class="org-src-container">

<pre class="src src-ruby">match <span style="color: #2aa198;">':controller(/:action(/:id(.:format)))'</span>, <span style="color: #268bd2; font-weight: bold;">via</span>: <span style="color: #268bd2; font-weight: bold;">:any</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-7" class="outline-4">
<h4 id="sec-2-2-7">Redirect Routes</h4>
<div class="outline-text-4" id="text-2-2-7">
<ul class="org-ul">
<li>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨redirectå‡½æ•°æ¥é‡å®šå‘routeå®šä¹‰
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">"/foo"</span>, <span style="color: #268bd2; font-weight: bold;">to</span>: redirect(<span style="color: #2aa198;">'/bar'</span>)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">full URI is also OK</span>
get <span style="color: #2aa198;">"/google"</span>, <span style="color: #268bd2; font-weight: bold;">to</span>: redirect(<span style="color: #2aa198;">'http://google.com/'</span>)
</pre>
</div>
</li>
<li>redirectè¿˜å¯ä»¥æ¥å—blockä½œä¸ºå‚æ•°
<div class="org-src-container">

<pre class="src src-ruby">match <span style="color: #2aa198;">"/api/v1/:api"</span>, <span style="color: #268bd2; font-weight: bold;">to</span>:
  redirect {|params| <span style="color: #2aa198;">"/api/v2/</span><span style="color: #268bd2;">#{params[:api].pluralize}</span><span style="color: #2aa198;">"</span>},
  <span style="color: #268bd2; font-weight: bold;">via</span>: <span style="color: #268bd2; font-weight: bold;">:any</span>
</pre>
</div>
</li>
<li>redirectå‡½æ•°è¿˜æ¥å—ä¸€ä¸ªé¢å¤–çš„:statuså‚æ•°
<div class="org-src-container">

<pre class="src src-ruby">match <span style="color: #2aa198;">"/api/v1/:api"</span>, <span style="color: #268bd2; font-weight: bold;">:to</span> =&gt;
  redirect(<span style="color: #268bd2; font-weight: bold;">status</span>: 302) {|params|  <span style="color: #2aa198;">"/api/v2/</span><span style="color: #268bd2;">#{params[:api].pluralize}</span><span style="color: #2aa198;">"</span>},
  <span style="color: #268bd2; font-weight: bold;">via</span>: <span style="color: #268bd2; font-weight: bold;">:any</span>
</pre>
</div>
</li>
<li>redirectå‡½æ•°çš„è¿”å›å€¼,æ˜¯ä¸€ä¸ªActionDispatch::Routing::Redirectçš„instance(ä¹Ÿ
å°±æ˜¯ä¸€ä¸ªRack endpoint #TODO#).
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #859900; font-weight: bold;">module</span> <span style="color: #b58900;">AcationDispatch</span>
  <span style="color: #859900; font-weight: bold;">module</span> <span style="color: #b58900;">Routing</span>
    <span style="color: #859900; font-weight: bold;">class</span> <span style="color: #b58900;">Redirect</span>
      <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">...</span>
      <span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">call</span>(env)
        req = <span style="color: #b58900;">Request</span>.new(env)
        <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">...</span>
      <span style="color: #859900; font-weight: bold;">end</span>
    <span style="color: #859900; font-weight: bold;">end</span>
  <span style="color: #859900; font-weight: bold;">end</span>
  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">...</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-8" class="outline-4">
<h4 id="sec-2-2-8">The Format Segment</h4>
<div class="outline-text-4" id="text-2-2-8">
<ul class="org-ul">
<li>æˆ‘ä»¬å†æ¥çœ‹ä¸€élegacy default route.å®ƒçš„æ ·å­æ˜¯è¿™æ ·çš„.
<div class="org-src-container">

<pre class="src src-ruby">match <span style="color: #2aa198;">':controler(/:action(/:id(.:format)))'</span>, <span style="color: #268bd2; font-weight: bold;">via</span>: <span style="color: #268bd2; font-weight: bold;">:any</span>
</pre>
</div>
</li>
<li>å…¶ä¸­çš„.:formtéå¸¸æœ‰æ„æ€,å…¶å®å°±æ˜¯æ‰©å±•å,æ¯”å¦‚ä¸‹é¢çš„è¿™ä¸ªä¾‹å­ä¸­, params[:format]
å°±ä¼šè¢«è®¾ç½®ä¸ºjson, params[:format]éå¸¸æœ‰ç”¨,æ¯”å¦‚åœ¨respond_toæºä»£ç é‡Œé¢å°±é»˜è®¤
ä½ è®¾ç½®äº†params[:format]
<pre class="example">
http://localhost:3000/products/show/3.json
</pre>
</li>
<li>æ‰€è°“respond_to, å…¶ä½œç”¨æ˜¯è®©ä½ å†™è‡ªå·±çš„action,ä½†æ˜¯æ ¹æ®[:format]çš„ä¸åŒ,è€Œè¿”å›ä¸
åŒçš„ç»“æœ. ä¹Ÿå°±æ˜¯è¯´å¦‚æœparams[:format]ä¸åŒçš„è¯, å°±ä¸èƒ½ä½¿ç”¨redirectå‡½æ•°äº†, è€Œ
å¿…é¡»è¦ä½¿ç”¨redirect_toå‡½æ•°.
</li>
<li>ä¸‹é¢å°±æ˜¯ä¸€ä¸ªcontrollerçš„show action:å®ƒè°ƒç”¨å‡½æ•°respond_to
<ul class="org-ul">
<li>é€šè¿‡å¯¹[:format]çš„åˆ¤æ–­æ¥å†³å®šè‡ªå·±çš„è¡Œä¸º
</li>
<li>formatåªåˆ—ä¸¾äº†html,jsonä¸¤ç§ç±»å‹,é‚£ä¹ˆå…¶ä»–ç±»å‹æˆ‘ä»¬ä¸æ”¯æŒ.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">show</span>
  <span style="color: #268bd2;">@product</span> = <span style="color: #b58900;">Product</span>.find(params[<span style="color: #268bd2; font-weight: bold;">:id</span>])
  respond_to <span style="color: #859900; font-weight: bold;">do</span> |format|
    format.html
    format.json { render <span style="color: #268bd2; font-weight: bold;">json</span>: <span style="color: #268bd2;">@product</span>.to_json}
  <span style="color: #859900; font-weight: bold;">end</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
<li>å¦‚æœä½ è¯·æ±‚çš„URLé‡Œé¢ä¸åŒ…æ‹¬htmlæˆ–è€…json,é‚£ä¹ˆRailså°±ä¼šè¿”å›406 Not Acceptable
è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„cubetree"æ— æ³•ä½¿ç”¨respond_toå‡½æ•°", æˆ‘ä»¬è¦è‡ªå·±æ¥hackä¸€ä¸‹,
åœ¨apiè¯·æ±‚çš„urlçš„æƒ…å†µä¸‹,æŠŠparams[:format]è®¾ç½®ä¸ºjson
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-9" class="outline-4">
<h4 id="sec-2-2-9">Routes as Rack Endpoints</h4>
<div class="outline-text-4" id="text-2-2-9">
<ul class="org-ul">
<li>TODO
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-10" class="outline-4">
<h4 id="sec-2-2-10">Accept Header</h4>
<div class="outline-text-4" id="text-2-2-10">
<ul class="org-ul">
<li>åœ¨requesté‡Œé¢è®¾ç½®Accept Headerä¼šè®©æˆ‘ä»¬çš„respond_toé€‰æ‹©åˆé€‚çš„è¿”å›ç±»å‹(ä½†æ˜¯
åœ¨å®é™…æ“ä½œä¸­ç”±äºHTTPåè®®çš„ä¸å¯é æ€§,è¿™ä¸ªheaderå¹¶ä¸æ˜¯æ¯æ¬¡éƒ½èƒ½ä¼ é€’æˆåŠŸ)
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-11" class="outline-4">
<h4 id="sec-2-2-11">Segment Key Constraints</h4>
<div class="outline-text-4" id="text-2-2-11">
<ul class="org-ul">
<li>æœ‰æ—¶å€™ä½ æƒ³æ›´åŠ ç²¾ç»†çš„æ§åˆ¶ä½ çš„url,æ¯”å¦‚ä¸‹é¢è¿™ä¸ªurl, showåé¢çš„id,å¦‚æœæ˜¯æ•°å­—,
é‚£ä¹ˆå°±æ­£å¸¸å¤„ç†,å¦åˆ™å°±è¦æ˜¾ç¤ºé”™è¯¯.æˆ‘ä»¬å¯ä»¥ä½¿ç”¨constraintsæ¥åšè¿™ä¸ªé™åˆ¶
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">':controller/show/:id'</span> =&gt; <span style="color: #268bd2; font-weight: bold;">:show</span>, <span style="color: #268bd2; font-weight: bold;">constraints</span>: {<span style="color: #268bd2; font-weight: bold;">:id</span> =&gt; <span style="color: #2aa198;">/\d+/</span>}
get <span style="color: #2aa198;">':controller/show/:id'</span> =&gt; <span style="color: #268bd2; font-weight: bold;">:show_error</span>
</pre>
</div>
</li>
<li>éœ€è¦éå¸¸æ³¨æ„çš„æ˜¯æˆ‘ä»¬ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯è¿™æ ·çš„
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #2aa198;">/\d+/</span>
</pre>
</div>
</li>
<li>çœ‹ä¸Šå»å¥½åƒ"foo32bar"ä¹Ÿä¼šå¯¹åº”è¿™ä¸ªid,ä½†å…¶å®ä¸æ˜¯çš„.å› ä¸ºRailsé»˜è®¤çš„ç»™constraints
é‡Œé¢çš„æ­£åˆ™è¡¨è¾¾å¼åŠ ä¸Šäº†\Aå’ŒZ
</li>
<li>ç”±äºconstraintså¦‚æ­¤çš„å¸¸ç”¨,åæœŸrailsç›´æ¥æŠŠè¿™ä¸ªçœç•¥äº†
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">':controller/show/:id'</span> =&gt; <span style="color: #268bd2; font-weight: bold;">:show</span>, <span style="color: #268bd2; font-weight: bold;">id</span>: <span style="color: #2aa198;">/\d+/</span>
get <span style="color: #2aa198;">':controller/show/:id'</span> =&gt; <span style="color: #268bd2; font-weight: bold;">:show_error</span>
</pre>
</div>
</li>
<li>å³ä¾¿æœ‰constraintsçš„å¸®åŠ©,ä½ ä»ç„¶éœ€è¦åœ¨è¿è¡Œçš„æ—¶å€™å¯¹è¾“å…¥å‚æ•°è¿›è¡Œæµ‹è¯•,å› ä¸ºæ­£åˆ™è¡¨
è¾¾å¼ä¸æ˜¯ä¸‡èƒ½çš„.
</li>
<li>constraintsä¸ä»…ä»…æ˜¯å¯¹paramså“ˆå¸Œè¡¨é‡Œé¢çš„å‚æ•°æœ‰é™åˆ¶ä½œç”¨,å®ƒç”šè‡³å¯ä»¥å»é™åˆ¶:subdomain,
æˆ–è€…:referrer
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">only allow users admin subdomain to do old-school routing</span>
get <span style="color: #2aa198;">':controller/:action/:id'</span> =&gt; <span style="color: #268bd2; font-weight: bold;">:show</span>, <span style="color: #268bd2; font-weight: bold;">constraints</span>: {<span style="color: #268bd2; font-weight: bold;">subdomain</span>: <span style="color: #2aa198;">'admin'</span>}
</pre>
</div>
</li>
<li>æ›´åŠ ç²¾ç»†çš„æ§åˆ¶,éœ€è¦ä¼ å…¥ä¸€ä¸ªblockæ¥åšåˆ°(procå°±æ˜¯blockçš„æ˜¾æ€§è¡¨è¾¾), æ¯”å¦‚ä¸‹é¢æ˜¯
è¦æ±‚urlå¿…é¡»æ˜¯å¤§äº100çš„id
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">protect records with id under 100</span>
get <span style="color: #2aa198;">'records/:id'</span> =&gt; <span style="color: #2aa198;">"records#protected"</span>,
<span style="color: #268bd2; font-weight: bold;">constraints</span>: <span style="color: #657b83; font-weight: bold;">proc</span> {|req| req.params[<span style="color: #268bd2; font-weight: bold;">:id</span>].to_i &lt; 100}
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-12" class="outline-4">
<h4 id="sec-2-2-12">The Root Route</h4>
<div class="outline-text-4" id="text-2-2-12">
<ul class="org-ul">
<li>åœ¨config/routes.rbçš„å‰é¢æœ‰å¦‚ä¸‹ä¸€è¡Œè¢«æ³¨é‡Šæ‰çš„ä»£ç .å…¶å®å°±æ˜¯è®©ä½ é€‰æ‹©è‡ªå·±ç½‘ç«™
çš„rootåœ¨å“ªé‡Œçš„. å¦‚æœä½ å‡†å¤‡å¥½äº†ä¸»é¡µ,å¯ä»¥æ”¹å†™è¿™å¥ä»£ç 
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">You can have the root fo your site routed with "root"</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">root to: 'welcome#index'</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">Route Globbing</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>æœ‰äº›æƒ…å†µä¸‹,ä½ å¯èƒ½ä¸æƒ³æŠŠæ¯ä¸ªpathéƒ½ä¸€ä¸ªä¸ªçš„å†™å‡ºæ¥, å› ä¸ºå¤ªå¤šäº†(è€Œä¸”æœ‰è§„åˆ™å¯å¾ª),
æ¯”å¦‚åˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„:æ¯”å¦‚URLä¸ºåˆ—å‡ºdickensçš„çŸ­ç¯‡
<pre class="example">
/items/list/base/books/fictin/dickens/little_dorrit
</pre>
</li>
<li>å¯èƒ½ä»/items/liståé¢å¼€å§‹,å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„åˆ—è¡¨äº†,ä¸€ä¸ªä¸ªæŠŠurlåˆ—å‡ºæ¥æ˜¾ç„¶ä¸æ˜æ™º
</li>
<li>railsçš„æ–¹æ³•æ˜¯"æ˜Ÿå·"
<div class="org-src-container">

<pre class="src src-ruby">get <span style="color: #2aa198;">'items/list/*specs'</span>, <span style="color: #268bd2; font-weight: bold;">controller</span>: <span style="color: #2aa198;">'items'</span>, <span style="color: #268bd2; font-weight: bold;">action</span>: <span style="color: #2aa198;">'list'</span>
</pre>
</div>
</li>
<li>æˆ‘ä»¬å†åœ¨å‡½æ•°listé‡Œé¢å¤„ç†specs
<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">list</span>
  specs = params[<span style="color: #268bd2; font-weight: bold;">:specs</span>]        <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">e.g, "base/books/fiction/dickens"</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4">Named Routes</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

         <!-- Disqus Comment BEGIN -->
          <div id="disqus_thread"></div>
          <script type="text/javascript">
              var disqus_shortname = 'harrifeng';

              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

         <!-- Disqus Comment END -->
</div>
</body>
</html>
