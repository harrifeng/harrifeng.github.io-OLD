<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Chapter 5</title>
<!-- 2014-03-08 Sat 17:48 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="your name" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>

         <link href="http://fonts.googleapis.com/css?family=Droid+Sans+Mono|Galdeano|Open+Sans:600italic,400,600|Roboto+Condensed:400,700" rel="stylesheet" type="text/css">
         <link rel="stylesheet" type="text/css" href="/static/css/main.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="http://harrifeng.github.io/sitemap.html"> UP </a>
 |
 <a accesskey="H" href="http://harrifeng.github.io/index.html"> HOME </a>
</div><div id="preamble" class="status">

         <div id="header">
            <div id="header-top">
                <div id="blog-title">Harrifeng's Path</div>
                <div id="blog-sub-title">纸上得来终觉浅,绝知此事要Coding</div>
            </div>
            <div id="nav">
                <ul>
                    <li><a href="/">首页</a></li>
                    <li><a href="/notes.html">读书笔记</a></li>
                    <li><a href="/about.html">About</a></li>
                    <li><a href="/atom.xml">RSS</a></li>
                    <li>
                    </li>
                </ul>
            </div>
         </div>
</div>
<div id="content">
<h1 class="title">Chapter 5</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Working With Commands</a>
<ul>
<li><a href="#sec-1-1">What Exactly Are Commands?</a></li>
<li><a href="#sec-1-2">Identifying Commans</a>
<ul>
<li><a href="#sec-1-2-1">type-Display a Command's Type</a></li>
<li><a href="#sec-1-2-2">which-Display an Executable's Location</a></li>
</ul>
</li>
<li><a href="#sec-1-3">Getting a Command's Documentation</a>
<ul>
<li><a href="#sec-1-3-1">help-Get Help for Shell Builtins</a></li>
<li><a href="#sec-1-3-2">&#x2013;help-Display Usage Information</a></li>
<li><a href="#sec-1-3-3">man-Display a Program's Manual Page</a></li>
<li><a href="#sec-1-3-4">apropos-Display Appropriate Commands</a></li>
<li><a href="#sec-1-3-5">whatis-Display a Very Brief Description of a Command</a></li>
</ul>
</li>
<li><a href="#sec-1-4">Creating Your Own Commands with alias</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Working With Commands</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">What Exactly Are Commands?</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>一个命令其实质上可能会是下面四种中的一种:
<ul class="org-ul">
<li>An executable program: 所有的在/usr/bin下面的可执行程序都是这种, which的
结果就是/usr/bin
</li>
<li>A command build into the shell itself:是shell自带的. which的结果是空,
比如cd
</li>
<li>A shell function
</li>
<li>An alias: 在其他命令的基础上自己简单改变的命令,比如ll, which ll也是空的
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">Identifying Commans</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1">type-Display a Command's Type</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>我们可以用type命令来判断命令的类型:
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ type type
<span style="color: #839496; font-weight: bold;">type</span> is a shell builtin
lvtest@auto-inst:~$ type ls
ls is aliased to <span style="color: #6c71c4; font-weight: bold;">`ls --color=auto'</span>
<span style="color: #6c71c4; font-weight: bold;">lvtest@auto-inst:~$ type cp</span>
<span style="color: #6c71c4; font-weight: bold;">cp is /bin/cp</span>
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2">which-Display an Executable's Location</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>有时候我们一个可执行程序会有多个版本,which可以判断系统默认的使用哪个, which
还只能作用在executable程序,对于builtin的程序不管用
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ which ls
/bin/ls
lvtest@auto-inst:~$ which cd
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Getting a Command's Documentation</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1">help-Get Help for Shell Builtins</h4>
<div class="outline-text-4" id="text-1-3-1">
<ul class="org-ul">
<li>help + buildin command的话可以查看其文档
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ help cd
<span style="color: #839496; font-weight: bold;">cd</span>: cd [-L|[-P [-e]]] [dir]
    Change the shell working directory.

    Change the current directory to DIR.  The default DIR is the value of the
    HOME shell variable.

    The variable CDPATH defines the search path for the directory containing
    DIR.  Alternative directory names<span style="color: #859900; font-weight: bold;"> in</span> CDPATH are separated by a colon (:)<span style="color: #839496; font-weight: bold;">.</span>
    A null directory name is the same as the current directory.  If DIR begins
    with a slash (/), then CDPATH is not used.

    If the directory is not found, and the shell option <span style="color: #6c71c4; font-weight: bold;">`cdable_vars' is set,</span>
<span style="color: #6c71c4; font-weight: bold;">    the word is assumed to be  a variable name.  If that variable has a value,</span>
<span style="color: #6c71c4; font-weight: bold;">    its value is used for DIR.</span>

<span style="color: #6c71c4; font-weight: bold;">    Options:</span>
<span style="color: #6c71c4; font-weight: bold;">        -L  force symbolic links to be followed</span>
<span style="color: #6c71c4; font-weight: bold;">        -P  use the physical directory structure without following symbolic</span>
<span style="color: #6c71c4; font-weight: bold;">        links</span>
<span style="color: #6c71c4; font-weight: bold;">        -e  if the -P option is supplied, and the current working directory</span>
<span style="color: #6c71c4; font-weight: bold;">        cannot be determined successfully, exit with a non-zero status</span>

<span style="color: #6c71c4; font-weight: bold;">    The default is to follow symbolic links, as if `</span>-L<span style="color: #2aa198;">' were specified.</span>

<span style="color: #2aa198;">    Exit Status:</span>
<span style="color: #2aa198;">    Returns 0 if the directory is changed, and if $PWD is set successfully when</span>
<span style="color: #2aa198;">    -P is used; non-zero otherwise.</span>
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2">&#x2013;help-Display Usage Information</h4>
<div class="outline-text-4" id="text-1-3-2">
<ul class="org-ul">
<li>buildin的可以使用help,那么如果是executable的话,help就不管用了,但是默认这种
命令会加一个&#x2013;help参数(executable最开始都是c语言写的,c语言自然对于位于自己exe
后面的参数,当然好分析了)
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ type mkdir
mkdir is /bin/mkdir
lvtest@auto-inst:~$ help mkdir
bash: help: no help topics match <span style="color: #6c71c4; font-weight: bold;">`mkdir'.  Try `</span><span style="color: #839496; font-weight: bold;">help</span> help<span style="color: #2aa198;">' or `man -k mkdir'</span> or <span style="color: #6c71c4; font-weight: bold;">`info mkdir'.</span>
<span style="color: #6c71c4; font-weight: bold;">lvtest@auto-inst:~$ mkdir --help</span>
<span style="color: #6c71c4; font-weight: bold;">Usage: mkdir [OPTION]... DIRECTORY...</span>
<span style="color: #6c71c4; font-weight: bold;">Create the DIRECTORY(ies), if they do not already exist.</span>

<span style="color: #6c71c4; font-weight: bold;">Mandatory arguments to long options are mandatory for short options too.</span>
<span style="color: #6c71c4; font-weight: bold;">  -m, --mode=MODE   set file mode (as in chmod), not a=rwx - umask</span>
<span style="color: #6c71c4; font-weight: bold;">  -p, --parents     no error if existing, make parent directories as needed</span>
<span style="color: #6c71c4; font-weight: bold;">  -v, --verbose     print a message for each created directory</span>
<span style="color: #6c71c4; font-weight: bold;">  -Z, --context=CTX  set the SELinux security context of each created</span>
<span style="color: #6c71c4; font-weight: bold;">                      directory to CTX</span>
<span style="color: #6c71c4; font-weight: bold;">      --help     display this help and exit</span>
<span style="color: #6c71c4; font-weight: bold;">      --version  output version information and exit</span>

<span style="color: #6c71c4; font-weight: bold;">Report mkdir bugs to bug-coreutils@gnu.org</span>
<span style="color: #6c71c4; font-weight: bold;">GNU coreutils home page: <a href="http://www.gnu.org/software/coreutils/&gt;
General help using GNU software: &lt;http://www.gnu.org/gethelp/&gt;
Report mkdir translation bugs to &lt;http://translationproject.org/team/">&lt;http://www.gnu.org/software/coreutils/&gt;</a></span><a href="http://www.gnu.org/software/coreutils/&gt;
General help using GNU software: &lt;http://www.gnu.org/gethelp/&gt;
Report mkdir translation bugs to &lt;http://translationproject.org/team/">
</a><span style="color: #6c71c4; font-weight: bold;"><a href="http://www.gnu.org/software/coreutils/&gt;
General help using GNU software: &lt;http://www.gnu.org/gethelp/&gt;
Report mkdir translation bugs to &lt;http://translationproject.org/team/">General help using GNU software: &lt;http://www.gnu.org/gethelp/&gt;</a></span><a href="http://www.gnu.org/software/coreutils/&gt;
General help using GNU software: &lt;http://www.gnu.org/gethelp/&gt;
Report mkdir translation bugs to &lt;http://translationproject.org/team/">
</a><span style="color: #6c71c4; font-weight: bold;"><a href="http://www.gnu.org/software/coreutils/&gt;
General help using GNU software: &lt;http://www.gnu.org/gethelp/&gt;
Report mkdir translation bugs to &lt;http://translationproject.org/team/">Report mkdir translation bugs to &lt;http://translationproject.org/team/&gt;</a></span>
<span style="color: #6c71c4; font-weight: bold;">For complete documentation, run: info coreutils 'mkdir invocation'</span>
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3">man-Display a Program's Manual Page</h4>
<div class="outline-text-4" id="text-1-3-3">
<ul class="org-ul">
<li>对于buildin的命令,前置的查看方法是help cmd,对于executable(开始都是c语言写
的)来说,前置的查看方法是man ls
</li>
<li>由于一个executable通常都是c语言写的,而这些命令都有c语言的相应函数(甚至是system
call),所以我们有如下的常用默认显示类别
<table border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col  class="right" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="right">Section</th>
<th scope="col" class="left">Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">1</td>
<td class="left">User commands</td>
</tr>

<tr>
<td class="right">2</td>
<td class="left">Programming interfaces for kernel system calls</td>
</tr>

<tr>
<td class="right">3</td>
<td class="left">Programming interfaces to the C library</td>
</tr>

<tr>
<td class="right">4</td>
<td class="left">Special files such as device nodes and drivers</td>
</tr>

<tr>
<td class="right">5</td>
<td class="left">File formats</td>
</tr>

<tr>
<td class="right">6</td>
<td class="left">Games and amusements such as screensavers</td>
</tr>

<tr>
<td class="right">7</td>
<td class="left">Miscellaneous</td>
</tr>

<tr>
<td class="right">8</td>
<td class="left">System administration commands</td>
</tr>
</tbody>
</table>
</li>
<li>类别的使用方法是把类别序号放在man和cmd之间
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ man 5 passwd
<span style="color: #268bd2;">PASSWD</span>(5)                File Formats and Conversions                PASSWD(5)
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3-4" class="outline-4">
<h4 id="sec-1-3-4">apropos-Display Appropriate Commands</h4>
<div class="outline-text-4" id="text-1-3-4">
<ul class="org-ul">
<li>可以看成是bash的google
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ apropos mkdir
<span style="color: #268bd2;">mkdir</span> (1)            - make directories
<span style="color: #268bd2;">mkdir</span> (2)            - create a directory
<span style="color: #268bd2;">mkdirat</span> (2)          - create a directory relative to a directory file descri...
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3-5" class="outline-4">
<h4 id="sec-1-3-5">whatis-Display a Very Brief Description of a Command</h4>
<div class="outline-text-4" id="text-1-3-5">
<ul class="org-ul">
<li>whatis 就是bash的百度百科
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ whatis ls
<span style="color: #268bd2;">ls</span> (1)               - list directory contents
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">Creating Your Own Commands with alias</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>我们可以使用alias来重新组合一个命令
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ alias <span style="color: #268bd2;">foo</span>=<span style="color: #2aa198;">'cd /usr; ls; cd -'</span>
lvtest@auto-inst:~$ which foo
lvtest@auto-inst:~$ type foo
foo is aliased to <span style="color: #6c71c4; font-weight: bold;">`cd /usr; ls; cd -'</span>
<span style="color: #6c71c4; font-weight: bold;">lvtest@auto-inst:~$ foo</span>
<span style="color: #6c71c4; font-weight: bold;">bin  games  include  lib  local  sbin  share  src</span>
<span style="color: #6c71c4; font-weight: bold;">/home/lvtest</span>
</pre>
</div>
</li>
<li>使用unalias来去掉这个命令的alias
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ unalias foo
lvtest@auto-inst:~$ type foo
bash: type: foo: not found
</pre>
</div>
</li>
<li>使用alias不加参数的话,会列举系统上面所有的alias
<div class="org-src-container">

<pre class="src src-sh">lvtest@auto-inst:~$ alias
<span style="color: #839496; font-weight: bold;">alias</span> <span style="color: #268bd2;">alert</span>=<span style="color: #2aa198;">'notify-send --urgency=low -i "$([ $? = 0 ] &amp;&amp; echo terminal || echo error)" "$(</span><span style="color: #6c71c4; font-weight: bold;">history</span><span style="color: #2aa198;">|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//'\'')"'</span>
<span style="color: #839496; font-weight: bold;">alias</span> <span style="color: #268bd2;">egrep</span>=<span style="color: #2aa198;">'egrep --color=auto'</span>
<span style="color: #839496; font-weight: bold;">alias</span> <span style="color: #268bd2;">fgrep</span>=<span style="color: #2aa198;">'fgrep --color=auto'</span>
<span style="color: #839496; font-weight: bold;">alias</span> <span style="color: #268bd2;">grep</span>=<span style="color: #2aa198;">'grep --color=auto'</span>
<span style="color: #839496; font-weight: bold;">alias</span> <span style="color: #268bd2;">l</span>=<span style="color: #2aa198;">'ls -CF'</span>
<span style="color: #839496; font-weight: bold;">alias</span> <span style="color: #268bd2;">la</span>=<span style="color: #2aa198;">'ls -A'</span>
<span style="color: #839496; font-weight: bold;">alias</span> <span style="color: #268bd2;">ll</span>=<span style="color: #2aa198;">'ls -alF'</span>
<span style="color: #839496; font-weight: bold;">alias</span> <span style="color: #268bd2;">ls</span>=<span style="color: #2aa198;">'ls --color=auto'</span>
</pre>
</div>
</li>
<li>alias命令只有在当前shell的生命期内有用,一旦关掉当前的terminal,这次alias的就
消失了.
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

         <!-- Duoshuo Comment BEGIN -->
         <div class="ds-thread"></div>
         <script type="text/javascript">
             var duoshuoQuery = {short_name:"harrifeng"};
             (function() {
             var ds = document.createElement('script');
             ds.type = 'text/javascript';ds.async = true;
             ds.src = 'http://static.duoshuo.com/embed.js';
             ds.charset = 'UTF-8';
             (document.getElementsByTagName('head')[0]
             || document.getElementsByTagName('body')[0]).appendChild(ds);
             })();
         </script>
         <!-- Duoshuo Comment END -->
</div>
</body>
</html>
