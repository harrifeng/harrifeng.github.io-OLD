<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Chapter 03: Methods Common to All Objects</title>
<!-- 2015-03-18 Wed 17:27 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="your name" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>

         <link href="http://fonts.googleapis.com/css?family=Droid+Sans+Mono|Galdeano|Open+Sans:600italic,400,600|Roboto+Condensed:400,700" rel="stylesheet" type="text/css">
         <link rel="stylesheet" type="text/css" href="/static/css/main.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="http://harrifeng.github.io/sitemap.html"> UP </a>
 |
 <a accesskey="H" href="http://harrifeng.github.io/index.html"> HOME </a>
</div><div id="preamble" class="status">

         <div id="header">
            <div id="header-top">
                <div id="blog-title">Harrifeng's Path</div>
                <div id="blog-sub-title">纸上得来终觉浅,绝知此事要Coding</div>
            </div>
            <div id="nav">
                <ul>
                    <li><a href="/">首页</a></li>
                    <li><a href="/about.html">About Me</a></li>
                    <li>
                    </li>
                </ul>
            </div>
         </div>
</div>
<div id="content">
<h1 class="title">Chapter 03: Methods Common to All Objects</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Methods Common to All Objects</a>
<ul>
<li><a href="#sec-1-1">Item 8: Obey the general contract when overriding equals</a></li>
<li><a href="#sec-1-2">Item 9: Always override hashCode when you override equals</a></li>
<li><a href="#sec-1-3">Item 10: Always override toString</a></li>
<li><a href="#sec-1-4">Item 11: Override clone judiciously</a></li>
<li><a href="#sec-1-5">Item 12: Consider implementing Comparable</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Methods Common to All Objects</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Item 8: Obey the general contract when overriding equals</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>实现equals是一件非常困难的事情,实现的不好就会造成灾难,所以最好是"能不实现,就
不实现", 满足下面任意一个条件,就可以不用"自己实现equals":
<ol class="org-ol">
<li>Each instance of the class is inherently unique: 比如Thread这种,其对象肯
定是实例,而不是value,那么唯一性是肯定的.Object里面的equals实现就够用了
</li>
<li>You don't care whether the class provides a "logical euqality" test: 比
如你可以为java.util.Random实现一个equals来对比两次实现的随机数是否一样.
但显然这个设计是多余的,没有人会用这个功能
</li>
<li>A superclass has already overridden equals, and the superclass behavior
is appropriate for this class: 比如大多数Set的具体实现都继承于AbstractSet.
List的实现继承于AbstractList, Map的实现继承于AbstractMap
</li>
<li>class是private或者是package-private的,然后你确信这个equals method不会有人
调用,保险起见, 你还要加上如下代码
<div class="org-src-container">

<pre class="src src-java"><span style="color: #86453A;">@Override</span>
<span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #C6B032;">equals</span>(<span style="color: #C6B032; font-style: italic;">Object</span> <span style="color: #46657B;">o</span>) {
    <span style="color: #AE5825;">throw</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">AssertionError</span>(); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Method is never called</span>
}
</pre>
</div>
</li>
</ol>
</li>
<li>那什么情况下要实现equals呢? 具体来说就是superclass没有实现equals 的value class:
所谓value class 就是class有'值'(比如Integer, Date). 用户比较这种class的instance
的时候,不想比较他们'是否refer to the same object', 而是想比较他们'是否逻辑上相等'
</li>
<li>需要说明的是使用"instance control(就是保证class的一种value只有一个instance
的情况)"的class是不需要equals的, 比如Enum type, 对他们来说逻辑上相对,就意味
着是同一个intance
</li>
<li>#TODO#
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">Item 9: Always override hashCode when you override equals</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>如果要实现equals, 就必须实现hashCode, 这个是两者的合同契约关系: 如果两个object
通过equals method证明为相同的话,那么他们的hashCode method返回的integer也必须
相同
</li>
<li>对于value class来说,如果实现了两者的equals method, 那么也要改写hashCode, 因
为对于hashCode来说.两者只是不同instance而已. 如果忘记实现hashCode, 那么你的
class的instance就无法作为Hash类(比如HashMap, HashSet, HashTable)的key啦
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">public</span> <span style="color: #AE5825;">final</span> <span style="color: #C6B032; font-style: italic;">clas</span> <span style="color: #46657B;">PhoneNumber</span> {
    <span style="color: #AE5825;">private</span> <span style="color: #AE5825;">final</span> <span style="color: #C6B032; font-style: italic;">short</span> <span style="color: #46657B;">areaCode</span>;
    <span style="color: #AE5825;">private</span> <span style="color: #AE5825;">final</span> <span style="color: #C6B032; font-style: italic;">short</span> <span style="color: #46657B;">prefix</span>;
    <span style="color: #AE5825;">private</span> <span style="color: #AE5825;">final</span> <span style="color: #C6B032; font-style: italic;">short</span> <span style="color: #46657B;">lineNumber</span>;

    <span style="color: #AE5825;">public</span> <span style="color: #46657B;">PhoneNumber</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">areaCode</span>, <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">prefix</span>,
                       <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">lineNumber</span>) {
        rangeCheck(areaCode,    999, <span style="color: #5A7644;">"area code"</span>);
        rangeCheck(prefix,      999, <span style="color: #5A7644;">"prefix"</span>);
        rangeCheck(lineNumber,  999, <span style="color: #5A7644;">"line number"</span>);

        <span style="color: #AE5825;">this</span>.areaCode = (<span style="color: #C6B032; font-style: italic;">short</span>) areaCode;
        <span style="color: #AE5825;">this</span>.prefix = (<span style="color: #C6B032; font-style: italic;">short</span>) prefix;
        <span style="color: #AE5825;">this</span>.lineNumber = (<span style="color: #C6B032; font-style: italic;">short</span>) lineNumber;

        <span style="color: #AE5825;">private</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #46657B;">rangeCheck</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">arg</span>, <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">max</span>,
                                       <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">name</span>) {
            <span style="color: #AE5825;">if</span> (arg &lt; 0 || arg &gt; max) {
                <span style="color: #AE5825;">throw</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">IllegalArgumentException</span>(name + <span style="color: #5A7644;">": "</span> + arg);
            }
        }

        <span style="color: #86453A;">@Override</span> <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #46657B;">equals</span>(<span style="color: #C6B032; font-style: italic;">Object</span> <span style="color: #46657B;">o</span>) {
            <span style="color: #AE5825;">if</span> (o == <span style="color: #AE5825;">this</span>) {
                <span style="color: #AE5825;">return</span> <span style="color: #86453A;">true</span>;
            }
            <span style="color: #AE5825;">if</span> (!(o <span style="color: #AE5825;">instanceof</span> PhoneNumber)) {
                <span style="color: #AE5825;">return</span> <span style="color: #86453A;">false</span>;
            }
            <span style="color: #C6B032; font-style: italic;">PhoneNumber</span> <span style="color: #46657B;">pn</span> = (<span style="color: #C6B032; font-style: italic;">PhoneNumber</span>)o;
            <span style="color: #AE5825;">return</span> pn.lineNumber == lineNumber
                &amp;&amp; pn.prefix == prefix
                &amp;&amp; pn.areaCode == areCode;
        }

        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Broken - no hashCode method!</span>
    }
}
</pre>
</div>
</li>
<li>不要为了提高性能而把object里面的关键部分去掉再做hashCode.
<ul class="org-ul">
<li>1.2版本以前的String hashCode不会检查所有的成员char,而且均匀的选择16个字符
进行哈希,得到hashCode. 这样一来虽然相同的字符串一定会产生相同的hashCode,
但是某些不同的字符串(虽然概率较低)也会产生相同的hashCode.
</li>
<li>这样导致散列函数把String作为key的时候, 如果key的数量足够大,那么不同字符串
就会产生很多相同的hashCode,最终导致Hash系列的查找非常的慢(因为有很多的冲突!)
</li>
</ul>
</li>
<li>1.2版本以后的String已经开始使用所有的char啦
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #C6B032;">hashCode</span>() {
    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">h</span> = hash;
    <span style="color: #AE5825;">if</span> (h == 0 &amp;&amp; value.length &gt; 0) {
        <span style="color: #C6B032; font-style: italic;">char</span> <span style="color: #46657B;">val</span>[] = value;

        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; value.<span style="color: #C6B032; font-style: italic;">length</span>; i++) {
            h = 31 * h + val[i];
        }
        hash = h;
    }
    <span style="color: #AE5825;">return</span> h;
}
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Item 10: Always override toString</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>虽然不如equals和hashCode的约定那么重要,但是为每一个子类实现toString函数是非
常好的一个建议
</li>
<li>是否要把toString的格式在文档中体现出来是很重要的一个决定:
<ul class="org-ul">
<li>优点: 易于阅读
</li>
<li>缺点: 如果这个类被广泛使用,那么一旦指定格式,就必须坚持,因为程序员会根据这
个格式编写了代码
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">Item 11: Override clone judiciously</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>Cloneable接口是一个设计上的失败, 因为作为借口,它里面什么内容都没有
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> java.<span style="color: #86453A;">lang</span>;

<span style="color: #DDFFD1;">/**</span>
<span style="color: #DDFFD1;"> * A class implements the </span><span style="color: #86453A;">&lt;code&gt;</span><span style="color: #DDFFD1;">Cloneable</span><span style="color: #86453A;">&lt;/code&gt;</span><span style="color: #DDFFD1;"> interface to</span>
<span style="color: #DDFFD1;"> * indicate to the </span><span style="color: #86453A;">{@link java.lang.Object#clone()}</span><span style="color: #DDFFD1;"> method that it</span>
<span style="color: #DDFFD1;"> * is legal for that method to make a</span>
<span style="color: #DDFFD1;"> * field-for-field copy of instances of that class.</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">&lt;p&gt;</span>
<span style="color: #DDFFD1;"> * Invoking Object's clone method on an instance that does not implement the</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">&lt;code&gt;</span><span style="color: #DDFFD1;">Cloneable</span><span style="color: #86453A;">&lt;/code&gt;</span><span style="color: #DDFFD1;"> interface results in the exception</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">&lt;code&gt;</span><span style="color: #DDFFD1;">CloneNotSupportedException</span><span style="color: #86453A;">&lt;/code&gt;</span><span style="color: #DDFFD1;"> being thrown.</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">&lt;p&gt;</span>
<span style="color: #DDFFD1;"> * By convention, classes that implement this interface should override</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">&lt;tt&gt;</span><span style="color: #DDFFD1;">Object.clone</span><span style="color: #86453A;">&lt;/tt&gt;</span><span style="color: #DDFFD1;"> (which is protected) with a public method.</span>
<span style="color: #DDFFD1;"> * See </span><span style="color: #86453A;">{@link java.lang.Object#clone()}</span><span style="color: #DDFFD1;"> for details on overriding this</span>
<span style="color: #DDFFD1;"> * method.</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">&lt;p&gt;</span>
<span style="color: #DDFFD1;"> * Note that this interface does </span><span style="color: #86453A;">&lt;i&gt;</span><span style="color: #DDFFD1;">not</span><span style="color: #86453A;">&lt;/i&gt;</span><span style="color: #DDFFD1;"> contain the </span><span style="color: #86453A;">&lt;tt&gt;</span><span style="color: #DDFFD1;">clone</span><span style="color: #86453A;">&lt;/tt&gt;</span><span style="color: #DDFFD1;"> method.</span>
<span style="color: #DDFFD1;"> * Therefore, it is not possible to clone an object merely by virtue of the</span>
<span style="color: #DDFFD1;"> * fact that it implements this interface.  Even if the clone method is invoked</span>
<span style="color: #DDFFD1;"> * reflectively, there is no guarantee that it will succeed.</span>
<span style="color: #DDFFD1;"> *</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">@author</span><span style="color: #DDFFD1;">  unascribed</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">@see</span><span style="color: #DDFFD1;">     java.lang.CloneNotSupportedException</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">@see</span><span style="color: #DDFFD1;">     java.lang.Object#clone()</span>
<span style="color: #DDFFD1;"> * </span><span style="color: #86453A;">@since</span><span style="color: #DDFFD1;">   JDK1.0</span>
<span style="color: #DDFFD1;"> */</span>
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">interface</span> <span style="color: #C6B032; font-style: italic;">Cloneable</span> {
}
</pre>
</div>
</li>
<li>它只是"声明"这个对象可以被克隆,但具体怎么克隆是类设计者的事情,类设计者可以
根本就不去实现一个clone函数, 而这个错误直到runtime才会被发现.如果把clone函
数放在Cloneable接口里面的话,无疑会更加的合理,因为"implement一个接口,但是没有
重载它的函数"本身就是一个错误.
</li>
<li>那Cloneable为什么这么设计呢? 这是因为clone这个函数被定义在了Object里面(具体
实现是使用的c语言)
<div class="org-src-container">

<pre class="src src-java"><span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">cpp implementation can be found here</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/9b0ca45cd756/src/share/vm/prims/jvm.cpp</span>
<span style="color: #AE5825;">protected</span> <span style="color: #AE5825;">native</span> <span style="color: #C6B032; font-style: italic;">Object</span> <span style="color: #C6B032;">clone</span>() <span style="color: #AE5825;">throws</span> <span style="color: #C6B032; font-style: italic;">CloneNotSupportedException</span>;
</pre>
</div>
</li>
<li>Cloneable的设计还充满了以下各种问题:
<ul class="org-ul">
<li>与final域的正常使用冲突(final域只能初始化,无法赋值)
</li>
<li>会抛出不必要的checked exception(CloneNotSupportedException).
</li>
<li>实现深拷贝或者浅拷贝有赖于文档
</li>
</ul>
</li>
<li>总结起来就是:不要使用Cloneable接口,而应该使用拷贝构造器(copy ctor)或者拷贝
工厂(copy factory)
<div class="org-src-container">

<pre class="src src-java"><span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">copy ctor</span>
<span style="color: #AE5825;">public</span> <span style="color: #C6B032;">Yum</span>(<span style="color: #C6B032; font-style: italic;">Yum</span> <span style="color: #46657B;">yum</span>);
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">copy factory</span>
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Yum</span> <span style="color: #C6B032;">newInstance</span>(<span style="color: #C6B032; font-style: italic;">Yum</span> <span style="color: #46657B;">yum</span>);
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">Item 12: Consider implementing Comparable</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Comparable的设计颇为合适,它有自己的interface,然后interface里面还有函数
compareTo(而不是像Cloneable一样,有一个空的interface)
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">public</span> <span style="color: #AE5825;">interface</span> <span style="color: #C6B032; font-style: italic;">Comparable</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; {
    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #C6B032;">compareTo</span>(<span style="color: #C6B032; font-style: italic;">T</span> <span style="color: #46657B;">t</span>);
}
</pre>
</div>
</li>
<li>如果一个class实现了Comparable,意味着它遵守如下的承诺:
<pre class="example">
       这个class的instance拥有了natural ordering的能力
</pre>
</li>
<li>所谓natural ordering能力,就是作为a, Arrays.sort(int[] a)就可以成功排序,不需
要一个comparator
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> &lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">sort</span>(<span style="color: #C6B032; font-style: italic;">T</span>[] <span style="color: #46657B;">a</span>, <span style="color: #C6B032; font-style: italic;">Comparator</span>&lt;? <span style="color: #AE5825;">super</span> <span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #46657B;">c</span>)
</pre>
</div>
</li>
<li>我们常见的implements了Comparable,从而拥有natural ordering能力的就是digit和
String
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">public</span> <span style="color: #AE5825;">final</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">String</span>
    <span style="color: #AE5825;">implements</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">io</span>.<span style="color: #C6B032; font-style: italic;">Serializable</span>, <span style="color: #C6B032; font-style: italic;">Comparable</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;, <span style="color: #C6B032; font-style: italic;">CharSequence</span> {
    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">....</span>
}
</pre>
</div>
</li>
<li>如果你想改变"natural ordering",那么就要implement Comparator, 实现其compare函
数. 注意,在使用的时候,如果没有加Comparator的参数的话,默认是按照Comparable来
实现的(因为它是"natural"的);
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.misc.ej2.<span style="color: #86453A;">item12</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Arrays</span>;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Comparator</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Player</span> <span style="color: #AE5825;">implements</span> <span style="color: #C6B032; font-style: italic;">Comparable</span>&lt;<span style="color: #C6B032; font-style: italic;">Player</span>&gt;, <span style="color: #C6B032; font-style: italic;">Comparator</span>&lt;<span style="color: #C6B032; font-style: italic;">Player</span>&gt;{
    <span style="color: #AE5825;">private</span> <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">_number</span>;
    <span style="color: #AE5825;">private</span> <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">_name</span>;

    <span style="color: #C6B032;">Player</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">number</span>, <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">name</span>) {
        _number = number;
        _name = name;
    }

    <span style="color: #C6B032;">Player</span>() {
    }

    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #C6B032;">toString</span>() {
        <span style="color: #AE5825;">return</span> String.format(<span style="color: #5A7644;">"No:%d-Name: %s"</span>, _number, _name);
    }

    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #C6B032;">compare</span>(<span style="color: #C6B032; font-style: italic;">Player</span> <span style="color: #46657B;">p</span>, <span style="color: #C6B032; font-style: italic;">Player</span> <span style="color: #46657B;">p2</span>) {
        <span style="color: #AE5825;">return</span> p._name.compareTo(p2._name);

    }
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #C6B032;">compareTo</span>(<span style="color: #C6B032; font-style: italic;">Player</span> <span style="color: #46657B;">p</span>) {
        <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">this</span>._number - p._number;
    }
}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">TestOrder</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Player</span>[] <span style="color: #46657B;">players</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Player</span>[]{<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Player</span>(1, <span style="color: #5A7644;">"Allen"</span>),
                <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Player</span>(2, <span style="color: #5A7644;">"Wade"</span>), <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Player</span>(3, <span style="color: #5A7644;">"Benson"</span>)};
        Arrays.sort(players);
        System.out.println(Arrays.toString(players));
        Arrays.sort(players, <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Player</span>());
        System.out.println(Arrays.toString(players));
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[No:1-Name: Allen, No:2-Name: Wade, No:3-Name: Benson] //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[No:1-Name: Allen, No:3-Name: Benson, No:2-Name: Wade] //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

         <!-- Disqus Comment BEGIN -->
          <div id="disqus_thread"></div>
          <script type="text/javascript">
              var disqus_shortname = 'harrifeng';

              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

         <!-- Disqus Comment END -->
</div>
</body>
</html>
