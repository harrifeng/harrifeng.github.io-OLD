<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Chapter 11: Holding Your Objects</title>
<!-- 2015-03-18 Wed 17:27 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="your name" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>

         <link href="http://fonts.googleapis.com/css?family=Droid+Sans+Mono|Galdeano|Open+Sans:600italic,400,600|Roboto+Condensed:400,700" rel="stylesheet" type="text/css">
         <link rel="stylesheet" type="text/css" href="/static/css/main.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="http://harrifeng.github.io/sitemap.html"> UP </a>
 |
 <a accesskey="H" href="http://harrifeng.github.io/index.html"> HOME </a>
</div><div id="preamble" class="status">

         <div id="header">
            <div id="header-top">
                <div id="blog-title">Harrifeng's Path</div>
                <div id="blog-sub-title">纸上得来终觉浅,绝知此事要Coding</div>
            </div>
            <div id="nav">
                <ul>
                    <li><a href="/">首页</a></li>
                    <li><a href="/about.html">About Me</a></li>
                    <li>
                    </li>
                </ul>
            </div>
         </div>
</div>
<div id="content">
<h1 class="title">Chapter 11: Holding Your Objects</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">holding your objects</a>
<ul>
<li><a href="#sec-1-1">generics and type-safe containsers</a></li>
<li><a href="#sec-1-2">basic concepts</a></li>
<li><a href="#sec-1-3">adding groups of elements</a></li>
<li><a href="#sec-1-4">printing containers</a></li>
<li><a href="#sec-1-5">list</a></li>
<li><a href="#sec-1-6">iterator</a>
<ul>
<li><a href="#sec-1-6-1">ListIterator</a></li>
</ul>
</li>
<li><a href="#sec-1-7">LinkedList</a></li>
<li><a href="#sec-1-8">Stack</a></li>
<li><a href="#sec-1-9">Set</a></li>
<li><a href="#sec-1-10">Map</a></li>
<li><a href="#sec-1-11">Queue</a></li>
<li><a href="#sec-1-12">PriorityQueue</a></li>
<li><a href="#sec-1-13">Collection vs. Iterator</a></li>
<li><a href="#sec-1-14">Foreach and iterators</a>
<ul>
<li><a href="#sec-1-14-1">The Adapter Method idiom</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">holding your objects</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>编程当中常见的问题就是你不知道自己需要多少个对象, 对此java中的解决办法有如下:
<ul class="org-ul">
<li>数组: 可以在编译器确定自己需要多少个(一样的)对象. 但是数组的缺点很明显,长
度不可以改变
</li>
<li>容器: 在java.util里面有一系列的container class来模仿"变长的数组"
</li>
</ul>
</li>
</ul>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">generics and type-safe containsers</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>在jdk5之前,设计了一种使用容器的方式(没有generic引入之前), 这种方式的缺点就
是你无法控制用户真正放进去的是什么(顶多会有warnings, 我们下面的例子是用annotation
来控制不发出warning
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Apple</span> {
    <span style="color: #AE5825;">private</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">counter</span>;
    <span style="color: #AE5825;">private</span> <span style="color: #AE5825;">final</span> <span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">id</span> = counter++;

    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #C6B032;">id</span>() {
        <span style="color: #AE5825;">return</span> id;
    }
}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Orange</span> {
}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ApplesAndOrangesWithoutGenerics</span> {

    <span style="color: #86453A;">@SuppressWarnings</span>(<span style="color: #5A7644;">"unchecked"</span>)
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">ArrayList</span> <span style="color: #46657B;">apples</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 3; i++) {
            apples.add(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Apple</span>());
        }
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">not prevented from adding an orange to apples:</span>
        apples.add(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Orange</span>());
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; apples.<span style="color: #C6B032; font-style: italic;">size</span>(); i++) {
            ((<span style="color: #C6B032; font-style: italic;">Apple</span>) apples.get(i)).id();
        }
    }
}


<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;                                                                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Exception in thread "main" java.lang.ClassCastException: org.hfeng.tij4.holding.Orange cannot be cast to org.hfeng.tij4.holding.Apple //</span>
<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>这种问题的根源在于arraylist里面存放的是object,虽然apple和orange的对象没什么
共同点,但他们肯定都是object,所以上述问题肯定无法避免, jdk5开始引入了generic
的概念,问题得到了解决
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">ArrayList</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ApplesAndOrangesWithoutGenerics2</span> {

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Apple</span>&gt; <span style="color: #46657B;">apples</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Apple</span>&gt;();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 3; i++) {
            apples.add(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Apple</span>());
        }
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">compile-time error:</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">apples.add(new orange());</span>
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; apples.<span style="color: #C6B032; font-style: italic;">size</span>(); i++) {
            System.out.println(apples.get(i).id());
        }
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">using foreach:</span>
        <span style="color: #AE5825;">for</span>(<span style="color: #C6B032; font-style: italic;">Apple</span> <span style="color: #46657B;">c</span> : apples) {
            System.out.println(c.id());
        }
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================output===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0                                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">1                                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">2                                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0                                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">1                                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">2                                              //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>使用generic的好处是:
<ul class="org-ul">
<li>错误从runtime到了compile time
</li>
<li>不再需要cast
</li>
</ul>
</li>
<li>所有的derived class都可以被放到声明为&lt;base class&gt;的容器里面
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">ArrayList</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Grannysmith</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Apple</span> {}
<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Gala</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Apple</span> {}
<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Fuji</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Apple</span> {}
<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Braeburn</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Apple</span> {}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">GenericsAndUpcasting</span> {

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Apple</span>&gt; <span style="color: #46657B;">apples</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Apple</span>&gt;();
        apples.add(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Grannysmith</span>());
        apples.add(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Gala</span>());
        apples.add(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Fuji</span>());
        apples.add(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Braeburn</span>());

        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">Apple</span> <span style="color: #46657B;">c</span> : apples) {
            System.out.println(c);
        }
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">org.hfeng.tij4.holding.Grannysmith@b1e7b5      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">org.hfeng.tij4.holding.Gala@1e352cc            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">org.hfeng.tij4.holding.Fuji@150f2ec            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">org.hfeng.tij4.holding.Braeburn@17c8ca2        //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">basic concepts</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>java的container分成了如下的两个不同的系列:
<ul class="org-ul">
<li>collection: collection里面包含一系列的单独的数据, 而且每种collection在
数据组织方面有所侧重:
<ul class="org-ul">
<li>list按照输入的顺序存储
</li>
<li>set不能有重复的数据
</li>
<li>queue安装"先进先出"的方式服务
</li>
</ul>
</li>
<li>map: 所有的map都是一种key-value的存在, map其实是允许你使用一种object来检
索另一种object
</li>
</ul>
</li>
<li>下面就是container的类uml图,我们可以看到所有的类被清晰的分成了两大类:
<ul class="org-ul">
<li>collection

<div class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/org_dot/master/notes/java/ch11/collection.png" alt="collection.png" />
</p>
<p><span class="figure-number">Figure 1:</span> collection.png</p>
</div>
</li>
<li>map

<div class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/org_dot/master/notes/java/ch11/map.png" alt="map.png" />
</p>
<p><span class="figure-number">Figure 2:</span> map.png</p>
</div>
</li>
</ul>
</li>
<li>我们还可以看到很多的interface, 然后引出了如下的一个good practice: 你的代码
总是使用interface, 因为这样可以让你很轻松的替代底层实现机制,而同时保持接口
不变:
</li>
<li>当然,由于这些类在设计的时候,接口并不是完全一样的,会有很多新加的功能.所以,上
述用法不一定始终成功
</li>
<li>下面就是一个使用base class的例子,collection是接口,而ArrayList是它的一个子类
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">ArrayList</span>;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Collection</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">SimpleCollection</span> {

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Collection</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">c</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 10; i++) {
            c.add(i);  <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">autoboxing</span>
        }
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">Integer</span> <span style="color: #46657B;">i</span> : c) {
            System.out.print(i + <span style="color: #5A7644;">" "</span>);
        }
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================output===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0 1 2 3 4 5 6 7 8 9                            //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">adding groups of elements</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>这里介绍一些一次加入很多成员的函数,常见的就是arrays.aslist 和 collections.addall
两种. collections.addall速度快. 而arrays.aslist灵活.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">AddingGroups</span> {

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Collection</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">collection</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;(Arrays.asList(1, 2, 3, 4, 5));
        <span style="color: #C6B032; font-style: italic;">Integer</span>[] <span style="color: #46657B;">moreints</span> = {6, 7, 8, 9, 10};
        Collections.addAll(Arrays.asList(moreints));
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">runs significantly faster, but you can't</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">construct a collection this way:</span>
        Collections.addAll(collection, 11, 12, 13, 14, 15);
        Collections.addAll(collection, moreints);
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">produces a list "backed by" an array:</span>
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">list</span> = Arrays.asList(16, 17, 18, 19, 20);
        list.set(1, 99); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">ok -- modify an element</span>
        System.out.println(list);
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">list.add(21); // runtime error because the underlying</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">array cannot be resized.</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">produces a list "backed by" an arraylist,</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">which is more flexible.</span>
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">list2</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;(Arrays.asList(16, 17, 18, 19, 20));
        list2.add(21);
        list2.set(0, 99);
        System.out.println(list2);
    }

}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[16, 99, 18, 19, 20]                           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[99, 17, 18, 19, 20, 21]                       //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>上面的例子我们注意到,如果你直接使用arrays.aslist给了list接口的话,数组内部固
定大小的实现机制会导致你无法add. 用arraylist嵌套一次就可以了.
</li>
<li>arrays.aslist()在添加不同derived object的时候,会使用奇怪的语法.所以不如
collections.addall好用
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Snow</span> {}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Powder</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Snow</span> {}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Light</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Powder</span> {}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Heavy</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Powder</span> {}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Crusty</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Snow</span> {}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Slush</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Snow</span> {}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">AsListInference</span> {

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Snow</span>&gt; <span style="color: #46657B;">snow1</span> = Arrays.asList(
                <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Crusty</span>(), <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Slush</span>(), <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Powder</span>());
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">collections.addall() doesnn't get confused:</span>
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Snow</span>&gt; <span style="color: #46657B;">snow3</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Snow</span>&gt;();
        Collections.addAll(snow3, <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Light</span>(), <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Heavy</span>());
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">give a hint using an</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">explicit type argument specification:</span>
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Snow</span>&gt; <span style="color: #46657B;">snow4</span> = Arrays.&lt;Snow&gt;asList(
                <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Light</span>(), <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Heavy</span>());
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">very easy to wrongly used as following</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">compiler syas:</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">found    : java.util.list&lt;powder&gt;</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">required : java.util.list&lt;snow&gt;</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">list&lt;snow&gt; snow2 = arrays.aslist(</span>
        <span style="color: #4C565D;">//    </span><span style="color: #333B40; font-style: italic;">new light(), new heavy());</span>
    }
}
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">printing containers</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>system.out.println可以直接打印这些container(如果是内置数组,可以使用arrays.tostring)
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">PrintingContainers</span> {
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Collection</span> <span style="color: #C6B032;">fill</span>(<span style="color: #C6B032; font-style: italic;">Collection</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">collection</span>) {
        collection.add(<span style="color: #5A7644;">"rat"</span>);
        collection.add(<span style="color: #5A7644;">"cat"</span>);
        collection.add(<span style="color: #5A7644;">"dog"</span>);
        collection.add(<span style="color: #5A7644;">"dog"</span>);
        <span style="color: #AE5825;">return</span> collection;
    }
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Map</span> <span style="color: #C6B032;">fill</span>(<span style="color: #C6B032; font-style: italic;">Map</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>, <span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">map</span>) {
        map.put(<span style="color: #5A7644;">"rat"</span>, <span style="color: #5A7644;">"fuzzy"</span>);
        map.put(<span style="color: #5A7644;">"cat"</span>, <span style="color: #5A7644;">"rags"</span>);
        map.put(<span style="color: #5A7644;">"dog"</span>, <span style="color: #5A7644;">"bosco"</span>);
        map.put(<span style="color: #5A7644;">"dog"</span>, <span style="color: #5A7644;">"spot"</span>);
        <span style="color: #AE5825;">return</span> map;
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        System.out.println(fill(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;()));
        System.out.println(fill(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;()));
        System.out.println(fill(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;()));
        System.out.println(fill(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">TreeSet</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;()));
        System.out.println(fill(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedHashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;()));
        System.out.println(fill(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashMap</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>, <span style="color: #C6B032; font-style: italic;">String</span>&gt;()));
        System.out.println(fill(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">TreeMap</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>, <span style="color: #C6B032; font-style: italic;">String</span>&gt;()));
        System.out.println(fill(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedHashMap</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>, <span style="color: #C6B032; font-style: italic;">String</span>&gt;()));
    }
}

<span style="color: #4C565D;">/////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================output===================&gt;  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[rat, cat, dog, dog]                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[rat, cat, dog, dog]                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[cat, dog, rat]                                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[cat, dog, rat]                                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[rat, cat, dog]                                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">{cat=rags, dog=spot, rat=fuzzy}                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">{cat=rags, dog=spot, rat=fuzzy}                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">{rat=fuzzy, cat=rags, dog=spot}                 //</span>
<span style="color: #4C565D;">/////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>从上面的打印数据看,也契合了我们对container的理解.分成了两个部分:
<ul class="org-ul">
<li>collection:
<ol class="org-ol">
<li>list: 静态存储一系列数据
</li>
<li>set: 存储数据的同时要求不能有重复
</li>
<li>queue: 存储的同时要求从一边存.另外一边取
</li>
</ol>
</li>
<li>map: key-value方式存储.
</li>
</ul>
</li>
<li>从结果我们可以看到arraylist和linkedlist输出和输入顺序是一样的(它俩的区别在于
一个是使用连续内存,一个是不连续内存)
</li>
<li>三个set, hashset, treeset, linkedhashset都是去重的.他们的区别在于:
<ul class="org-ul">
<li>hashset速度最快,因为它只考虑了set最本质的东西:从一个集合里面询问一个成员是
否存在.所以它的内容存放是无序的
</li>
<li>treeset:是加强版hashset,完成功能,牺牲一点效率让存放的顺序固定(元素的增序,
需要实现comparable接口).
</li>
<li>linkedhashset:也是加强版的hashset,完成功能的,牺牲一点效率让存放顺序固定(
按照存入的顺序)
</li>
</ul>
</li>
<li>三个map,都是key-value, 因为key不能重复,所以也只有三个元素.他们的区别在于:
<ul class="org-ul">
<li>hashmap速度最快,因为它只考虑了map最本质的东西:通过一个key来查找value
</li>
<li>treemap:是加强版hashmap,完成功能,牺牲一点效率让存放的顺序固定(key的增序,
需要实现comparable接口).
</li>
<li>linkedhashmap:也是加强版的hashmap,完成功能的,牺牲一点效率让存放顺序固定(
按照存入的顺序)
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">list</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>list能够保证让数据以某种特定的顺序存着. 相比于collection, list增加了在数据
中间进行操作的接口
</li>
<li>list有两种类型:
<ul class="org-ul">
<li>arraylist: 和stl里面的vector很像,使用连续内存, 方便随机访问
</li>
<li>linkedlist: 和stl里面的list很像,使用不连续的内存, 方便插入操作
</li>
</ul>
</li>
<li>下面就是一个list使用的例子, 里面的object多是pet的子类
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ListFeatures</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">pets</span> = Pets.arrayList(7);
        System.out.println(<span style="color: #5A7644;">"1: "</span> + pets);
        <span style="color: #C6B032; font-style: italic;">Hamster</span> <span style="color: #46657B;">h</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Hamster</span>();
        pets.add(h); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Automatically resizes</span>
        System.out.println(<span style="color: #5A7644;">"2: "</span> + pets);
        System.out.println(<span style="color: #5A7644;">"3: "</span> + pets.contains(h));
        pets.remove(h); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Remove by object</span>
        <span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">p</span> = pets.get(2);
        System.out.println(<span style="color: #5A7644;">"4: "</span> + p + <span style="color: #5A7644;">" "</span> + pets.indexOf(p));
        <span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">cymric</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cymric</span>();
        System.out.println(<span style="color: #5A7644;">"5: "</span> + pets.indexOf(cymric));
        System.out.println(<span style="color: #5A7644;">"6: "</span> + pets.remove(cymric));
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Must be the exact object:</span>
        System.out.println(<span style="color: #5A7644;">"7: "</span> + pets.remove(p));
        System.out.println(<span style="color: #5A7644;">"8: "</span> + pets);
        pets.add(3, <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Mouse</span>()); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Insert at an index</span>
        System.out.println(<span style="color: #5A7644;">"9: "</span> + pets);
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">sub</span> = pets.subList(1, 4);
        System.out.println(<span style="color: #5A7644;">"subList: "</span> + sub);
        System.out.println(<span style="color: #5A7644;">"10: "</span> + pets.containsAll(sub));
        Collections.sort(sub); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">In-place sort</span>
        System.out.println(<span style="color: #5A7644;">"Sorted subList: "</span> + sub);
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Order is not important in containsAll()</span>
        System.out.println(<span style="color: #5A7644;">"11: "</span> + pets.containsAll(sub));
        Collections.shuffle(sub, rand); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Mix it up</span>
        System.out.println(<span style="color: #5A7644;">"shuffled subList: "</span> + sub);
        System.out.println(<span style="color: #5A7644;">"12: "</span> + pets.containsAll(sub));
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">copy</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;(pets);
        sub = Arrays.asList(pets.get(1), pets.get(4));
        System.out.println(<span style="color: #5A7644;">"sub: "</span> + sub);
        copy.retainAll(sub);
        System.out.println(<span style="color: #5A7644;">"13: "</span> + copy);
        copy = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;(pets); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Get a fresh copy</span>
        copy.remove(2);   <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Remove by index</span>
        System.out.println(<span style="color: #5A7644;">"14: "</span> + copy);
        copy.removeAll(sub); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Only removes exact objects</span>
        System.out.println(<span style="color: #5A7644;">"15: "</span> + copy);
        copy.set(1, <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Mouse</span>()); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Replace an element</span>
        System.out.println(<span style="color: #5A7644;">"16: "</span> + copy);
        copy.addAll(2, sub); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Insert a list in the middle</span>
        System.out.println(<span style="color: #5A7644;">"17: "</span> + copy);
        System.out.println(<span style="color: #5A7644;">"18: "</span> + pets.isEmpty());
        pets.clear(); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Remove all elements</span>
        System.out.println(<span style="color: #5A7644;">"19: "</span> + pets);
        System.out.println(<span style="color: #5A7644;">"20: "</span> + pets.isEmpty());
        pets.addAll(Pets.arrayList(4));
        System.out.println(<span style="color: #5A7644;">"21: "</span> + pets);
        <span style="color: #C6B032; font-style: italic;">Object</span>[] <span style="color: #46657B;">o</span> = pets.toArray();
        System.out.println(<span style="color: #5A7644;">"22: "</span> + o[3]);
        <span style="color: #C6B032; font-style: italic;">Pet</span>[] <span style="color: #46657B;">pa</span> = pets.toArray(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Pet</span>[0]);
        System.out.println(<span style="color: #5A7644;">"23: "</span> + pa[3].id());
    }
}

<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">1: [Rat, Manx, Cymric, Mutt, Pug, Cymric, Pug]          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">2: [Rat, Manx, Cymric, Mutt, Pug, Cymric, Pug, Hamster] //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">3: true                                                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">4: Cymric 2                                             //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">5: -1                                                   //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">6: false                                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">7: true                                                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">8: [Rat, Manx, Mutt, Pug, Cymric, Pug]                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">9: [Rat, Manx, Mutt, Mouse, Pug, Cymric, Pug]           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">subList: [Manx, Mutt, Mouse]                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">10: true                                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Sorted subList: [Manx, Mouse, Mutt]                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">11: true                                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">shuffled subList: [Mouse, Manx, Mutt]                   //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">12: true                                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">sub: [Mouse, Pug]                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">13: [Mouse, Pug]                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">14: [Rat, Mouse, Mutt, Pug, Cymric, Pug]                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">15: [Rat, Mutt, Cymric, Pug]                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">16: [Rat, Mouse, Cymric, Pug]                           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">17: [Rat, Mouse, Mouse, Pug, Cymric, Pug]               //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">18: false                                               //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">19: []                                                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">20: true                                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">21: [Manx, Cymric, Rat, EgyptianMau]                    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">22: EgyptianMau                                         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">23: 14                                                  //</span>
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>从上面的例子我们可以看到list的几种常用用法:
<ul class="org-ul">
<li>使用contains()来判断容器内是否含有
</li>
<li>使用remove()来去除
</li>
<li>使用indexof()来得知某个object的位置
</li>
</ul>
</li>
<li>上面的这些操作中indexof(), remove()都是使用的equals()函数,如果没有实现equals
函数的话,那么就是比较id,没有两个object的id是一致的.
</li>
<li>sublist()是用来获得一个slice的, 而containsall()是判断一个slice是否在自己的
内部的.
</li>
<li>collections的两个函数sort肯定是排序(in-place), shuffle是打乱顺序.
</li>
<li>retainall()用来,两个list求"交集"
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6">iterator</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>使用多种的container的话,可以方便的遍历,比如List,只需要add()添加, get()获取,
但是时间长了,诞生了新的需求:一套机制可以在不同的容器间通用,从而一套代码可以既
遍历数组,又遍历LinkedList
<ul class="org-ul">
<li>遍历一个数组的方法是使用索引
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">for</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span>=0; i&lt;array.<span style="color: #C6B032; font-style: italic;">size</span>(); i++) {
    get(i);
}
</pre>
</div>
</li>
<li>而访问一个链表（LinkedList）又必须使用while循环
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">while</span>((e=e.next())!=<span style="color: #86453A;">null</span>) {
    e.data();
}
</pre>
</div>
</li>
</ul>
</li>
<li>这种需求的解决方法就是Iterator design pattern: 在一个序列里面一直往下走,不管
底层是按照怎样的顺序进行存储的. Iterator模式总是用同一种逻辑来遍历集合
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">for</span>(<span style="color: #C6B032; font-style: italic;">Iterator</span> <span style="color: #46657B;">it</span> = c.iterater(); it.hasNext();) {
    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">...</span>
}
</pre>
</div>
</li>

<li>在Java中Iterator的设计是一个Interface, 非常轻量级的interface.这个interface
用来指向每一个元素.依次往下
</li>
<li>Iterator只要遍历,所以其功能也非常有限:
<ol class="org-ol">
<li>所有的Collection都会有一个iterator函数(工厂方法)来返回第一个成员变量的
iterator
</li>
<li>通过next()函数来获取下一个iterator
</li>
<li>通过hasNext()查看是否有更多的objects
</li>
<li>通过remove()来移除iterator指向的当前成员. 要注意的是,并不是所有的container
都实现了这个方法.
</li>
</ol>
</li>
<li>下面就是Iterator的一个使用举例
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Iterator</span>;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">List</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">SimpleIteration</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">pets</span> = Pets.arrayList(12);
        <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">it</span> = pets.iterator();

        <span style="color: #AE5825;">while</span>(it.hasNext()) {
            <span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">p</span> = it.next();
            System.out.print(p.id() + <span style="color: #5A7644;">":"</span> + p + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">A simpler approach, when possible</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">foreach is also an iterator</span>
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">p</span> : pets) {
            System.out.print(p.id() + <span style="color: #5A7644;">":"</span> + p + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">An Iterator can also remove elements:</span>
        it = pets.iterator();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 6; i++) {
            it.next();
            it.remove();
        }
        System.out.println(pets);
    }
}
<span style="color: #4C565D;">//////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0:Rat 1:Manx 2:Cymric 3:Mutt 4:Pug 5:Cymric 6:\      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Pug 7:Manx 8:Cymric 9:Rat 10:EgyptianMau 11:Hamster  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0:Rat 1:Manx 2:Cymric 3:Mutt 4:Pug 5:Cymric 6:\      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Pug 7:Manx 8:Cymric 9:Rat 10:EgyptianMau 11:Hamster  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[Pug, Manx, Cymric, Rat, EgyptianMau, Hamster]       //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>下面就是一个在Iterator的帮助下,跨container的使用一套打印方法的例子
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">CrossContainerIteration</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">display</span>(<span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">it</span>) {
        <span style="color: #AE5825;">while</span> (it.hasNext()) {
            <span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">p</span> = it.next();
            System.out.print(p.id() + <span style="color: #5A7644;">":"</span> + p + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();;
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">pets</span> = Pets.arrayList(8);
        <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">petsLL</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;(pets);
        <span style="color: #C6B032; font-style: italic;">HashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">petsHS</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;(pets);
        <span style="color: #C6B032; font-style: italic;">TreeSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">petsTS</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">TreeSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;(pets);
        display(pets.iterator());
        display(petsLL.iterator());
        display(petsHS.iterator());
        display(petsTS.iterator());
    }
}
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0:Rat 1:Manx 2:Cymric 3:Mutt 4:Pug 5:Cymric 6:Pug 7:Manx //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0:Rat 1:Manx 2:Cymric 3:Mutt 4:Pug 5:Cymric 6:Pug 7:Manx //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">2:Cymric 1:Manx 0:Rat 6:Pug 5:Cymric 4:Pug 3:Mutt 7:Manx //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">5:Cymric 2:Cymric 7:Manx 1:Manx 3:Mutt 6:Pug 4:Pug 0:Rat //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1">ListIterator</h4>
<div class="outline-text-4" id="text-1-6-1">
<ul class="org-ul">
<li>ListIterator 是Iterator的一个功能更强的子类,其不仅可以向前,还可以向后.而且
还能指定index位置.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ListIteration</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">pets</span> = Pets.arrayList(8);
        <span style="color: #C6B032; font-style: italic;">ListIterator</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">it</span> = pets.listIterator();

        <span style="color: #AE5825;">while</span> (it.hasNext()) {
            System.out.print(it.next() + <span style="color: #5A7644;">", "</span> + it.nextIndex() +
                             <span style="color: #5A7644;">", "</span> + it.previousIndex() + <span style="color: #5A7644;">"; "</span>);
        }
        System.out.println();
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Backwards:</span>
        <span style="color: #AE5825;">while</span> (it.hasPrevious()) {
            System.out.print(it.previous().id() + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
        System.out.println(pets);
        it = pets.listIterator(3);
        <span style="color: #AE5825;">while</span> (it.hasNext()) {
            it.next();
            it.set(Pets.randomPet());
        }
        System.out.println(pets);
    }
}
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Rat, 1, 0; Manx, 2, 1; Cymric, 3, 2; Mutt, 4, 3; Pug, 5, 4; \       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Cymric, 6, 5; Pug, 7, 6; Manx, 8, 7;                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">7 6 5 4 3 2 1 0                                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[Rat, Manx, Cymric, Mutt, Pug, Cymric, Pug, Manx]                   //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[Rat, Manx, Cymric, Cymric, Rat, EgyptianMau, Hamster, EgyptianMau] //</span>
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7">LinkedList</h3>
<div class="outline-text-3" id="text-1-7">
<ul class="org-ul">
<li>LinkedList实现了了List接口, 使用不连续内存的底层结构
</li>
<li>LinkedList还同时实现了Queue的接口,所以我们还可以把它当做Queue(甚至是dqueue,
stack)来使用.
</li>
<li>由于实现了Queue接口的缘故:
<ul class="org-ul">
<li>removeFirst()就等于remove(), Queue移除是从头部
</li>
<li>addLast() 就等于add(), Queue加入是从尾部
</li>
</ul>
</li>
<li>removeLast(), addFirt() 就是remove 和 add的相反操作了,可以用来实现stack
</li>
<li>下面就是一个例子
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">LinkedListFeatures</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">pets</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;(Pets.arrayList(5));

        System.out.println(pets);
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Identical:</span>
        System.out.println(<span style="color: #5A7644;">"pets.getFirst(): "</span> + pets.getFirst());
        System.out.println(<span style="color: #5A7644;">"pets.element(): "</span> + pets.element());

        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Olny differs in empty-list behavior:</span>
        System.out.println(<span style="color: #5A7644;">"pets.peek(): "</span> + pets.peek());

        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Identical; remove and return the first element:</span>
        System.out.println(<span style="color: #5A7644;">"pets.remove(): "</span> + pets.remove());
        System.out.println(<span style="color: #5A7644;">"pets.removeFirst(): "</span> + pets.removeFirst());

        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Only differs in empty-list behavior:</span>
        System.out.println(<span style="color: #5A7644;">"pets.poll(): "</span> + pets.poll());
        System.out.println(pets);

        pets.addFirst(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Rat</span>());
        System.out.println(<span style="color: #5A7644;">"After addFirst(): "</span> + pets);

        pets.offer(Pets.randomPet());
        System.out.println(<span style="color: #5A7644;">"After offer(): "</span> + pets);

        pets.add(Pets.randomPet());
        System.out.println(<span style="color: #5A7644;">"After add(): "</span> + pets);

        pets.addLast(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Hamster</span>());
        System.out.println(<span style="color: #5A7644;">"After addLast(): "</span> + pets);

        System.out.println(<span style="color: #5A7644;">"pets.removeLast(): "</span> + pets.removeLast());

    }
}
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[Rat, Manx, Cymric, Mutt, Pug]                          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">pets.getFirst(): Rat                                    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">pets.element(): Rat                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">pets.peek(): Rat                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">pets.remove(): Rat                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">pets.removeFirst(): Manx                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">pets.poll(): Cymric                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[Mutt, Pug]                                             //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">After addFirst(): [Rat, Mutt, Pug]                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">After offer(): [Rat, Mutt, Pug, Cymric]                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">After add(): [Rat, Mutt, Pug, Cymric, Pug]              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">After addLast(): [Rat, Mutt, Pug, Cymric, Pug, Hamster] //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">pets.removeLast(): Hamster                              //</span>
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8">Stack</h3>
<div class="outline-text-3" id="text-1-8">
<ul class="org-ul">
<li>这里讨论的Stack不是java.util.Stack, 而是我们利用LinkedList来自己实现的一个
Stack, 代码如下
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">util</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">LinkedList</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Stack</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; {
    <span style="color: #AE5825;">private</span> <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #46657B;">storage</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; ();
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">push</span>(<span style="color: #C6B032; font-style: italic;">T</span> <span style="color: #46657B;">v</span>) {
        storage.addFirst(v);
    }
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">T</span> <span style="color: #C6B032;">peek</span>() {
        <span style="color: #AE5825;">return</span> storage.getFirst();
    }
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">T</span> <span style="color: #C6B032;">pop</span>() {
        <span style="color: #AE5825;">return</span> storage.removeFirst();
    }
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #C6B032;">empty</span>() {
        <span style="color: #AE5825;">return</span> storage.isEmpty();
    }
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #C6B032;">toString</span>() {
        <span style="color: #AE5825;">return</span> storage.toString();
    }
}
</pre>
</div>
</li>
<li>我们可以看到,我们是通过组合(composition),而不是继承来实现的Stack. 继承的代价
太高, 需要实现基类的所有函数接口. java.util.Stack就犯了这个错误. 我们没有.
</li>
<li>下面是我们自己的Stack的使用举例.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Stack</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">StackTest</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Stack</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">stack</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Stack</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : <span style="color: #5A7644;">"My dog has fleas"</span>.split(<span style="color: #5A7644;">" "</span>)) {
            stack.push(s);
        }
        <span style="color: #AE5825;">while</span> (!stack.empty()) {
            System.out.print(stack.pop() + <span style="color: #5A7644;">" "</span>);
        }
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">fleas has dog My                               //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9">Set</h3>
<div class="outline-text-3" id="text-1-9">
<ul class="org-ul">
<li>set最主要的特性是不含重复元素, 而最重要的操作就是查询某一个元素是否在某个set
里面. 反而元素在set里面的存储的顺序不是太重要. 如果用户不关心存储顺序,那么最
好使用HashSet, 因为其再查询速度方面是最快的
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">SetOfInteger</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        <span style="color: #C6B032; font-style: italic;">Set</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">intset</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 10000; i++) {
            intset.add(rand.nextInt(30));
        }
        System.out.println(intset);
    }
}
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, \ //</span>
<span style="color: #4C565D;">//  </span><span style="color: #333B40; font-style: italic;">17, 16, 19, 18, 21, 20, 23, 22, 25, 24, 27, 26, 29, 28] //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>如果你还在意存储的顺序,那么可以使用TreeSet
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">SortedSetOfInteger</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        <span style="color: #C6B032; font-style: italic;">SortedSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">intset</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">TreeSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 10000; i++) {
            intset.add(rand.nextInt(30));
        }
        System.out.println(intset);
    }
}

<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, \ //</span>
<span style="color: #4C565D;">//  </span><span style="color: #333B40; font-style: italic;">16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29] //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>Set最重要的函数就是contains,可以一个元素或者一个集合是否存在于本集合
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">SetOperations</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Set</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">set1</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;();
        Collections.addAll(set1, <span style="color: #5A7644;">"A B C D E F G H I J K L"</span>.split(<span style="color: #5A7644;">" "</span>));
        set1.add(<span style="color: #5A7644;">"M"</span>);
        System.out.println(<span style="color: #5A7644;">"H: "</span> + set1.contains(<span style="color: #5A7644;">"H"</span>));
        System.out.println(<span style="color: #5A7644;">"N: "</span> + set1.contains(<span style="color: #5A7644;">"N"</span>));
        <span style="color: #C6B032; font-style: italic;">Set</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">set2</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;();
        Collections.addAll(set2, <span style="color: #5A7644;">"H I J K L"</span>.split(<span style="color: #5A7644;">" "</span>));
        System.out.println(<span style="color: #5A7644;">"set2 in set1:"</span> + set1.containsAll(set2));
        set1.remove(<span style="color: #5A7644;">"H"</span>);
        System.out.println(<span style="color: #5A7644;">"set1: "</span> + set1);
        System.out.println(<span style="color: #5A7644;">"set2 in set1:"</span> + set1.containsAll(set2));
        set1.removeAll(set2);
        System.out.println(<span style="color: #5A7644;">"set2 removed from set1: "</span> + set1);
        Collections.addAll(set1, <span style="color: #5A7644;">"X Y Z"</span>.split(<span style="color: #5A7644;">" "</span>));
        System.out.println(<span style="color: #5A7644;">"'X Y Z' added to set1: "</span> + set1);
    }
}
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">H: true                                                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">N: false                                                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">set2 in set1:true                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">set1: [D, E, F, G, A, B, C, L, M, I, J, K]               //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">set2 in set1:false                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">set2 removed from set1: [D, E, F, G, A, B, C, M]         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">'X Y Z' added to set1: [D, E, F, G, A, B, C, M, Y, X, Z] //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10">Map</h3>
<div class="outline-text-3" id="text-1-10">
<ul class="org-ul">
<li>Map是"用object来寻找object"的一种container. 下面的例子中,我们给出一系列的随
机数, 使用一个HashMap来存储&lt;Index, CountOfIndex&gt;, 最终看看随机是是否平均.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Statistics</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        <span style="color: #C6B032; font-style: italic;">Map</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>, <span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">m</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashMap</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>, <span style="color: #C6B032; font-style: italic;">Integer</span>&gt;();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 10000; i++) {
            <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Produce a number between 0 and 20:</span>
            <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">r</span> = rand.nextInt(20);
            <span style="color: #C6B032; font-style: italic;">Integer</span> <span style="color: #46657B;">freq</span> = m. get(r);
            m.put(r, freq == <span style="color: #86453A;">null</span> ? 1 : freq + 1);
        }
        System.out.println(m);
    }
}

<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">{0=481, 1=502, 2=489, 3=508, 4=481, 5=503, 6=519, \     //</span>
<span style="color: #4C565D;">//  </span><span style="color: #333B40; font-style: italic;">7=471, 8=468, 9=549, 10=513, 11=531, 12=521, 13=506, \ //</span>
<span style="color: #4C565D;">//  </span><span style="color: #333B40; font-style: italic;">14=477, 15=497, 17=509, 16=533, 19=464, 18=478}        //</span>
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>下面就是一个HashMap的常规用法了，通过一个object(String)来查询另一个Object
(Pet), 还可以通过containsKey和containsValue来分别查询key和value
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;


<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">PetMap</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Map</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>, <span style="color: #C6B032; font-style: italic;">Pet</span>&gt;  <span style="color: #46657B;">petMap</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashMap</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>, <span style="color: #C6B032; font-style: italic;">Pet</span>&gt;();
        petMap.put(<span style="color: #5A7644;">"My Cat"</span>, <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cat</span>(<span style="color: #5A7644;">"Molly"</span>));
        petMap.put(<span style="color: #5A7644;">"My Dog"</span>, <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Dog</span>(<span style="color: #5A7644;">"Ginger"</span>));
        petMap.put(<span style="color: #5A7644;">"My Hamster"</span>, <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Hamster</span>(<span style="color: #5A7644;">"Bosco"</span>));
        System.out.println(petMap);
        <span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">dog</span> = petMap.get(<span style="color: #5A7644;">"My Dog"</span>);
        System.out.println(dog);
        System.out.println(petMap.containsKey(<span style="color: #5A7644;">"My Dog"</span>));
        System.out.println(petMap.containsValue(dog));
    }
}
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">{My Dog=Dog Ginger, My Cat=Cat Molly, My Hamster=Hamster Bosco} //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Dog Ginger                                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">true                                                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">true                                                            //</span>
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>Map的成员是object, 这些object当然也可以是其他Collection
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">MapOfList</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Map</span>&lt;<span style="color: #C6B032; font-style: italic;">Person</span>, <span style="color: #C6B032; font-style: italic;">List</span>&lt;? <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Pet</span>&gt;&gt; <span style="color: #46657B;">petPeople</span> =
           <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashMap</span>&lt;<span style="color: #C6B032; font-style: italic;">Person</span>, <span style="color: #C6B032; font-style: italic;">List</span>&lt;? <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">Pet</span>&gt;&gt;();
    <span style="color: #AE5825;">static</span> {
        petPeople.put(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Person</span>(<span style="color: #5A7644;">"Dawn"</span>),
                      Arrays.asList(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cymric</span>(<span style="color: #5A7644;">"Molly"</span>), <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Mutt</span>(<span style="color: #5A7644;">"Spot"</span>)));
        petPeople.put(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Person</span>(<span style="color: #5A7644;">"Kate"</span>),
                      Arrays.asList(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cat</span>(<span style="color: #5A7644;">"Shackleton"</span>),
                                    <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cat</span>(<span style="color: #5A7644;">"Elsie May"</span>),
                                    <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Dog</span>(<span style="color: #5A7644;">"Margrett"</span>)));
        petPeople.put(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Person</span>(<span style="color: #5A7644;">"Marilyn"</span>),
                      Arrays.asList(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Pug</span>(<span style="color: #5A7644;">"Louie aka Louis Snorkelstein Dupree"</span>),
                                    <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cat</span>(<span style="color: #5A7644;">"Standard aka Stinky el Negro"</span>),
                                    <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cat</span>(<span style="color: #5A7644;">"Pinkola"</span>)));
        petPeople.put(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Person</span>(<span style="color: #5A7644;">"Luke"</span>),
                      Arrays.asList(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Rat</span>(<span style="color: #5A7644;">"Fuzzy"</span>),
                                    <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Rat</span>(<span style="color: #5A7644;">"Fizzy"</span>)));
        petPeople.put(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Person</span>(<span style="color: #5A7644;">"Isaac"</span>),
                      Arrays.asList(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Rat</span>(<span style="color: #5A7644;">"Freckly"</span>)));
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        System.out.println(<span style="color: #5A7644;">"People: "</span> + petPeople.keySet());
        System.out.println(<span style="color: #5A7644;">"Pets: "</span> + petPeople.values());
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">Person</span> <span style="color: #46657B;">person</span> : petPeople.keySet()) {
            System.out.println(person + <span style="color: #5A7644;">" has"</span>);
            <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">pet</span> : petPeople.get(person)) {
                System.out.println(<span style="color: #5A7644;">"    "</span> + pet);
            }
        }
    }
}

<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">People: [Person Marilyn, Person Dawn, Person Luke, \          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Person Isaac, Person Kate]                                    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Pets: [[Pug Louie aka Louis Snorkelstein Dupree, \            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Cat Standard aka Stinky el Negro, Cat Pinkola], \             //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[Cymric Molly, Mutt Spot], [Rat Fuzzy, Rat Fizzy], \          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[Rat Freckly], [Cat Shackleton, Cat Elsie May, Dog Margrett]] //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Person Marilyn has                                            //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Pug Louie aka Louis Snorkelstein Dupree                   //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Cat Standard aka Stinky el Negro                          //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Cat Pinkola                                               //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Person Dawn has                                               //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Cymric Molly                                              //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Mutt Spot                                                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Person Luke has                                               //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Rat Fuzzy                                                 //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Rat Fizzy                                                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Person Isaac has                                              //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Rat Freckly                                               //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Person Kate has                                               //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Cat Shackleton                                            //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Cat Elsie May                                             //</span>
<span style="color: #4C565D;">//     </span><span style="color: #333B40; font-style: italic;">Dog Margrett                                              //</span>
<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-11" class="outline-3">
<h3 id="sec-1-11">Queue</h3>
<div class="outline-text-3" id="text-1-11">
<ul class="org-ul">
<li>Queue是一种"先进先出"的容器.也就是从后面插入(addLast),从前面移除(removeFirst)
</li>
<li>LinkedList由于其不连续内存的特殊结构,非常适合实现Queue的接口,世界上,它也实
现了.如下就是upcast LinkedList到Queue的用法.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">QueueDemo</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">printQ</span>(<span style="color: #C6B032; font-style: italic;">Queue</span> <span style="color: #46657B;">queue</span>) {
        <span style="color: #AE5825;">while</span>(queue.peek() != <span style="color: #86453A;">null</span>) {
            System.out.println(queue.remove() + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
    }
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Queue</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">queue</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;();
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 10; i++) {
            queue.offer(rand.nextInt(i + 10));
        }
        System.out.println(queue);
        <span style="color: #C6B032; font-style: italic;">Queue</span>&lt;<span style="color: #C6B032; font-style: italic;">Character</span>&gt; <span style="color: #46657B;">qc</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">Character</span>&gt;();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">char</span> <span style="color: #46657B;">c</span> : <span style="color: #5A7644;">"Brontosaurus"</span>.toCharArray()) {
            qc.offer(c);
        }
        System.out.println(qc);
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[8, 1, 1, 1, 5, 14, 3, 1, 0, 1]                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[B, r, o, n, t, o, s, a, u, r, u, s]           //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>Queue借口的经典函数,名字比较拗口:
<ul class="org-ul">
<li>offer()是在后面插入
</li>
<li>peek()是查看前面第一个,为空返回null, element()查看前面第一个,为空exception
</li>
<li>poll()是移除前面第一个,为空返回null, element()移除前面第一个,为空exception
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-12" class="outline-3">
<h3 id="sec-1-12">PriorityQueue</h3>
<div class="outline-text-3" id="text-1-12">
<ul class="org-ul">
<li>优先队列是队列的一个变体.其区别在于:
<ul class="org-ul">
<li>队列其哲学是保证"下一个出去的等待实现最长的"
</li>
<li>优先队列其哲学是保证"下一个出去的是队列中优先级最高的", 比如在机场,A可能
比B排队时间长, 但是B的飞机快起飞了,B的优先级就大于A
</li>
</ul>
</li>
<li>有限队列在加入(offer)的时候, 可能是预先排好队的,排队的顺序可以指定(通过Comparator
提供). 说是可能,是因为有些实现是当你remove的时候才去临时排序找"最优先"的,存
储的时候,不一定都排序好.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">PriorityQueueDemo</span> {

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">priorityQueue</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;();
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 10; i++) {
            priorityQueue.offer(rand.nextInt(i + 10));
        }
        QueueDemo.printQ(priorityQueue);

        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">ints</span> = Arrays.asList(25, 22, 20,18, 14, 9, 3, 1, 1, 2, 3,
                                           9, 14, 18, 21, 23, 25);
        priorityQueue = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;(ints);
        QueueDemo.printQ(priorityQueue);
        priorityQueue = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;(ints.size(),
                                                   Collections.reverseOrder());
        priorityQueue.addAll(ints);
        QueueDemo.printQ(priorityQueue);

        <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">fact</span> = <span style="color: #5A7644;">"EDUCATION SHOULD EESCHEW OBFUSCATION"</span>;
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">strings</span> = Arrays.asList(fact.split(<span style="color: #5A7644;">""</span>));
        <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">stringPQ</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;(strings);
        QueueDemo.printQ(stringPQ);
        stringPQ = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;(strings.size(),
                                             Collections.reverseOrder());
        stringPQ.addAll(strings);
        QueueDemo.printQ(stringPQ);

        <span style="color: #C6B032; font-style: italic;">Set</span>&lt;<span style="color: #C6B032; font-style: italic;">Character</span>&gt; <span style="color: #46657B;">charSet</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Character</span>&gt;();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">char</span> <span style="color: #46657B;">c</span> : fact.toCharArray()) {
            charSet.add(c); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Autoboxing</span>
        }
        <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">Character</span>&gt; <span style="color: #46657B;">characterPQ</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">PriorityQueue</span>&lt;<span style="color: #C6B032; font-style: italic;">Character</span>&gt;(charSet);
        QueueDemo.printQ(characterPQ);
    }
}
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;                           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0 1 1 1 1 1 3 5 8 14                                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">1 1 2 3 3 9 9 14 14 18 18 20 21 22 23 25 25                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">25 25 23 22 21 20 18 18 14 14 9 9 3 3 2 1 1                              //</span>
<span style="color: #4C565D;">//       </span><span style="color: #333B40; font-style: italic;">A A B C C C D D E E E E F H H I I L N N O O O O S S S T T U U U W  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">W U U U T T S S S O O O O N N L I I H H F E E E E D D C C C B A A        //</span>
<span style="color: #4C565D;">//   </span><span style="color: #333B40; font-style: italic;">A B C D E F H I L N O S T U W                                          //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>上面的例子中, Collections.reverseOrder(). 就是一种Comparator.
</li>
<li>最后一个例子,使用了HashSet来初始化优先队列,可以去除重复.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-13" class="outline-3">
<h3 id="sec-1-13">Collection vs. Iterator</h3>
<div class="outline-text-3" id="text-1-13">
<ul class="org-ul">
<li>在c++中,所有容器的共同点都是通过iterator来实现的,这显然不是一个好主意(因为
不同容器间不存在相同接口)
</li>
<li>java不仅仅让容器有了公共的借口(都继承自Collection), 同时,也保留了iterator
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">InterfaceVsIterator</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">display</span>(<span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">it</span>) {
        <span style="color: #AE5825;">while</span> (it.hasNext()) {
            <span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">p</span> = it.next();
            System.out.print(p.id() + <span style="color: #5A7644;">": "</span> + p + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">display</span>(<span style="color: #C6B032; font-style: italic;">Collection</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">pets</span>) {
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #46657B;">p</span> : pets) {
            System.out.print(p.id() + <span style="color: #5A7644;">": "</span> + p + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">petList</span> = Pets.arrayList(8);
        <span style="color: #C6B032; font-style: italic;">Set</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">petSet</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">HashSet</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;(petList);
        <span style="color: #C6B032; font-style: italic;">Map</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>, <span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #46657B;">petMap</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedHashMap</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>, <span style="color: #C6B032; font-style: italic;">Pet</span>&gt;();
        <span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">names</span> = (<span style="color: #5A7644;">"Ralph, Eric, Robin, Lacey, "</span> +
                          <span style="color: #5A7644;">"Brithney, Sam, Spot, Fluffy"</span>).split(<span style="color: #5A7644;">", "</span>);
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; names.<span style="color: #C6B032; font-style: italic;">length</span>; i++) {
            petMap.put(names[i], petList.get(i));
        }
        display(petList);
        display(petSet);
        display(petList.iterator());
        display(petSet.iterator());
        System.out.println(petMap);
        System.out.println(petMap.keySet());
        display(petMap.values());
        display(petMap.values().iterator());
    }
}
<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;                    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">{Ralph=Rat, Eric=Manx, Robin=Cymric, Lacey=Mutt, Brithney=Pug, \  //</span>
<span style="color: #4C565D;">//  </span><span style="color: #333B40; font-style: italic;">Sam=Cymric, Spot=Pug, Fluffy=Manx}                               //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[Ralph, Eric, Robin, Lacey, Brithney, Sam, Spot, Fluffy]          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>iterator在你创建了一个container,但是却不想去继承Collection的时候,变得非常的
有用.这种情况下你可以继承AbstractCollection
</li>
<li>这个AbstractCollection值得一书, 因为它是为了用户的便利,而设计的一个Abstract
class, 我们知道interface和class是两个极端,一个必须不能有实现,一个必须全部有
实现. 而Abstract class是可以有一部分实现.具体到这个AbstractCollection,它实现
了Collection的绝大部分的借口,只留下了size()和iterator(), 你继承AbstractCollection
然后实现这两个借口,就可以有个建议的container了.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">CollectionSequence</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">AbstractCollection</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; {
    <span style="color: #AE5825;">private</span> <span style="color: #C6B032; font-style: italic;">Pet</span>[] <span style="color: #46657B;">pets</span> = Pets.createArray(8);
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #C6B032;">size</span>() {
        <span style="color: #AE5825;">return</span> pets.length;
    }
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #C6B032;">iterator</span>() {
        <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;() {
            <span style="color: #AE5825;">private</span> <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">index</span> = 0;
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #C6B032;">hasNext</span>() {
                <span style="color: #AE5825;">return</span> index &lt; pets.<span style="color: #C6B032; font-style: italic;">length</span>;
            }
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #C6B032;">next</span>() {
                <span style="color: #AE5825;">return</span> pets[index++];
            }
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">remove</span>() {
                <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Note implemented</span>
                <span style="color: #AE5825;">throw</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">UnsupportedOperationException</span>();
            }
        };
    }
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">CollectionSequence</span> <span style="color: #46657B;">c</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">CollectionSequence</span>();
        InterfaceVsIterator.display(c);
        InterfaceVsIterator.display(c.iterator());
    }
}
<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;                    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>如果已经继承自其他的类,无法再继承AbstractCollection的话,那么自己单独实现一个
iterator()也是非常好的主意(因为完成的implements Collection需要实现其非常多
的借口函数)
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">org</span>.<span style="color: #86453A;">hfeng</span>.<span style="color: #86453A;">tij4</span>.<span style="color: #86453A;">typeinfo</span>.<span style="color: #86453A;">pets</span>.*;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">PetSequence</span> {
    <span style="color: #AE5825;">protected</span> <span style="color: #C6B032; font-style: italic;">Pet</span>[] <span style="color: #46657B;">pets</span> = Pets.createArray(8);
}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">NonCollectionSequence</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">PetSequence</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt; <span style="color: #C6B032;">iterator</span>() {
        <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">Pet</span>&gt;() {
            <span style="color: #AE5825;">private</span> <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">index</span> = 0;
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #C6B032;">hasNext</span>() {
                <span style="color: #AE5825;">return</span> index &lt; pets.<span style="color: #C6B032; font-style: italic;">length</span>;
            }
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Pet</span> <span style="color: #C6B032;">next</span>() {
                <span style="color: #AE5825;">return</span> pets[index++];
            }
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">remove</span>() {
                <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Not implemented</span>
                <span style="color: #AE5825;">throw</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">UnsupportedOperationException</span>();
            }
        };
    }
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">NonCollectionSequence</span> <span style="color: #46657B;">nc</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">NonCollectionSequence</span>();
        InterfaceVsIterator.display(nc.iterator());
    }
}
<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;                    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">0: Rat 1: Manx 2: Cymric 3: Mutt 4: Pug 5: Cymric 6: Pug 7: Manx  //</span>
<span style="color: #4C565D;">///////////////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-14" class="outline-3">
<h3 id="sec-1-14">Foreach and iterators</h3>
<div class="outline-text-3" id="text-1-14">
<ul class="org-ul">
<li>foreach我们前面都看到过用法了,实际上foreach也可以使用在所有实现Collection的
类上面.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ForEachCollections</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Collection</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">cs</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">LinkedList</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;();
        Collections.addAll(cs, <span style="color: #5A7644;">"Take the long way home"</span>.split(<span style="color: #5A7644;">" "</span>));
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : cs) {
            System.out.print(<span style="color: #5A7644;">" ' "</span> + s + <span style="color: #5A7644;">" ' "</span>);
        }
    }
}
<span style="color: #4C565D;">//////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;   //</span>
<span style="color: #4C565D;">//  </span><span style="color: #333B40; font-style: italic;">' Take '  ' the '  ' long '  ' way '  ' home '  //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>Java SE5 引入了一个叫做Iterable的接口(必须继承其中的iterator()函数), 换句话
说, 一旦你implements了Iterable,你就可以使用foreach了
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">IterableClass</span> <span style="color: #AE5825;">implements</span> <span style="color: #C6B032; font-style: italic;">Iterable</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; {
    <span style="color: #AE5825;">protected</span> <span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">words</span> =
        (<span style="color: #5A7644;">"And that is how we know the Earch to be banana-shaped."</span>).split(<span style="color: #5A7644;">" "</span>);
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #C6B032;">iterator</span>() {
        <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;() {
            <span style="color: #AE5825;">private</span> <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">index</span> = 0;
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #C6B032;">hasNext</span>() {
                <span style="color: #AE5825;">return</span> index &lt; words.<span style="color: #C6B032; font-style: italic;">length</span>;
            }
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #C6B032;">next</span>() {
                <span style="color: #AE5825;">return</span> words[index++];
            }
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">remove</span>() {
                <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Not implemented</span>
                <span style="color: #AE5825;">throw</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">UnsupportedOperationException</span>();
            }
        };
    }
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">IterableClass</span>()) {
            System.out.print(s + <span style="color: #5A7644;">" "</span>);
        }
    }
}
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">And that is how we know the Earch to be banana-shaped.  //</span>
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>Collection的大部分都实现了Iterable, Map没有实现Iterable
</li>
<li>大部分的foreach是通过iterable来实现了foreach,但是数组却不是(数组是普通基本
类型,不是对象)
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ArrayIsNotIterable</span> {
    <span style="color: #AE5825;">static</span> &lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">test</span>(<span style="color: #C6B032; font-style: italic;">Iterable</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #46657B;">ib</span>) {
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">T</span> <span style="color: #46657B;">t</span> : ib) {
            System.out.print(t + <span style="color: #5A7644;">" "</span>);
        }
    }
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        test(Arrays.asList(1, 2, 3));
        <span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">strings</span> = { <span style="color: #5A7644;">"A"</span>, <span style="color: #5A7644;">"B"</span>, <span style="color: #5A7644;">"C"</span>};
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">An array works in foreach, but it's not Iterable:</span>
        <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">! test(strings);</span>
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">You must explicity convert it to an Iterable</span>
        test(Arrays.asList(strings));
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">1 2 3 A B C                                    //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-14-1" class="outline-4">
<h4 id="sec-1-14-1">The Adapter Method idiom</h4>
<div class="outline-text-4" id="text-1-14-1">
<ul class="org-ul">
<li>我们还可以利用Adapter Method这种设计模式来达到更灵活的使用iterator的目的,
比如下面的这个例子,我们把本该使用ral.iterator()的地方,使用了ral.reversed()
</li>
<li>reversed()和iterator()的接口一致(都是Iterable&lt;T&gt;), 但是底层实现机制不一致.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ReversibleArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; {
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032;">ReversibleArrayList</span>(<span style="color: #C6B032; font-style: italic;">Collection</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #46657B;">c</span>) {
        <span style="color: #AE5825;">super</span>(c);
    }
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterable</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #C6B032;">reversed</span>() {
        <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Iterable</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; () {
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt; <span style="color: #C6B032;">iterator</span>() {
                <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">T</span>&gt;() {
                    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">current</span> = size() - 1;
                    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #C6B032;">hasNext</span>() {
                        <span style="color: #AE5825;">return</span> current &gt; -1;
                    }
                    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">T</span> <span style="color: #C6B032;">next</span>() {
                        <span style="color: #AE5825;">return</span> get(current--);
                    }
                    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">remove</span>() {
                        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Not implemented</span>
                        <span style="color: #AE5825;">throw</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">UnsupportedOperationException</span>();
                    }
                };
            }
        };
    }
}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">AdapterMethodIdiom</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">ReversibleArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">ral</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ReversibleArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;(Arrays.asList(<span style="color: #5A7644;">"To be or not to be"</span>.split(<span style="color: #5A7644;">" "</span>)));
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Graphs the ordinary iterator via iterator();</span>
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : ral) {
            System.out.print(s + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Hand it the Iterable of your choice</span>
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : ral.reversed()) {
            System.out.print(s + <span style="color: #5A7644;">" "</span>);
        }
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">To be or not to be                             //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">be to not or be To                             //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>于是我们可以尽情的发挥想象力,再设计出和iterator()接口一致的randomized()
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">MultiIterableClass</span> <span style="color: #AE5825;">extends</span> <span style="color: #C6B032; font-style: italic;">IterableClass</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterable</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #C6B032;">reversed</span>() {
        <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Iterable</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;() {
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #C6B032;">iterator</span>() {
                <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;() {
                    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">current</span> = words.length - 1;
                    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #C6B032;">hasNext</span>() {
                        <span style="color: #AE5825;">return</span> current &gt; -1;
                    }
                    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #C6B032;">next</span>() {
                        <span style="color: #AE5825;">return</span> words[current--];
                    }
                    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">remove</span>() {
                        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Not implemented</span>
                        <span style="color: #AE5825;">throw</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">UnsupportedOperationException</span>();
                    }
                };
            }
        };
    }

    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterable</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #C6B032;">randomized</span>() {
        <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Iterable</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;() {
            <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">Iterator</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #C6B032;">iterator</span>() {
                <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt; <span style="color: #46657B;">shuffled</span> =
                    <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">String</span>&gt;(Arrays.asList(words));
                Collections.shuffle(shuffled, <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47));
                <span style="color: #AE5825;">return</span> shuffled.iterator();
            }
        };
    }
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">MultiIterableClass</span> <span style="color: #46657B;">mic</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">MultiIterableClass</span>();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : mic.reversed()) {
            System.out.print(s + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : mic.randomized()) {
            System.out.print(s + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : mic) {
            System.out.print(s + <span style="color: #5A7644;">" "</span>);
        }
    }
}
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">banana-shaped. be to Earch the know we how is that And  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">is banana-shaped. Earch that how the be And we know to  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">And that is how we know the Earch to be banana-shaped.  //</span>
<span style="color: #4C565D;">/////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>我们从上例中可以看出,Collections.shuffle()没有影响原来的数组.原因是因为
arandomized()在返回的时候,加了一层ArrayList.
</li>
<li>下面的例子详细解释了为什么:
<ul class="org-ul">
<li>我们的底层函数是ia, 然后创建list1的shihi,在ia的外面包了一层ArrayList,所
以shuffle的实际是ArrayList里面的ref们.
</li>
<li>直接使用Arrays.asList(ia)创建的List(Arrays.asList直接使用了底层数组),
一旦shuffle,那么就是数组都被shuffle了.
</li>
<li>所以你要想底层暑假也shuffle,那么你要使用asList, 否则你要在asList出来的List
的基础上,再加一层.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #C6B032; font-style: italic;">holding</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.*;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ModifyingArraysAsList</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        <span style="color: #C6B032; font-style: italic;">Integer</span>[] <span style="color: #46657B;">ia</span> = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">list1</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">ArrayList</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt;(Arrays.asList(ia));
        System.out.println(<span style="color: #5A7644;">"Before shuffling: "</span> + list1);
        Collections.shuffle(list1, rand);
        System.out.println(<span style="color: #5A7644;">"After shuffling: "</span> + list1);
        System.out.println(<span style="color: #5A7644;">"array: "</span> + Arrays.toString(ia));

        <span style="color: #C6B032; font-style: italic;">List</span>&lt;<span style="color: #C6B032; font-style: italic;">Integer</span>&gt; <span style="color: #46657B;">list2</span> = Arrays.asList(ia);
        System.out.println(<span style="color: #5A7644;">"Before shuffling: "</span> + list2);
        Collections.shuffle(list2, rand);
        System.out.println(<span style="color: #5A7644;">"After shuffling: "</span> + list2);
        System.out.println(<span style="color: #5A7644;">"array: "</span> + Arrays.toString(ia));
    }
}
<span style="color: #4C565D;">///////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Before shuffling: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">After shuffling: [4, 6, 3, 1, 8, 7, 2, 5, 10, 9]  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">array: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Before shuffling: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">After shuffling: [9, 1, 6, 3, 7, 2, 5, 10, 4, 8]  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">array: [9, 1, 6, 3, 7, 2, 5, 10, 4, 8]            //</span>
<span style="color: #4C565D;">///////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

         <!-- Disqus Comment BEGIN -->
          <div id="disqus_thread"></div>
          <script type="text/javascript">
              var disqus_shortname = 'harrifeng';

              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

         <!-- Disqus Comment END -->
</div>
</body>
</html>
