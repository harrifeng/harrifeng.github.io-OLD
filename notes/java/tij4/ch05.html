<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Chapter 05: Initialization &amp; Cleanup</title>
<!-- 2015-03-18 Wed 14:15 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="your name" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>

         <link href="http://fonts.googleapis.com/css?family=Droid+Sans+Mono|Galdeano|Open+Sans:600italic,400,600|Roboto+Condensed:400,700" rel="stylesheet" type="text/css">
         <link rel="stylesheet" type="text/css" href="/static/css/main.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="http://harrifeng.github.io/sitemap.html"> UP </a>
 |
 <a accesskey="H" href="http://harrifeng.github.io/index.html"> HOME </a>
</div><div id="preamble" class="status">

         <div id="header">
            <div id="header-top">
                <div id="blog-title">Harrifeng's Path</div>
                <div id="blog-sub-title">纸上得来终觉浅,绝知此事要Coding</div>
            </div>
            <div id="nav">
                <ul>
                    <li><a href="/">首页</a></li>
                    <li><a href="/notes.html">读书笔记</a></li>
                    <li><a href="/algo.html">算法</a></li>
                    <li><a href="/about.html">About Me</a></li>
                    <li>
                    </li>
                </ul>
            </div>
         </div>
</div>
<div id="content">
<h1 class="title">Chapter 05: Initialization &amp; Cleanup</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Initialization &amp; Cleanup</a>
<ul>
<li><a href="#sec-1-1">Method overloading</a></li>
<li><a href="#sec-1-2">Distinguishing overloaded methods</a>
<ul>
<li><a href="#sec-1-2-1">Overloading with primitives</a></li>
<li><a href="#sec-1-2-2">Overloading on return values</a></li>
</ul>
</li>
<li><a href="#sec-1-3">Default constructors</a></li>
<li><a href="#sec-1-4">The this keyword</a>
<ul>
<li><a href="#sec-1-4-1">Calling constructors from constructors</a></li>
<li><a href="#sec-1-4-2">The meaning of static</a></li>
</ul>
</li>
<li><a href="#sec-1-5">Cleanup: Finalization and garbage collection</a>
<ul>
<li><a href="#sec-1-5-1">What's finalize() for?</a></li>
<li><a href="#sec-1-5-2">You must perform cleanup</a></li>
<li><a href="#sec-1-5-3">The termination condition</a></li>
<li><a href="#sec-1-5-4">How a garbage collector works</a></li>
</ul>
</li>
<li><a href="#sec-1-6">Member initialization</a>
<ul>
<li><a href="#sec-1-6-1">Specifying initialization</a></li>
</ul>
</li>
<li><a href="#sec-1-7">Constructor initialization</a>
<ul>
<li><a href="#sec-1-7-1">static data initialization</a></li>
<li><a href="#sec-1-7-2">Explicit static initialization</a></li>
<li><a href="#sec-1-7-3">Non-static instance initialization</a></li>
</ul>
</li>
<li><a href="#sec-1-8">Array initialization</a>
<ul>
<li><a href="#sec-1-8-1">Variable argument lists</a></li>
</ul>
</li>
<li><a href="#sec-1-9">Enumerated types</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Initialization &amp; Cleanup</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>java 继承了c++的ctor的概念,不过更简单.和c++一样,java保证在你使用之前,ctor已
经完成它的工作了
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Rock</span> {
    <span style="color: #C6B032;">Rock</span>() { <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">ctor</span>
        System.out.printf(<span style="color: #5A7644;">"Rock "</span>);
    }
}
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">SimpleConstructor</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 10; i++) {
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Rock</span>();
        }
    }
}

<span style="color: #4C565D;">///////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Rock Rock Rock Rock Rock Rock Rock Rock Rock Rock //</span>
<span style="color: #4C565D;">///////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>上面的例子是default ctor, 你也可以创建带参数的ctor.如果你创建了带参数的ctor
并且只有这一个ctor的话,那么只能用这个带参数的来创建类
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Rock2</span> {
    <span style="color: #C6B032;">Rock2</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span>) {
        System.out.printf(<span style="color: #5A7644;">"Rock "</span> + i + <span style="color: #5A7644;">" "</span>);
    }
}
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">SimpleConstructor2</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 8; i++) {
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Rock2</span>(i);
        }
    }
}

<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Rock 0 Rock 1 Rock 2 Rock 3 Rock 4 Rock 5 Rock 6 Rock 7  //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>仔细观察会发现ctor是一个特殊的function.因为它没有返回值(不是返回void,而是没有)
</li>
</ul>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Method overloading</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>一旦确定了ctor的实现方式,那么java使用overload那就是板上钉钉了.因为ctor不可
能只有一种实现方式,但是ctor的名字只能是和类相同.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Tree</span> {
    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">height</span>;
    <span style="color: #C6B032;">Tree</span>() {
        System.out.println(<span style="color: #5A7644;">"Planting a seedling"</span>);
        height = 0;
    }
    <span style="color: #C6B032;">Tree</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">initialHeight</span>) {
        height = initialHeight;
        System.out.println(<span style="color: #5A7644;">"Creating new Tree that is"</span> +
                           height + <span style="color: #5A7644;">" feet tall"</span>);
    }

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">info</span>() {
        System.out.println(<span style="color: #5A7644;">"Tree is "</span> + height + <span style="color: #5A7644;">" feet tall"</span>);
    }

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">info</span>(<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span>) {
        System.out.println(s + <span style="color: #5A7644;">": Tree is "</span> + height + <span style="color: #5A7644;">" feet tall"</span>);
    }
}
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Overloading</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; 5; i++) {
            <span style="color: #C6B032; font-style: italic;">Tree</span> <span style="color: #46657B;">t</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Tree</span>(i);
            t.info();
            t.info(<span style="color: #5A7644;">"overloaded method"</span>);
        }
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Overloaded ctor;</span>
        <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Tree</span>();
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Creating new Tree that is0 feet tall           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Tree is 0 feet tall                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">overloaded method: Tree is 0 feet tall         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Creating new Tree that is1 feet tall           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Tree is 1 feet tall                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">overloaded method: Tree is 1 feet tall         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Creating new Tree that is2 feet tall           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Tree is 2 feet tall                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">overloaded method: Tree is 2 feet tall         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Creating new Tree that is3 feet tall           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Tree is 3 feet tall                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">overloaded method: Tree is 3 feet tall         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Creating new Tree that is4 feet tall           //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Tree is 4 feet tall                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">overloaded method: Tree is 4 feet tall         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Planting a seedling                            //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">Distinguishing overloaded methods</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>既然名字都相同了,那么函数参数至少"不能完全相同"
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">OverloadingOrder</span> {
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f</span>(<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span>, <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span>) {
        System.out.println(<span style="color: #5A7644;">"String: "</span> + s + <span style="color: #5A7644;">", int:  "</span> + i);
    }
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span>, <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span>) {
        System.out.println(<span style="color: #5A7644;">"int: "</span> + i + <span style="color: #5A7644;">", String:"</span> + s);
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        f(<span style="color: #5A7644;">"String first"</span>, 11);
        f(99, <span style="color: #5A7644;">"Int First"</span>);
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">String: String first, int:  11                 //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">int: 99, String:Int First                      //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1">Overloading with primitives</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>primitive类型可能会自动的升级为较高精度的primitive(隐式转换),在这种情况下,
选择overload 函数的顺序是:
<ol class="org-ol">
<li>如果有exact match的,那首选exact match
</li>
<li>如果没有exact match,那么就选精度升级最小的方法升级精度
</li>
<li>如果传入的参数是常数,那么如果有int,首选int,否则选择精度最小的格式
</li>
<li>如果传入的是char,如果没有char的话,会跳过byte和short,直接选择int
</li>
</ol>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">PrimitiveOverloading</span> {
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f1</span>(<span style="color: #C6B032; font-style: italic;">char</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f1(char)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f1</span>(<span style="color: #C6B032; font-style: italic;">byte</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f1(byte)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f1</span>(<span style="color: #C6B032; font-style: italic;">short</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f1(short)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f1</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f1(int)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f1</span>(<span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f1(long)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f1</span>(<span style="color: #C6B032; font-style: italic;">float</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f1(float)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f1</span>(<span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f1(double)"</span>);
    }
    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">----------------------------------</span>
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f2</span>(<span style="color: #C6B032; font-style: italic;">byte</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f2(byte)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f2</span>(<span style="color: #C6B032; font-style: italic;">short</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f2(short)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f2</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f2(int)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f2</span>(<span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f2(long)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f2</span>(<span style="color: #C6B032; font-style: italic;">float</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f2(float)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f2</span>(<span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f2(double)"</span>);
    }

    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">----------------------------------</span>

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f3</span>(<span style="color: #C6B032; font-style: italic;">short</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f3(short)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f3</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f3(int)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f3</span>(<span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f3(long)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f3</span>(<span style="color: #C6B032; font-style: italic;">float</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f3(float)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f3</span>(<span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f3(double)"</span>);
    }
    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">----------------------------------</span>

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f4</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f4(int)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f4</span>(<span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f4(long)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f4</span>(<span style="color: #C6B032; font-style: italic;">float</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f4(float)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f4</span>(<span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f4(double)"</span>);
    }
    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">----------------------------------</span>

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f5</span>(<span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f5(long)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f5</span>(<span style="color: #C6B032; font-style: italic;">float</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f5(float)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f5</span>(<span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f5(double)"</span>);
    }
    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">----------------------------------</span>

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f6</span>(<span style="color: #C6B032; font-style: italic;">float</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f6(float)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f6</span>(<span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f6(double)"</span>);
    }
    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">----------------------------------</span>

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f7</span>(<span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f7(double)"</span>);
    }
    <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">----------------------------------</span>

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testConstVal</span>() {
        System.out.print(<span style="color: #5A7644;">"5:"</span>);
        f1(5);f2(5);f3(5);f4(5);f5(5);f6(5);f7(5);
        System.out.println();
    }

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testChar</span>() {
        <span style="color: #C6B032; font-style: italic;">char</span> <span style="color: #46657B;">x</span> = <span style="color: #5A7644;">'x'</span>;
        System.out.print(<span style="color: #5A7644;">"char:"</span>);
        f1(x);f2(x);f3(x);f4(x);f5(x);f6(x);f7(x);
        System.out.println();
    }

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testByte</span>() {
        <span style="color: #C6B032; font-style: italic;">byte</span> <span style="color: #46657B;">x</span> = <span style="color: #5A7644;">'0'</span>;
        System.out.print(<span style="color: #5A7644;">"byte:"</span>);
        f1(x);f2(x);f3(x);f4(x);f5(x);f6(x);f7(x);
        System.out.println();
    }

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testShort</span>() {
        <span style="color: #C6B032; font-style: italic;">short</span> <span style="color: #46657B;">x</span> = <span style="color: #5A7644;">'x'</span>;
        System.out.print(<span style="color: #5A7644;">"short:"</span>);
        f1(x);f2(x);f3(x);f4(x);f5(x);f6(x);f7(x);
        System.out.println();
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testInt</span>() {
        <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">x</span> = <span style="color: #5A7644;">'x'</span>;
        System.out.print(<span style="color: #5A7644;">"int:"</span>);
        f1(x);f2(x);f3(x);f4(x);f5(x);f6(x);f7(x);
        System.out.println();
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testLong</span>() {
        <span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">x</span> = <span style="color: #5A7644;">'x'</span>;
        System.out.print(<span style="color: #5A7644;">"long:"</span>);
        f1(x);f2(x);f3(x);f4(x);f5(x);f6(x);f7(x);
        System.out.println();
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testFloat</span>() {
        <span style="color: #C6B032; font-style: italic;">float</span> <span style="color: #46657B;">x</span> = <span style="color: #5A7644;">'x'</span>;
        System.out.print(<span style="color: #5A7644;">"float:"</span>);
        f1(x);f2(x);f3(x);f4(x);f5(x);f6(x);f7(x);
        System.out.println();
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testDouble</span>() {
        <span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span> = <span style="color: #5A7644;">'x'</span>;
        System.out.print(<span style="color: #5A7644;">"double:"</span>);
        f1(x);f2(x);f3(x);f4(x);f5(x);f6(x);f7(x);
        System.out.println();
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">PrimitiveOverloading</span> <span style="color: #46657B;">p</span> =
            <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">PrimitiveOverloading</span>();
        p.testConstVal();
        p.testChar();
        p.testByte();
        p.testShort();
        p.testInt();
        p.testLong();
        p.testFloat();
        p.testDouble();
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">5:f1(int)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f4(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f5(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f6(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(double)                                     //</span>
<span style="color: #4C565D;">//                                                </span><span style="color: #333B40; font-style: italic;">//</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">char:f1(char)                                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f4(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f5(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f6(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(double)                                     //</span>
<span style="color: #4C565D;">//                                                </span><span style="color: #333B40; font-style: italic;">//</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">byte:f1(byte)                                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(byte)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(short)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f4(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f5(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f6(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(double)                                     //</span>
<span style="color: #4C565D;">//                                                </span><span style="color: #333B40; font-style: italic;">//</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">short:f1(short)                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(short)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(short)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f4(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f5(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f6(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(double)                                     //</span>
<span style="color: #4C565D;">//                                                </span><span style="color: #333B40; font-style: italic;">//</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">int:f1(int)                                    //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f4(int)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f5(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f6(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(double)                                     //</span>
<span style="color: #4C565D;">//                                                </span><span style="color: #333B40; font-style: italic;">//</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">long:f1(long)                                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f4(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f5(long)                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f6(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(double)                                     //</span>
<span style="color: #4C565D;">//                                                </span><span style="color: #333B40; font-style: italic;">//</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">float:f1(float)                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f4(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f5(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f6(float)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(double)                                     //</span>
<span style="color: #4C565D;">//                                                </span><span style="color: #333B40; font-style: italic;">//</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">double:f1(double)                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(double)                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(double)                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f4(double)                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f5(double)                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f6(double)                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(double)                                     //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>从精度低到精度高可以自动转换,反之则可能丢失数据,所以编译器会报错.当然如果
你明确了cast的话,就可以pass了
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Demotion</span> {

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f7</span>(<span style="color: #C6B032; font-style: italic;">char</span> <span style="color: #46657B;">x</span>) {
        System.out.println(<span style="color: #5A7644;">"f7(char)"</span>);
    }

    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">testDouble</span>() {
        <span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">x</span> = 0;
        System.out.println(<span style="color: #5A7644;">"double argument"</span>);
        f7((<span style="color: #C6B032; font-style: italic;">char</span>)x);
    }
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Demotion</span> <span style="color: #46657B;">p</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Demotion</span>();
        p.testDouble();
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">double argument                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f7(char)                                       //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2">Overloading on return values</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>和c++一样,java不能依靠返回值的不同来overload,原因是c-like的函数都可以直接
调用,而不关心返回.比如int f(), 你也可以直接f()调用,那么和void f()就无法区
分了.
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Default constructors</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>和C++一样,如果你不声明一个ctor的话,jvm会为你生成一个default ctor
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Bird</span>{}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">DefaultConstructor</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Bird</span> <span style="color: #46657B;">b</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Bird</span>(); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Default</span>
    }
}
</pre>
</div>
</li>
<li>哪怕你是定义了任意一个ctor, jvm就不会再为你创建任何ctor了, 下面的例子如果你再
输入new Bird2()的话,编译器会报错
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Bird2</span> {
    <span style="color: #C6B032;">Bird2</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span>) {}
    <span style="color: #C6B032;">Bird2</span>(<span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">d</span>) {}
}
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">NoSynthesis</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">! Bird2 b = new Bird2(); // no deafult</span>
        <span style="color: #C6B032; font-style: italic;">Bird2</span> <span style="color: #46657B;">b2</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Bird2</span>(1);
        <span style="color: #C6B032; font-style: italic;">Bird2</span> <span style="color: #46657B;">b3</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Bird2</span>(1.0);
    }
}
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">The this keyword</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>C++中有this指针,而在java中,this被改造成了reference,更加安全了.
</li>
<li>this一定要在"必要的的时候"使用,其他情况下不应该使用.this必要的情况,有如下两
种(后面还有):
<ul class="org-ul">
<li>把自己作为返回值
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Leaf</span> {
    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0;
    <span style="color: #C6B032; font-style: italic;">Leaf</span> <span style="color: #C6B032;">increment</span>() {
        i++;
        <span style="color: #AE5825;">return</span> <span style="color: #AE5825;">this</span>;
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">print</span>() {
        System.out.println(<span style="color: #5A7644;">"i = "</span> + i);
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Leaf</span> <span style="color: #46657B;">x</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Leaf</span>();
        x.increment().increment().increment().print();
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">i = 3                                          //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>自己作为参数传递给"自己调用的函数"
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Person</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">eat</span>(<span style="color: #C6B032; font-style: italic;">Apple</span> <span style="color: #46657B;">apple</span>) {
        <span style="color: #C6B032; font-style: italic;">Apple</span> <span style="color: #46657B;">peeled</span> = apple.getPeeled();
        System.out.println(<span style="color: #5A7644;">"Yummy"</span>);
    }
}
<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Peeler</span> {
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Apple</span> <span style="color: #C6B032;">peel</span>(<span style="color: #C6B032; font-style: italic;">Apple</span> <span style="color: #46657B;">apple</span>) {
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">.. remove peel</span>
        <span style="color: #AE5825;">return</span> apple;
    }
}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Apple</span> {
    <span style="color: #C6B032; font-style: italic;">Apple</span> <span style="color: #C6B032;">getPeeled</span>() {
        <span style="color: #AE5825;">return</span> Peeler.peel(<span style="color: #AE5825;">this</span>);
    }
}
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">PassingThis</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Person</span>().eat(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Apple</span>());
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Yummy                                          //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1">Calling constructors from constructors</h4>
<div class="outline-text-4" id="text-1-4-1">
<ul class="org-ul">
<li>this"必要"使用的情况还有如下两种(都是在ctor的情况下):
<ul class="org-ul">
<li>如果函数参数和类的data名字一样,那么为了防止歧义,我们一般使用下例中的写法
'this.s = s;'
</li>
<li>如果我们有多个ctor,想要在某个ctor里面调用另外y一个'重载的'ctor(使用已有
ctor,而不是重新写一遍,符合DRY原则),那么我们可以使用this, 这个时候this意
义完全不一样了,它成了"另外的ctor"的化身,这用法只可以在ctor中使用
</li>
</ul>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Flower</span> {
    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">petalCount</span> = 0;
    <span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> = <span style="color: #5A7644;">"initial value"</span>;
    <span style="color: #C6B032;">Flower</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">petals</span>) {
        petalCount = petals;
        System.out.println(<span style="color: #5A7644;">"Ctor w/ int arg only, petalCount="</span> + petalCount);
    }
    <span style="color: #C6B032;">Flower</span>(<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">ss</span>) {
        System.out.println(<span style="color: #5A7644;">"Ctor w/ String arg only, s ="</span> + ss);
        s = ss;
    }
    <span style="color: #C6B032;">Flower</span>(<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span>, <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">petals</span>) {
        <span style="color: #AE5825;">this</span>(petals);
        <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">! this(s);  // Can't call two!</span>
        <span style="color: #AE5825;">this</span>.s = s;   <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Another use of "this"</span>
        System.out.println(<span style="color: #5A7644;">"String &amp; int args"</span>);
    }
    <span style="color: #C6B032;">Flower</span>() {
        <span style="color: #AE5825;">this</span>(<span style="color: #5A7644;">"hi"</span>, 47);
        System.out.println(<span style="color: #5A7644;">"default ctor(no args)"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">printPetalCount</span>() {
        <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">! this(11); // Not inside non-ctor!</span>
        System.out.println(<span style="color: #5A7644;">"petalCount = "</span> + petalCount + <span style="color: #5A7644;">" s = "</span> + s);
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Flower</span> <span style="color: #46657B;">x</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Flower</span>();
        x.printPetalCount();
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Ctor w/ int arg only, petalCount=47            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">String &amp; int args                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">default ctor(no args)                          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">petalCount = 47 s = hi                         //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2">The meaning of static</h4>
<div class="outline-text-4" id="text-1-4-2">
<ul class="org-ul">
<li>从this的角度上理解一下static函数就是,类的static函数是一群没有this的函数,没
有this也就没有object,它们是class的附属.
</li>
<li>因为static函数里面没有this,所以你不可以直接在static函数里面调用non-static
函数.
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">Cleanup: Finalization and garbage collection</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>C++ 中有和new配合的delete,但是java采用了GC,所以没有delete,所有的对象都会由
GC自己来回收. 但是,java的GC和C++的delete有显著不同. 因为在java中:
<pre class="example">
1. Your objects might not get garbage collected.
2. Garbage collection is not destruction.
</pre>
</li>
<li>java还提供了一个叫做finalize()的函数,这个函数会在jvm真正的调用GC之前,先执
行这个命令,也就是说根据1.Your objects mingt not get garbage collected.你
的finalize()可能永远都不会执行.
</li>
</ul>
</div>
<div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1">What's finalize() for?</h4>
<div class="outline-text-4" id="text-1-5-1">
<ul class="org-ul">
<li>既然GC是用来回收内存的,虽然并不一定执行,但是执行了就可以替代delete了么,为
什么还要finalize(). 那是因为GC的第三个特性:
<pre class="example">
3. Garbage collection is only about memory
</pre>
</li>
<li>GC只是关于内存的.还有一些资源不是内存的,我们也要释放.比如下例中的数据库
连接的资源conn需要在对象被销毁的时候先释放掉
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #46657B;">MyClass</span> {
    <span style="color: #C6B032; font-style: italic;">Connection</span> <span style="color: #46657B;">conn</span>;
    <span style="color: #AE5825;">public</span> <span style="color: #46657B;">finalize</span>() {
        conn.close();
    }
}
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2">You must perform cleanup</h4>
<div class="outline-text-4" id="text-1-5-2">
<ul class="org-ul">
<li>finalize()使用的情况非常不常见,无论是GC还是finalize()都不一定保证执行,JVM
在内存足够的情况下,不会有兴趣去做这些事情的
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-3" class="outline-4">
<h4 id="sec-1-5-3">The termination condition</h4>
<div class="outline-text-4" id="text-1-5-3">
<ul class="org-ul">
<li>下面是一个finalize()的例子,Book要求在被GC的时候,所有的book都是被checkin状
态的.finalize()用来在最后时刻检查book是不是已经checkin,我们调用了System.gc()
来强制执行GC
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Book</span> {
    <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #46657B;">checkedOut</span> = <span style="color: #86453A;">false</span>;
    <span style="color: #C6B032;">Book</span>(<span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #46657B;">checkOut</span>) {
        checkedOut = checkOut;
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">checkIn</span>() {
        checkedOut = <span style="color: #86453A;">false</span>;
    }
    <span style="color: #AE5825;">protected</span>  <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">finalize</span>() {
        <span style="color: #AE5825;">if</span> (checkedOut) {
            System.out.println(<span style="color: #5A7644;">"Error: checked out"</span>);
            <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Normally you'll also do this:</span>
            <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">super.finalize(); // Call the base-class version</span>
        }
    }
}
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">TerminationCondition</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Book</span> <span style="color: #46657B;">novel</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Book</span>(<span style="color: #86453A;">true</span>);
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Proper cleanup</span>
        novel.checkIn();
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Drop the reference, forget to clean up</span>
        <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Book</span>(<span style="color: #86453A;">true</span>);
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Force garbage collection &amp; finalization</span>
        System.gc();
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Error: checked out                             //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-4" class="outline-4">
<h4 id="sec-1-5-4">How a garbage collector works</h4>
<div class="outline-text-4" id="text-1-5-4">
<ul class="org-ul">
<li>Java把所有的东西都放在heap上面,所以heap分配效率要提高,其所使用的方法就是分配
一大块heap,然后用指针指到开始的地方,一旦有需求指针下移(这就和stack差不多了)
</li>
<li>一个经典的GC原型是reference counting: 每个objec都有一个ref count,每当被一个
ref连接到这个object的时候ref count就加一.GC检查每个object的ref count,如果为
0了,那么就回收这个块内存. 这个方法无法解决"循环引用"的问题,所以没有被JVM采用
</li>
<li>另外一个更快快速的策略就是,一个object如果被引用了,那么在stack或者在static storage
里面,一定有和它联系的数据.然后从stack(或者static)上面开始遍历每个ref,每个ref
里面还有其他ref,寻找一遍,没有被访问到的ref就自动被回收了
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6">Member initialization</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>分两种情况考虑:
<ul class="org-ul">
<li>函数本身的变量:java不会为一个函数的本地变量初始化赋值(初始化赋值的是class
的member),Java倾向于让这种错误第一时间跳出error
<div class="org-src-container">

<pre class="src src-java"><span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f</span>() {
    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span>;
    <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Error -- i not initialized,if give it 0 by default, it would be wrong</span>
    i++;
}
</pre>
</div>
</li>
<li>类的变量:对于class里面的primitive来说,情况则不一样,所有primitive都会有default
value
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">InitialValues</span> {
    <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #46657B;">t</span>;
    <span style="color: #C6B032; font-style: italic;">char</span> <span style="color: #46657B;">c</span>;
    <span style="color: #C6B032; font-style: italic;">byte</span> <span style="color: #46657B;">b</span>;
    <span style="color: #C6B032; font-style: italic;">short</span> <span style="color: #46657B;">s</span>;
    <span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span>;
    <span style="color: #C6B032; font-style: italic;">long</span> <span style="color: #46657B;">l</span>;
    <span style="color: #C6B032; font-style: italic;">float</span> <span style="color: #46657B;">f</span>;
    <span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">d</span>;
    <span style="color: #C6B032; font-style: italic;">InitialValues</span> <span style="color: #46657B;">reference</span>;
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">printInitialValues</span>() {
        System.out.println(<span style="color: #5A7644;">"Data type       Initial Value"</span>);
        System.out.println(<span style="color: #5A7644;">"boolean         "</span> + t);
        System.out.println(<span style="color: #5A7644;">"char            ["</span> + c + <span style="color: #5A7644;">"]"</span> );
        System.out.println(<span style="color: #5A7644;">"byte            "</span> + b);
        System.out.println(<span style="color: #5A7644;">"short           "</span> + s);
        System.out.println(<span style="color: #5A7644;">"int             "</span> + i);
        System.out.println(<span style="color: #5A7644;">"long            "</span> + l);
        System.out.println(<span style="color: #5A7644;">"float           "</span> + f);
        System.out.println(<span style="color: #5A7644;">"double          "</span> + d);
        System.out.println(<span style="color: #5A7644;">"reference       "</span> + reference);
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">InitialValues</span> <span style="color: #46657B;">iv</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">InitialValues</span>();
        iv.printInitialValues();
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Data type       Initial Value                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">boolean         false                          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">char            [ ]                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">byte            0                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">short           0                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">int             0                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">long            0                              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">float           0.0                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">double          0.0                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">reference       null                           //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1">Specifying initialization</h4>
<div class="outline-text-4" id="text-1-6-1">
<ul class="org-ul">
<li>java可以在你声明class变量的时候就赋值(这在c++里面是不行的)
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">InitialValues2</span> {
    <span style="color: #C6B032; font-style: italic;">boolean</span> <span style="color: #46657B;">bool</span> = <span style="color: #86453A;">true</span>;
    <span style="color: #C6B032; font-style: italic;">char</span> <span style="color: #46657B;">ch</span> = <span style="color: #5A7644;">'x'</span>;
    <span style="color: #C6B032; font-style: italic;">double</span> <span style="color: #46657B;">d</span> = 3.14159;
}
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7">Constructor initialization</h3>
<div class="outline-text-3" id="text-1-7">
<ul class="org-ul">
<li>c++是只可以在ctor里面赋值的.java改成了,既可以从ctor里面赋值(保持不同的初始
化值需求),也可以在声明的时候直接赋值(虽然刻板,但是简单).
</li>
<li>java中如果同时在初始化时候赋值,同时在ctor里面也赋值(其实是重新赋值)的话,那么
还是初始化的赋值先进行.换句话说,一个class实例话的时候,会先把所有的内部变量从
头到尾过一遍(如果有赋值就赋值),然后才会轮到ctor
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Window</span> {
    <span style="color: #C6B032;">Window</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"Window("</span> + marker + <span style="color: #5A7644;">")"</span>);
    }
}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">House</span> {
    <span style="color: #C6B032; font-style: italic;">Window</span> <span style="color: #46657B;">w1</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Window</span>(1); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Before ctor</span>
    <span style="color: #C6B032;">House</span>() {
        <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">show tat we're in the ctor</span>
        System.out.println(<span style="color: #5A7644;">"House()"</span>);
        w3 = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Window</span>(33); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Reinitialize w3</span>
    }
    <span style="color: #C6B032; font-style: italic;">Window</span> <span style="color: #46657B;">w2</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Window</span>(2); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">After ctor</span>
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f</span>() {
        System.out.println(<span style="color: #5A7644;">"f()"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">Window</span> <span style="color: #46657B;">w3</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Window</span>(3); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">At end</span>
}
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">OrderOfInitialization</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">House</span> <span style="color: #46657B;">h</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">House</span>();
        h.f(); <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Shows that construction is done</span>
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Window(1)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Window(2)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Window(3)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">House()                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Window(33)                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f()                                            //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1">static data initialization</h4>
<div class="outline-text-4" id="text-1-7-1">
<ul class="org-ul">
<li>下面就是一个static data初始化的例子
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Bowl</span> {
    <span style="color: #C6B032;">Bowl</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"Bowl("</span> + marker + <span style="color: #5A7644;">")"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f1</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"f1("</span> + marker + <span style="color: #5A7644;">")"</span>);
    }
}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Table</span> {
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Bowl</span> <span style="color: #46657B;">bowl1</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Bowl</span>(1);
    <span style="color: #C6B032;">Table</span>() {
        System.out.println(<span style="color: #5A7644;">"Table()"</span>);
        bowl2.f1(1);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f2</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"f2("</span> + marker + <span style="color: #5A7644;">")"</span>);
    }
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Bowl</span> <span style="color: #46657B;">bowl2</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Bowl</span>(2);
}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Cupboard</span> {
    <span style="color: #C6B032; font-style: italic;">Bowl</span> <span style="color: #46657B;">bowl3</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Bowl</span>(3);
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Bowl</span> <span style="color: #46657B;">bowl4</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Bowl</span>(4);
    <span style="color: #C6B032;">Cupboard</span>() {
        System.out.println(<span style="color: #5A7644;">"Cupboard()"</span>);
        bowl4.f1(2);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f3</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"f3("</span> + marker + <span style="color: #5A7644;">")"</span>);
    }
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Bowl</span> <span style="color: #46657B;">bowl5</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Bowl</span>(5);
}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">StaticInitialization</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        System.out.println(<span style="color: #5A7644;">"Creating new Cupboard() in main"</span>);
        <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cupboard</span>();
        System.out.println(<span style="color: #5A7644;">"Creating new Cupboard() in main"</span>);
        <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cupboard</span>();
        table.f2(1);
        cupboard.f3(1);
    }
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Table</span> <span style="color: #46657B;">table</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Table</span>();
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Cupboard</span> <span style="color: #46657B;">cupboard</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cupboard</span>();
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Bowl(1)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Bowl(2)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Table()                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f1(1)                                          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Bowl(4)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Bowl(5)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Bowl(3)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Cupboard()                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f1(2)                                          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Creating new Cupboard() in main                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Bowl(3)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Cupboard()                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f1(2)                                          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Creating new Cupboard() in main                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Bowl(3)                                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Cupboard()                                     //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f1(2)                                          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f2(1)                                          //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f3(1)                                          //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>这个例子说明的比较多:
<ul class="org-ul">
<li>首先是刚才说了的:所有的class variable都会比函数首先开始initialize,这里
所有的f()都是在最后的
</li>
<li>其次这里更进 一步的说明static variable会比普通variable更先初始化==&gt;Bowl(3)
出现在Bowl(4)和Bowl(5)之后,虽然在他们前面.
</li>
<li>再次是Bowl(1),Bowl(2), Bowl(4), Bowl(5)都只初始化了一次. 这也符合static的
特点:其是class的附属只需初始化一次.
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-7-2" class="outline-4">
<h4 id="sec-1-7-2">Explicit static initialization</h4>
<div class="outline-text-4" id="text-1-7-2">
<ul class="org-ul">
<li>java中可以使用static加{}的方法来定义static变量.用这种方法(叫做static clause,
或者static block)定义的static变量并不是"先于所有函数,先于所有变量"的调用,而是
什么时候用到,什么时候调用
</li>
<li>下例中,如果我们把(2)解除注释,那会发生如下两个情况:
<ul class="org-ul">
<li>在main函数之前,cup1和cup2就会被产生,虽然定义在main后面
</li>
<li>cup1和cup2只会产生一次,虽然我们(2)里面创建了两次Cups
</li>
</ul>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Cup</span> {
    <span style="color: #C6B032;">Cup</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"Cup("</span> + marker + <span style="color: #5A7644;">")"</span>);
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"f("</span> + marker + <span style="color: #5A7644;">")"</span>);
    }
}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Cups</span> {
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Cup</span> <span style="color: #46657B;">cup1</span>;
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">Cup</span> <span style="color: #46657B;">cup2</span>;
    <span style="color: #AE5825;">static</span> {
        cup1 = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cup</span>(1);
        cup2 = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Cup</span>(2);
    }
    <span style="color: #C6B032;">Cups</span>() {
        System.out.println(<span style="color: #5A7644;">"Cups()"</span>);
    }
}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ExplicitStatic</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        System.out.println(<span style="color: #5A7644;">"Inside main()"</span>);
        Cups.cup1.f(99);  <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">(1)</span>
    }
    <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">static Cups cups1 = new Cups();  // (2)</span>
    <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">static Cups cups2 = new Cups();  // (2)</span>
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Inside main()                                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Cup(1)                                         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Cup(2)                                         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">f(99)                                          //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-7-3" class="outline-4">
<h4 id="sec-1-7-3">Non-static instance initialization</h4>
<div class="outline-text-4" id="text-1-7-3">
<ul class="org-ul">
<li>我们还可以使用和上面类似的方法来在一个class里面,使用{}创建一个区域,这个区
域里面的代码会早于所有的ctor执行(变量赋值本来早于所有函数的.但是下面的"mug1
&amp; mug2 initialized"打印语句,如果不加{}是不会在ctor之前执行的
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Mug</span> {
    <span style="color: #C6B032;">Mug</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"Mug("</span> + marker + <span style="color: #5A7644;">")"</span> );
    }
    <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">f</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">marker</span>) {
        System.out.println(<span style="color: #5A7644;">"f("</span> + marker + <span style="color: #5A7644;">")"</span>);
    }
}
<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Mugs</span> {
    <span style="color: #C6B032; font-style: italic;">Mug</span> <span style="color: #46657B;">mug1</span>;
    <span style="color: #C6B032; font-style: italic;">Mug</span> <span style="color: #46657B;">mug2</span>;
    {
        mug1 = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Mug</span>(1);
        mug2 = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Mug</span>(2);
        System.out.println(<span style="color: #5A7644;">"mug1 &amp; mug2 initialized"</span>);
    }
    <span style="color: #C6B032;">Mugs</span>() {
        System.out.println(<span style="color: #5A7644;">"Mugs()"</span>);
    }
    <span style="color: #C6B032;">Mugs</span>(<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span>) {
        System.out.println(<span style="color: #5A7644;">"Mugs(int)"</span>);
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        System.out.println(<span style="color: #5A7644;">"Inside main()"</span>);
        <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Mugs</span>();
        System.out.println(<span style="color: #5A7644;">"new Mugs() complete"</span>);
        <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Mugs</span>(1);
        System.out.println(<span style="color: #5A7644;">"new Mugs(1) complete"</span>);
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Inside main()                                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Mug(1)                                         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Mug(2)                                         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">mug1 &amp; mug2 initialized                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Mugs()                                         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">new Mugs() complete                            //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Mug(1)                                         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Mug(2)                                         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">mug1 &amp; mug2 initialized                        //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Mugs(int)                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">new Mugs(1) complete                           //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8">Array initialization</h3>
<div class="outline-text-3" id="text-1-8">
<ul class="org-ul">
<li>java里面一切皆是ref,所以数组也不过是个"指向数值的ref",在java里面申请数组的
时候更倾向于使用int[] a , 因为它提示了我们array的本质
</li>
<li>因为我们所掌握的不过是ref,所以再申请一个ref然后相互赋值的结果就是两个ref指
到了一块.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ArraysOfPrimitives</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">int</span>[] <span style="color: #46657B;">a1</span> = {1, 2, 3, 4, 5};
        <span style="color: #C6B032; font-style: italic;">int</span>[] <span style="color: #46657B;">a2</span>;
        a2 = a1;
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; a2.<span style="color: #C6B032; font-style: italic;">length</span>; i++) {
            a2[i] = a2[i] + 1;
        }
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; a1.<span style="color: #C6B032; font-style: italic;">length</span>; i++) {
            System.out.println(<span style="color: #5A7644;">"a1["</span> + i + <span style="color: #5A7644;">"] = "</span> + a1[i]);
        }
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">a1[0] = 2                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">a1[1] = 3                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">a1[2] = 4                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">a1[3] = 5                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">a1[4] = 6                                      //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>上例中我们看到java的数组有一个成员变量length来指示其有多少个成员.这是个成员
变量不是函数.而String的长度却的确是使用的length()函数. 这是因为String是一个
类,而Array则是内置的属性,不是类,无法拥有函数.
</li>
<li>array也可以先申请ref, 然后runtime的时候再确定数组的大小
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Arrays</span>;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Random</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ArrayNew</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">int</span>[] <span style="color: #46657B;">a</span>;
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        a = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">int</span>[rand.nextInt(20)];

        System.out.println(<span style="color: #5A7644;">"length of a = "</span> + a.length);
        System.out.println(Arrays.toString(a));
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;         //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">length of a = 18                                       //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>如果不是primitive类型,比如,是int的wrapper类型,那么使用方法如下
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Arrays</span>;
<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Random</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ArrayClassObj</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Random</span> <span style="color: #46657B;">rand</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Random</span>(47);
        <span style="color: #C6B032; font-style: italic;">Integer</span>[] <span style="color: #46657B;">a</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Integer</span>[rand.nextInt(20)];
        System.out.println(<span style="color: #5A7644;">"length of a = "</span> + a.length);
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">int</span> <span style="color: #46657B;">i</span> = 0; i &lt; a.<span style="color: #C6B032; font-style: italic;">length</span>; i++) {
            a[i] = rand.nextInt(500);  <span style="color: #4C565D;">//</span><span style="color: #333B40; font-style: italic;">Autoboxing</span>
        }
        System.out.println(Arrays.toString(a));
    }
}
<span style="color: #4C565D;">//////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt;   //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[55, 193, 361, 461, 429, 368, 200, 22, 207, 288, //</span>
<span style="color: #4C565D;">//  </span><span style="color: #333B40; font-style: italic;">128, 51, 89, 309, 278, 498, 361, 20]            //</span>
<span style="color: #4C565D;">//////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>也可以使用{}来初始化数组,但是因为事先要知道数组长度.所以不是特别好用. 记得{}后面
是分号,而参数之间是逗号.
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">import</span> <span style="color: #86453A;">java</span>.<span style="color: #86453A;">util</span>.<span style="color: #C6B032; font-style: italic;">Arrays</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">ArrayInit</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Integer</span>[] <span style="color: #46657B;">a</span> = {
                <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Integer</span>(1),
                <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Integer</span>(2),
                3, <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Autoboxing</span>
        };
        <span style="color: #C6B032; font-style: italic;">Integer</span>[] <span style="color: #46657B;">b</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Integer</span>[] {
                <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Integer</span>(1),
                <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Integer</span>(2),
                3, <span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">Autoboxing</span>
        };
        System.out.println(Arrays.toString(a));
        System.out.println(Arrays.toString(b));
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[1, 2, 3]                                      //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">[1, 2, 3]                                      //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>我们注意到过main函数的参数其实就是一个String数组,那么我们可以通过上面的{}初
始化(cury brace-enclosed list)来给main一个初始化值
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">DynamicArray</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        Other.main(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">String</span>[] {<span style="color: #5A7644;">"fiddle"</span>, <span style="color: #5A7644;">"de"</span>, <span style="color: #5A7644;">"dum"</span>});
    }
}

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Other</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #AE5825;">for</span>(<span style="color: #C6B032; font-style: italic;">String</span> <span style="color: #46657B;">s</span> : args) {
            System.out.print(s + <span style="color: #5A7644;">"  "</span>);
        }
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">fiddle  de  dum                                //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-sec-1-8-1" class="outline-4">
<h4 id="sec-1-8-1">Variable argument lists</h4>
<div class="outline-text-4" id="text-1-8-1">
<ul class="org-ul">
<li>如果我们申请了一个Object的数组,那么其内部每个成员可以是不同类型的变量(都是
Object的derived变量)
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">A</span> {
}

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">VarArgs</span> {
    <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">printArray</span>(<span style="color: #C6B032; font-style: italic;">Object</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">Object</span> <span style="color: #46657B;">obj</span> : args) {
            System.out.print(obj + <span style="color: #5A7644;">" "</span>);
        }
        System.out.println();
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        printArray(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Object</span>[] { <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Integer</span>(47),
                                  <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Float</span>(3.4),
                                  <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Double</span>(11.11)});
        printArray(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Object</span>[] { <span style="color: #5A7644;">"one"</span>, <span style="color: #5A7644;">"two"</span>, <span style="color: #5A7644;">"three"</span>});
        printArray(<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Object</span>[] {<span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">A</span>(), <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">A</span>(), <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">A</span>()});
    }

}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">47 3.4 11.11                                   //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">one two three                                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">lang.tij4.initialization.A@162b333             //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">lang.tij4.initialization.A@e2f8c1              //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">lang.tij4.initialization.A@13954b1             //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9">Enumerated types</h3>
<div class="outline-text-3" id="text-1-9">
<ul class="org-ul">
<li>Java SE5 引入了enum的概念.在java里面enum和class一样,是一个类
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">enum</span> <span style="color: #C6B032; font-style: italic;">Spiciness</span> {
    <span style="color: #46657B;">NOT</span>, <span style="color: #46657B;">MILD</span>, <span style="color: #46657B;">MEDIUM</span>, <span style="color: #46657B;">HOT</span>, <span style="color: #46657B;">FLAMING</span>
}
</pre>
</div>
</li>
<li>使用这个enum的方法如下
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">SimpleEnumUse</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Spiciness</span> <span style="color: #46657B;">howHot</span> = <span style="color: #86453A;">Spiciness</span>.MEDIUM;
        System.out.println(howHot);
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">MEDIUM                                         //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>上面我们可以直接打印Enum,因为java为enum提供了toString()函数.同时jvm还为enum
提供了ordinal()函数来排序,提供了values()函数来生成一个数组
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">EnumOrder</span> {
    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #AE5825;">for</span> (<span style="color: #C6B032; font-style: italic;">Spiciness</span> <span style="color: #46657B;">s</span> : Spiciness.values()) {
            System.out.println(s + <span style="color: #5A7644;">", ordinal: "</span> + s.ordinal());
        }
    }
}

<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">NOT, ordinal: 0                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">MILD, ordinal: 1                               //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">MEDIUM, ordinal: 2                             //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">HOT, ordinal: 3                                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">FLAMING, ordinal: 4                            //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
<li>enum在其他语言的一大特点就是可以当作是int type从而可以在switch里面使用, java
也不例外
<div class="org-src-container">

<pre class="src src-java"><span style="color: #AE5825;">package</span> org.hfeng.tij4.<span style="color: #86453A;">initialization</span>;

<span style="color: #AE5825;">public</span> <span style="color: #AE5825;">class</span> <span style="color: #C6B032; font-style: italic;">Burrito</span> {
    <span style="color: #C6B032; font-style: italic;">Spiciness</span> <span style="color: #46657B;">degree</span>;
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032;">Burrito</span>(<span style="color: #C6B032; font-style: italic;">Spiciness</span> <span style="color: #46657B;">degree</span>) {
        <span style="color: #AE5825;">this</span>.degree = degree;
    }
    <span style="color: #AE5825;">public</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">describe</span>() {
        System.out.print(<span style="color: #5A7644;">"This burrito is"</span>);
        <span style="color: #AE5825;">switch</span>(degree) {
            <span style="color: #AE5825;">case</span> NOT:
                System.out.println(<span style="color: #5A7644;">"not spicy at all"</span>);
                <span style="color: #AE5825;">break</span>;
            <span style="color: #AE5825;">case</span> MILD:
            <span style="color: #AE5825;">case</span> MEDIUM:
                System.out.println(<span style="color: #5A7644;">" a little hot."</span>);
                <span style="color: #AE5825;">break</span>;
            <span style="color: #AE5825;">case</span> HOT:
            <span style="color: #AE5825;">case</span> FLAMING:
                System.out.println(<span style="color: #5A7644;">" may be too hot"</span>);
            <span style="color: #AE5825;">default</span>:
        }
    }

    <span style="color: #AE5825;">public</span> <span style="color: #AE5825;">static</span> <span style="color: #C6B032; font-style: italic;">void</span> <span style="color: #C6B032;">main</span>(<span style="color: #C6B032; font-style: italic;">String</span>[] <span style="color: #46657B;">args</span>) {
        <span style="color: #C6B032; font-style: italic;">Burrito</span>
                <span style="color: #46657B;">plain</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Burrito</span>(<span style="color: #86453A;">Spiciness</span>.NOT),
                <span style="color: #46657B;">greenChile</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Burrito</span>(<span style="color: #86453A;">Spiciness</span>.MEDIUM),
                <span style="color: #46657B;">jalapeno</span> = <span style="color: #AE5825;">new</span> <span style="color: #C6B032; font-style: italic;">Burrito</span>(<span style="color: #86453A;">Spiciness</span>.HOT);
        plain.describe();
        greenChile.describe();
        jalapeno.describe();
    }
}
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">&lt;===================OUTPUT===================&gt; //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">This burrito isnot spicy at all                //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">This burrito is a little hot.                  //</span>
<span style="color: #4C565D;">// </span><span style="color: #333B40; font-style: italic;">This burrito is may be too hot                 //</span>
<span style="color: #4C565D;">////////////////////////////////////////////////////</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

         <!-- Disqus Comment BEGIN -->
          <div id="disqus_thread"></div>
          <script type="text/javascript">
              var disqus_shortname = 'harrifeng';

              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

         <!-- Disqus Comment END -->
</div>
</body>
</html>
